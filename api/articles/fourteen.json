{"title":"JavaScript中 --- 绑定多事件问题  浏览器兼容性解决方法。","slug":"fourteen","date":"2020-04-24T03:41:35.000Z","updated":"2022-07-29T04:22:04.754Z","comments":true,"path":"api/articles/fourteen.json","excerpt":" [Figure] ","covers":["https://qny.aqingya.cn/img/638e2a86cc874421a2228f49e3d543d1.jpg"],"content":"<p><img src=\"https://qny.aqingya.cn/img/638e2a86cc874421a2228f49e3d543d1.jpg\"></p>\n<span id=\"more\"></span>\n\n<br>\n<br>\n&emsp;&emsp;为一个元素绑定多事件有两种方法：addEventListener（）和  attachEvent()\n\n<p>addEventListener（）  —IE8及以下不支持</p>\n<ul>\n<li>通过这个方法也可以为元素绑定响应函数  </li>\n<li>参数：<br>&emsp;&emsp;1.事件的字符串，不要on<br>&emsp;&emsp;2.回调函数，当事件触发时该函数会被调用<br>&emsp;&emsp;3.是否在捕获阶段触发事件，需要一个布尔值，一般都传false</li>\n<li>使用addEventListener () 可以同时为一个元素的相同事件同时绑定多个响应函数，这样当事件被触发时，响应函数将会按照函数的绑定顺序执行。</li>\n</ul>\n<p>attachEvent()</p>\n<ul>\n<li>在IE8中可以使用attachEvent()来绑定事件</li>\n<li>参数：<br>&emsp;&emsp;1.事件的字符串，要on。<br>&emsp;&emsp;2.回调函数。</li>\n<li>这个方法也可以同时为一个事件绑定多个处理函数。<br>不同的是它是后绑定的先执行，执行顺序和addEventListener()相反。br</li>\n</ul>\n<br>\n&emsp;&emsp;但是这样就出现了浏览器不兼容的问题，我们可以自己定义一个方法来解决该问题。\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=<span class=\"string\">&quot;en&quot;</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span><br><span class=\"line\">    &lt;meta name=<span class=\"string\">&quot;viewport&quot;</span> content=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class=\"line\">    &lt;script&gt;</span><br><span class=\"line\">        window.onload = function() &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> btn = document.getElementById(<span class=\"string\">&quot;btn&quot;</span>);</span><br><span class=\"line\">            <span class=\"comment\">// btn.onclick = function() &#123;</span></span><br><span class=\"line\">            <span class=\"comment\">//     alert(&quot;1&quot;);</span></span><br><span class=\"line\">            <span class=\"comment\">// &#125;;</span></span><br><span class=\"line\">            <span class=\"comment\">// btn.onclick = function() &#123;</span></span><br><span class=\"line\">            <span class=\"comment\">//     alert(&quot;2&quot;);</span></span><br><span class=\"line\">            <span class=\"comment\">// &#125;;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// btn.addEventListener(&quot;click&quot;, function() &#123;</span></span><br><span class=\"line\">            <span class=\"comment\">//     alert(&quot;1&quot;);</span></span><br><span class=\"line\">            <span class=\"comment\">// &#125;, false);</span></span><br><span class=\"line\">            <span class=\"comment\">// btn.addEventListener(&quot;click&quot;, function() &#123;</span></span><br><span class=\"line\">            <span class=\"comment\">//     alert(&quot;2&quot;);</span></span><br><span class=\"line\">            <span class=\"comment\">// &#125;, false);</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// btn.attachEvent(&quot;onclick&quot;, function() &#123;</span></span><br><span class=\"line\">            <span class=\"comment\">//     alert(&quot;1&quot;);</span></span><br><span class=\"line\">            <span class=\"comment\">// &#125;);</span></span><br><span class=\"line\">            <span class=\"comment\">// btn.attachEvent(&quot;onclick&quot;, function() &#123;</span></span><br><span class=\"line\">            <span class=\"comment\">//     alert(&quot;2&quot;);</span></span><br><span class=\"line\">            <span class=\"comment\">// &#125;);</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// btn.addEventListener(&quot;click&quot;, function () &#123;</span></span><br><span class=\"line\">            <span class=\"comment\">//     alert(this);</span></span><br><span class=\"line\">            <span class=\"comment\">// &#125;, false);</span></span><br><span class=\"line\">            <span class=\"comment\">// btn.attachEvent(&quot;onclick&quot;, function() &#123;</span></span><br><span class=\"line\">            <span class=\"comment\">//     alert(this);</span></span><br><span class=\"line\">            <span class=\"comment\">// &#125;);</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 测试this是指向的谁</span></span><br><span class=\"line\">            <span class=\"comment\">// bing(btn, &quot;click&quot;, function() &#123;</span></span><br><span class=\"line\">            <span class=\"comment\">//     alert(this);</span></span><br><span class=\"line\">            <span class=\"comment\">// &#125;);</span></span><br><span class=\"line\"></span><br><span class=\"line\">            bing(btn, <span class=\"string\">&quot;click&quot;</span>, function() &#123;</span><br><span class=\"line\">                alert(<span class=\"string\">&quot;1&quot;</span>);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">            bing(btn, <span class=\"string\">&quot;click&quot;</span>, function() &#123;</span><br><span class=\"line\">                alert(<span class=\"string\">&quot;2&quot;</span>);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 我们可以自己定义一个函数，来兼容这个问题：</span></span><br><span class=\"line\">        <span class=\"comment\">//     addEventListener()中的this，是绑定事件的对象。</span></span><br><span class=\"line\">        <span class=\"comment\">//     attachEvent()    中的this，是window。</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 参数：</span></span><br><span class=\"line\">        <span class=\"comment\">//       obj       绑定的事件对象</span></span><br><span class=\"line\">        <span class=\"comment\">//       eventStr  事件的字符串(不要on)</span></span><br><span class=\"line\">        <span class=\"comment\">//       callback  回调函数</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\">function <span class=\"title\">bing</span><span class=\"params\">(obj, eventStr, callback)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (obj.addEventListener) &#123;</span><br><span class=\"line\">                obj.addEventListener(eventStr, callback, <span class=\"keyword\">false</span>)</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            \t<span class=\"comment\">// 创建一个匿名函数来调用callback，去指定this指向的元素</span></span><br><span class=\"line\">                obj.attachEvent(<span class=\"string\">&quot;on&quot;</span> + eventStr, function() &#123;</span><br><span class=\"line\">                    callback.call(obj);</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;button id=<span class=\"string\">&quot;btn&quot;</span>&gt;点击&lt;/button&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<br>\n<br>\n愿你的坚持终有收获。\n<br>\n\n","more":"<br>\n<br>\n&emsp;&emsp;为一个元素绑定多事件有两种方法：addEventListener（）和  attachEvent()\n\n<p>addEventListener（）  —IE8及以下不支持</p>\n<ul>\n<li>通过这个方法也可以为元素绑定响应函数  </li>\n<li>参数：<br>&emsp;&emsp;1.事件的字符串，不要on<br>&emsp;&emsp;2.回调函数，当事件触发时该函数会被调用<br>&emsp;&emsp;3.是否在捕获阶段触发事件，需要一个布尔值，一般都传false</li>\n<li>使用addEventListener () 可以同时为一个元素的相同事件同时绑定多个响应函数，这样当事件被触发时，响应函数将会按照函数的绑定顺序执行。</li>\n</ul>\n<p>attachEvent()</p>\n<ul>\n<li>在IE8中可以使用attachEvent()来绑定事件</li>\n<li>参数：<br>&emsp;&emsp;1.事件的字符串，要on。<br>&emsp;&emsp;2.回调函数。</li>\n<li>这个方法也可以同时为一个事件绑定多个处理函数。<br>不同的是它是后绑定的先执行，执行顺序和addEventListener()相反。br</li>\n</ul>\n<br>\n&emsp;&emsp;但是这样就出现了浏览器不兼容的问题，我们可以自己定义一个方法来解决该问题。\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=<span class=\"string\">&quot;en&quot;</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span><br><span class=\"line\">    &lt;meta name=<span class=\"string\">&quot;viewport&quot;</span> content=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class=\"line\">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class=\"line\">    &lt;script&gt;</span><br><span class=\"line\">        window.onload = function() &#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> btn = document.getElementById(<span class=\"string\">&quot;btn&quot;</span>);</span><br><span class=\"line\">            <span class=\"comment\">// btn.onclick = function() &#123;</span></span><br><span class=\"line\">            <span class=\"comment\">//     alert(&quot;1&quot;);</span></span><br><span class=\"line\">            <span class=\"comment\">// &#125;;</span></span><br><span class=\"line\">            <span class=\"comment\">// btn.onclick = function() &#123;</span></span><br><span class=\"line\">            <span class=\"comment\">//     alert(&quot;2&quot;);</span></span><br><span class=\"line\">            <span class=\"comment\">// &#125;;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// btn.addEventListener(&quot;click&quot;, function() &#123;</span></span><br><span class=\"line\">            <span class=\"comment\">//     alert(&quot;1&quot;);</span></span><br><span class=\"line\">            <span class=\"comment\">// &#125;, false);</span></span><br><span class=\"line\">            <span class=\"comment\">// btn.addEventListener(&quot;click&quot;, function() &#123;</span></span><br><span class=\"line\">            <span class=\"comment\">//     alert(&quot;2&quot;);</span></span><br><span class=\"line\">            <span class=\"comment\">// &#125;, false);</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// btn.attachEvent(&quot;onclick&quot;, function() &#123;</span></span><br><span class=\"line\">            <span class=\"comment\">//     alert(&quot;1&quot;);</span></span><br><span class=\"line\">            <span class=\"comment\">// &#125;);</span></span><br><span class=\"line\">            <span class=\"comment\">// btn.attachEvent(&quot;onclick&quot;, function() &#123;</span></span><br><span class=\"line\">            <span class=\"comment\">//     alert(&quot;2&quot;);</span></span><br><span class=\"line\">            <span class=\"comment\">// &#125;);</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// btn.addEventListener(&quot;click&quot;, function () &#123;</span></span><br><span class=\"line\">            <span class=\"comment\">//     alert(this);</span></span><br><span class=\"line\">            <span class=\"comment\">// &#125;, false);</span></span><br><span class=\"line\">            <span class=\"comment\">// btn.attachEvent(&quot;onclick&quot;, function() &#123;</span></span><br><span class=\"line\">            <span class=\"comment\">//     alert(this);</span></span><br><span class=\"line\">            <span class=\"comment\">// &#125;);</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 测试this是指向的谁</span></span><br><span class=\"line\">            <span class=\"comment\">// bing(btn, &quot;click&quot;, function() &#123;</span></span><br><span class=\"line\">            <span class=\"comment\">//     alert(this);</span></span><br><span class=\"line\">            <span class=\"comment\">// &#125;);</span></span><br><span class=\"line\"></span><br><span class=\"line\">            bing(btn, <span class=\"string\">&quot;click&quot;</span>, function() &#123;</span><br><span class=\"line\">                alert(<span class=\"string\">&quot;1&quot;</span>);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">            bing(btn, <span class=\"string\">&quot;click&quot;</span>, function() &#123;</span><br><span class=\"line\">                alert(<span class=\"string\">&quot;2&quot;</span>);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 我们可以自己定义一个函数，来兼容这个问题：</span></span><br><span class=\"line\">        <span class=\"comment\">//     addEventListener()中的this，是绑定事件的对象。</span></span><br><span class=\"line\">        <span class=\"comment\">//     attachEvent()    中的this，是window。</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 参数：</span></span><br><span class=\"line\">        <span class=\"comment\">//       obj       绑定的事件对象</span></span><br><span class=\"line\">        <span class=\"comment\">//       eventStr  事件的字符串(不要on)</span></span><br><span class=\"line\">        <span class=\"comment\">//       callback  回调函数</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\">function <span class=\"title\">bing</span><span class=\"params\">(obj, eventStr, callback)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (obj.addEventListener) &#123;</span><br><span class=\"line\">                obj.addEventListener(eventStr, callback, <span class=\"keyword\">false</span>)</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            \t<span class=\"comment\">// 创建一个匿名函数来调用callback，去指定this指向的元素</span></span><br><span class=\"line\">                obj.attachEvent(<span class=\"string\">&quot;on&quot;</span> + eventStr, function() &#123;</span><br><span class=\"line\">                    callback.call(obj);</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;button id=<span class=\"string\">&quot;btn&quot;</span>&gt;点击&lt;/button&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<br>\n<br>\n愿你的坚持终有收获。\n<br>","categories":[{"name":"JavaScript","path":"api/categories/JavaScript.json"}],"tags":[{"name":"JavaScript","path":"api/tags/JavaScript.json"}]}