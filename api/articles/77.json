{"title":"ES6ä¹‹Promiseçš„ä½¿ç”¨","slug":"77","date":"2020-08-03T04:43:06.000Z","updated":"2022-07-29T04:22:04.764Z","comments":true,"path":"api/articles/77.json","excerpt":" [Figure] ","covers":["https://qny.aqingya.cn/img/256f40f171ae48459ab8e570c92a78db.jpeg","https://qny.aqingya.cn/img/20200803104903.png","https://qny.aqingya.cn/img/20200803120637.png","https://qny.aqingya.cn/img/20200803113004.png","https://qny.aqingya.cn/img/20200803121104.png","https://qny.aqingya.cn/img/20200803121151.png","https://qny.aqingya.cn/img/20200803124030.png","https://qny.aqingya.cn/img/20200803130143.png"],"content":"<p><img src=\"https://qny.aqingya.cn/img/256f40f171ae48459ab8e570c92a78db.jpeg\"></p>\n<span id=\"more\"></span>\n\n<br>\n\n\n\n<h2 id=\"Promise-çš„åŸºæœ¬ä½¿ç”¨\"><a href=\"#Promise-çš„åŸºæœ¬ä½¿ç”¨\" class=\"headerlink\" title=\"Promise çš„åŸºæœ¬ä½¿ç”¨\"></a>Promise çš„åŸºæœ¬ä½¿ç”¨</h2><p>ğŸ”·Promiseåˆ°åº•æ˜¯åšä»€ä¹ˆçš„å‘¢ï¼Ÿ</p>\n<p> &emsp;&emsp;ğŸ”¹<span style=\"color:red\">Promiseæ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚</span></p>\n<br>\n\n<p>ğŸ”·é‚£ä»€ä¹ˆæ—¶å€™æˆ‘ä»¬ä¼šæ¥å¤„ç†å¼‚æ­¥äº‹ä»¶å‘¢ï¼Ÿ</p>\n<p>&emsp;&emsp;ğŸ”¹ä¸€ç§å¾ˆå¸¸è§çš„åœºæ™¯åº”è¯¥å°±æ˜¯ç½‘ç»œè¯·æ±‚äº†ã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹ æˆ‘ä»¬å°è£…ä¸€ä¸ªç½‘ç»œè¯·æ±‚çš„å‡½æ•°ï¼Œå› ä¸ºä¸èƒ½ç«‹å³æ‹¿åˆ°ç»“æœï¼Œæ‰€ä»¥ä¸èƒ½åƒç®€å•çš„3+4=7ä¸€æ ·å°†ç»“æœè¿”å›ã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹æ‰€ä»¥å¾€å¾€æˆ‘ä»¬ä¼šä¼ å…¥å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨æ•°æ®è¯·æ±‚æˆåŠŸæ—¶ï¼Œå°†æ•°æ®é€šè¿‡ä¼ å…¥çš„å‡½æ•°å›è°ƒå‡ºå»ã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹å¦‚æœåªæ˜¯ä¸€ä¸ªç®€å•çš„ç½‘ç»œè¯·æ±‚ï¼Œé‚£ä¹ˆè¿™ç§æ–¹æ¡ˆä¸ä¼šç»™æˆ‘ä»¬å¸¦æ¥å¾ˆå¤§çš„éº»çƒ¦ã€‚</p>\n<p>ä½†æ˜¯ï¼Œå½“ç½‘ç»œè¯·æ±‚éå¸¸å¤æ‚æ—¶ï¼Œå°±ä¼šå‡ºç°å›è°ƒåœ°ç‹±ã€‚</p>\n<p>OKï¼Œæˆ‘ä»¥ä¸€ä¸ªéå¸¸å¤¸å¼ çš„æ¡ˆä¾‹æ¥è¯´æ˜ã€‚</p>\n<p>ğŸ”·æˆ‘ä»¬æ¥è€ƒè™‘ä¸‹é¢çš„åœºæ™¯(æœ‰å¤¸å¼ çš„æˆåˆ†)ï¼š</p>\n<p>&emsp;&emsp;ğŸ”¹æˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ä¸ªurl1ä»æœåŠ¡å™¨åŠ è½½ä¸€ä¸ªæ•°æ®data1ï¼Œdata1ä¸­åŒ…å«äº†ä¸‹ä¸€ä¸ªè¯·æ±‚çš„url2</p>\n<p>&emsp;&emsp;ğŸ”¹æˆ‘ä»¬éœ€è¦é€šè¿‡data1å–å‡ºurl2ï¼Œä»æœåŠ¡å™¨åŠ è½½æ•°æ®data2ï¼Œdata2ä¸­åŒ…å«äº†ä¸‹ä¸€ä¸ªè¯·æ±‚çš„url3</p>\n<p>&emsp;&emsp;ğŸ”¹æˆ‘ä»¬éœ€è¦é€šè¿‡data2å–å‡ºurl3ï¼Œä»æœåŠ¡å™¨åŠ è½½æ•°æ®data3ï¼Œdata3ä¸­åŒ…å«äº†ä¸‹ä¸€ä¸ªè¯·æ±‚çš„url4</p>\n<p>&emsp;&emsp;ğŸ”¹å‘é€ç½‘ç»œè¯·æ±‚url4ï¼Œè·å–æœ€ç»ˆçš„æ•°æ®data4</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200803104903.png\"></p>\n<p>ğŸ”·ä¸Šé¢çš„ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ</p>\n<p>&emsp;&emsp;ğŸ”¹æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥æ­£å¸¸è¿è¡Œå¹¶ä¸”è·å–æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹ä½†æ˜¯ï¼Œè¿™æ ·é¢ä»£ç éš¾çœ‹è€Œä¸”ä¸å®¹æ˜“ç»´æŠ¤ã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹æˆ‘ä»¬æ›´åŠ æœŸæœ›çš„æ˜¯ä¸€ç§æ›´åŠ ä¼˜é›…çš„æ–¹å¼æ¥è¿›è¡Œè¿™ç§å¼‚æ­¥æ“ä½œã€‚</p>\n<p>ğŸ”·å¦‚ä½•åšå‘¢ï¼Ÿå°±æ˜¯ä½¿ç”¨Promiseã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹Promiseå¯ä»¥ä»¥ä¸€ç§éå¸¸ä¼˜é›…çš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>\n<p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹Promiseæœ€åŸºæœ¬çš„è¯­æ³•ã€‚</p>\n<p>è¿™é‡Œï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªå®šæ—¶å™¨æ¥æ¨¡æ‹Ÿå¼‚æ­¥äº‹ä»¶ï¼š</p>\n<p>å‡è®¾ä¸‹é¢çš„dataæ˜¯ä»ç½‘ç»œä¸Š1ç§’åè¯·æ±‚çš„æ•°æ®</p>\n<p>console.logå°±æ˜¯æˆ‘ä»¬çš„å¤„ç†æ–¹å¼ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        resolve()</span><br><span class=\"line\">      &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">    &#125;).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;ä½ å¥½ï¼ï¼ï¼&quot;</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;ä½ å¥½ï¼ï¼ï¼&quot;</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;ä½ å¥½ï¼ï¼ï¼&quot;</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;ä½ å¥½ï¼ï¼ï¼&quot;</span>);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">          resolve()</span><br><span class=\"line\">        &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">          resolve()</span><br><span class=\"line\">        &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<p>ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯æœ‰å¼‚æ­¥æ“ä½œæ—¶ï¼Œä½¿ç”¨Promiseå¯¹è¿™ä¸ªå¼‚æ­¥æ“ä½œè¿›è¡Œå°è£…ï¼Œ</p>\n<p>new-&gt; æ„é€ å‡½æ•°ï¼ˆ1.ä¿å­˜ä¸€äº›çŠ¶æ€ä¿¡æ¯ï¼Œ2.æ‰§è¡Œä¼ å…¥çš„å‡½æ•°ï¼‰</p>\n<p>åœ¨æ‰§è¡Œä¼ å…¥çš„å›è°ƒå‡½æ•°çš„æ—¶å€™ï¼Œä¼šä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œresolveï¼Œrejectï¼Œä»–ä»¬æœ¬èº«åˆæ˜¯å‡½æ•°ï¼Œ</p>\n<p>å½“è¯·æ±‚æ“ä½œæˆåŠŸçš„æ—¶å€™ï¼Œä¼šè°ƒç”¨resolve() å‡½æ•°ï¼Œæ‹¿åˆ°è¯·æ±‚åˆ°çš„æ•°æ®ä¼šåœ¨new Promise å‡ºæ¥çš„Promiseå¯¹è±¡çš„ then æ–¹æ³•ä¸­è¿›è¡Œæ“ä½œï¼Œthenæ–¹æ³•çš„å‚æ•°åˆæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ </p>\n<p>å½“è¯·æ±‚æ“ä½œå¤±è´¥çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨reject() å‡½æ•°ï¼Œå¾—åˆ°å¤±è´¥çš„ä¿¡æ¯ï¼Œå°†ä¼šè¢«new Promise å‡ºæ¥çš„Promiseå¯¹è±¡çš„ catch æ–¹æ³•æ•è·ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        resolve(<span class=\"string\">&quot;hello Promise&quot;</span>)</span><br><span class=\"line\">        <span class=\"comment\">// reject(&quot;error message!!!&quot;)</span></span><br><span class=\"line\">      &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">    &#125;).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<h2 id=\"Promiseä¸‰ç§çŠ¶æ€\"><a href=\"#Promiseä¸‰ç§çŠ¶æ€\" class=\"headerlink\" title=\"Promiseä¸‰ç§çŠ¶æ€\"></a>Promiseä¸‰ç§çŠ¶æ€</h2><p>ğŸ”¹pendingï¼šç­‰å¾…çŠ¶æ€ï¼Œæ¯”å¦‚æ­£åœ¨è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œæˆ–è€…å®šæ—¶å™¨æ²¡æœ‰åˆ°æ—¶é—´ã€‚</p>\n<p>ğŸ”¹fulfillï¼šæ»¡è¶³çŠ¶æ€ï¼Œå½“æˆ‘ä»¬ä¸»åŠ¨å›è°ƒäº†resolveæ—¶ï¼Œå°±å¤„äºè¯¥çŠ¶æ€ï¼Œå¹¶ä¸”ä¼šå›è°ƒ.then()</p>\n<p>ğŸ”¹rejectï¼šæ‹’ç»çŠ¶æ€ï¼Œå½“æˆ‘ä»¬ä¸»åŠ¨å›è°ƒäº†rejectæ—¶ï¼Œå°±å¤„äºè¯¥çŠ¶æ€ï¼Œå¹¶ä¸”ä¼šå›è°ƒ.catch()</p>\n<br>\n\n<p><img src=\"https://qny.aqingya.cn/img/20200803120637.png\"></p>\n<p><img src=\"https://qny.aqingya.cn/img/20200803113004.png\"></p>\n<br>\n\n<h2 id=\"Promiseé“¾å¼è°ƒç”¨\"><a href=\"#Promiseé“¾å¼è°ƒç”¨\" class=\"headerlink\" title=\"Promiseé“¾å¼è°ƒç”¨\"></a><strong>Promiseé“¾å¼è°ƒç”¨</strong></h2><p>æ— è®ºæ˜¯thenè¿˜æ˜¯catchéƒ½å¯ä»¥è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬çš„ä»£ç å…¶å®æ˜¯å¯ä»¥è¿›è¡Œé“¾å¼è°ƒç”¨çš„ï¼š</p>\n<p>è¿™é‡Œæˆ‘ä»¬ç›´æ¥é€šè¿‡PromiseåŒ…è£…äº†ä¸€ä¸‹æ–°çš„æ•°æ®ï¼Œå°†Promiseå¯¹è±¡è¿”å›äº†</p>\n<p>Promise.resovle()ï¼šå°†æ•°æ®åŒ…è£…æˆPromiseå¯¹è±¡ï¼Œå¹¶ä¸”åœ¨å†…éƒ¨å›è°ƒresolve()å‡½æ•°</p>\n<p>Promise.reject()ï¼šå°†æ•°æ®åŒ…è£…æˆPromiseå¯¹è±¡ï¼Œå¹¶ä¸”åœ¨å†…éƒ¨å›è°ƒreject()å‡½æ•°</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200803121104.png\"></p>\n<br>\n\n<p><strong>é“¾å¼è°ƒç”¨ç®€å†™</strong></p>\n<p>ç®€åŒ–ç‰ˆä»£ç ï¼š</p>\n<p>å¦‚æœæˆ‘ä»¬å¸Œæœ›æ•°æ®ç›´æ¥åŒ…è£…æˆPromise.resolveï¼Œé‚£ä¹ˆåœ¨thenä¸­å¯ä»¥ç›´æ¥è¿”å›æ•°æ®</p>\n<p>æ³¨æ„ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘è®²return Promise.resovle(data)æ”¹æˆäº†return dataã€‚ç»“æœä¾ç„¶æ˜¯ä¸€æ ·çš„</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200803121151.png\"></p>\n<br>\n\n<h2 id=\"Promise-prototype-then\"><a href=\"#Promise-prototype-then\" class=\"headerlink\" title=\"Promise.prototype.then()\"></a>Promise.prototype.then()</h2><p>Promiseå®ä¾‹å…·æœ‰thenæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´thenæ–¹æ³•æ—¶å®šä¹‰åœ¨åŸå‹å¯¹è±¡ä¸Šçš„ã€‚</p>\n<p>å®ƒçš„ä½œç”¨æ˜¯ä¸ºPromiseå®ä¾‹æ·»åŠ çŠ¶æ€æ”¹å˜æ—¶çš„å›è°ƒå‡½æ•°ã€‚</p>\n<p>å‰é¢è¯´è¿‡ï¼Œthenæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯resolvedçŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯rejectedçŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼ˆå¯é€‰ï¼‰ã€‚</p>\n<p>thenæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ï¼ˆæ³¨æ„ï¼Œä¸æ˜¯åŸæ¥é‚£ä¸ªPromiseå®ä¾‹ï¼‰å› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ï¼Œå³thenæ–¹æ³•åé¢å†è°ƒç”¨å¦ä¸€ä¸ªthenæ–¹æ³•ã€‚</p>\n<p>é‡‡ç”¨é“¾å¼çš„thenå¯ä»¥æŒ‡å®šä¸€ç»„æŒ‰ç…§æ¬¡åºè°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚è¿™æ—¶ï¼Œå‰ä¸€ä¸ªå›è°ƒå‡½æ•°å¯èƒ½è¿”å›ä¸€ä¸ªè¿˜æ˜¯Promiseå¯¹è±¡ï¼ˆå³æœ‰å¼‚æ­¥æ“ä½œï¼‰ï¼Œè¿™æ—¶å€™ä¸€ä¸ªå›è°ƒå‡½æ•°å°±ä¼šç­‰è¯¥Promiseå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œæ‰ä¼šè¢«è°ƒç”¨ã€‚</p>\n<br>\n\n<h2 id=\"Promise-prototype-catch\"><a href=\"#Promise-prototype-catch\" class=\"headerlink\" title=\"Promise.prototype.catch()\"></a><strong>Promise.prototype.catch()</strong></h2><p>Promise.prototype.catchæ–¹æ³•æ˜¯.then(null, rejection)çš„åˆ«åï¼Œç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// resolve(&quot;hello Promise&quot;)</span></span><br><span class=\"line\">    reject(<span class=\"string\">&quot;error message!!!&quot;</span>)</span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(error);      <span class=\"comment\">// æ‰“å°é”™è¯¯ä¿¡æ¯</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n\n\n<br>\n\n\n\n<h2 id=\"Promise-all\"><a href=\"#Promise-all\" class=\"headerlink\" title=\"Promise.all()\"></a>Promise.all()</h2><p>Promise.all(iterable) æ–¹æ³•è¿”å›ä¸€ä¸ª Promise å®ä¾‹ï¼Œæ­¤å®ä¾‹åœ¨ iterable å‚æ•°å†…æ‰€æœ‰çš„ promise éƒ½â€œå®Œæˆï¼ˆresolvedï¼‰â€æˆ–å‚æ•°ä¸­ä¸åŒ…å« promise æ—¶å›è°ƒå®Œæˆï¼ˆresolveï¼‰ï¼›å¦‚æœå‚æ•°ä¸­  promise æœ‰ä¸€ä¸ªå¤±è´¥ï¼ˆrejectedï¼‰ï¼Œæ­¤å®ä¾‹å›è°ƒå¤±è´¥ï¼ˆrejectï¼‰ï¼Œå¤±è´¥åŸå› çš„æ˜¯ç¬¬ä¸€ä¸ªå¤±è´¥ promise çš„ç»“æœã€‚</p>\n<p>å½“æˆ‘ä»¬åˆè¿™æ ·çš„ä¸€ä¸ªéœ€æ±‚çš„æ—¶å€™ï¼šæˆ‘ä»¬éœ€è¦å‘ä¸¤æ¬¡è¯·æ±‚æˆ–è€…å¤šæ¬¡è¯·æ±‚ï¼Œæˆ‘ä»¬éœ€è¦ç­‰è¿™äº›è¯·æ±‚éƒ½å®Œæˆä¹‹åï¼Œå†è¿›è¡Œä¸€ä¸ªéœ€æ±‚æ“ä½œã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¦‚ä½•æ¥å®ç°çš„ï¼Ÿæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ Promise.all() ã€‚</p>\n<p>æˆ‘ä»¬è¿™é‡Œè¿˜æ˜¯ä½¿ç”¨ setTimeout() æ¥æ¨¡æ‹Ÿè¯·æ±‚ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.all([</span><br><span class=\"line\">  <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;  <span class=\"comment\">// ç½‘ç»œè¯·æ±‚ä¸€</span></span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      resolve(&#123;\t\t\t\t\t\t\t   <span class=\"comment\">//ç½‘ç»œè¯·æ±‚ä¸€å¾—åˆ°çš„æ•°æ®</span></span><br><span class=\"line\">        <span class=\"attr\">name</span>: <span class=\"string\">&quot;é˜¿æ¸…&quot;</span>,                      </span><br><span class=\"line\">        <span class=\"attr\">age</span>: <span class=\"number\">18</span></span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;, <span class=\"number\">3000</span>)</span><br><span class=\"line\">  &#125;),</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;  <span class=\"comment\">//ç½‘ç»œè¯·æ±‚äºŒ</span></span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      resolve(&#123;\t\t\t\t\t\t\t   <span class=\"comment\">//ç½‘ç»œè¯·æ±‚äºŒå¾—åˆ°çš„æ•°æ®</span></span><br><span class=\"line\">        <span class=\"attr\">name</span>: <span class=\"string\">&quot;å¤§å¤§æ€ªå°†å†›&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">age</span>: <span class=\"number\">19</span></span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">]).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">results</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(results);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://qny.aqingya.cn/img/20200803124030.png\"></p>\n<p>å½“ç½‘ç»œè¯·æ±‚éƒ½å®Œæˆçš„æ—¶å€™ï¼Œå°±ä¼šæ‰§è¡Œ Promise.all() çš„thenæ–¹æ³•ã€‚ç½‘ç»œè¯·æ±‚çš„æ•°æ®éƒ½ä¼šæ”¾åœ¨ results æ•°ç»„ä¸­ã€‚ç„¶åæˆ‘ä»¬å°±å¯ä»¥å¯¹å…¶è¿›è¡Œæ“ä½œã€‚</p>\n<p><span style=\"color:red\">éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼ŒPromise.allè·å¾—çš„æˆåŠŸç»“æœçš„æ•°ç»„é‡Œé¢çš„æ•°æ®é¡ºåºå’ŒPromise.allæ¥æ”¶åˆ°çš„æ•°ç»„é¡ºåºæ˜¯ä¸€è‡´çš„ï¼Œå³<em>è¯·æ±‚1</em>çš„ç»“æœåœ¨å‰ï¼Œå³ä¾¿<em>è¯·æ±‚1</em>çš„ç»“æœè·å–çš„æ¯”<em>è¯·æ±‚2</em>è¦æ™šã€‚</span></p>\n<br>\n\n<h2 id=\"Promise-raceçš„ä½¿ç”¨\"><a href=\"#Promise-raceçš„ä½¿ç”¨\" class=\"headerlink\" title=\"Promise.raceçš„ä½¿ç”¨\"></a><strong>Promise.raceçš„ä½¿ç”¨</strong></h2><p>Promise.race(iterable) æ–¹æ³•è¿”å›ä¸€ä¸ª promiseï¼Œä¸€æ—¦è¿­ä»£å™¨ä¸­çš„æŸä¸ªpromiseè§£å†³æˆ–æ‹’ç»ï¼Œè¿”å›çš„ promiseå°±ä¼šè§£å†³æˆ–æ‹’ç»ã€‚</p>\n<p>é¡¾åæ€ä¹‰ï¼ŒPromse.raceå°±æ˜¯èµ›è·‘çš„æ„æ€ï¼Œæ„æ€å°±æ˜¯è¯´ï¼ŒPromise.race([p1, p2, p3])é‡Œé¢å“ªä¸ªç»“æœè·å¾—çš„å¿«ï¼Œå°±è¿”å›é‚£ä¸ªç»“æœï¼Œä¸ç®¡ç»“æœæœ¬èº«æ˜¯æˆåŠŸçŠ¶æ€è¿˜æ˜¯å¤±è´¥çŠ¶æ€ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.race([</span><br><span class=\"line\">  <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123; <span class=\"comment\">// ç½‘ç»œè¯·æ±‚ä¸€</span></span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      resolve(&#123;</span><br><span class=\"line\">        <span class=\"attr\">name</span>: <span class=\"string\">&quot;é˜¿æ¸…&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">age</span>: <span class=\"number\">18</span></span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;, <span class=\"number\">3000</span>)</span><br><span class=\"line\">  &#125;),</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123; <span class=\"comment\">//ç½‘ç»œè¯·æ±‚äºŒ</span></span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      resolve(&#123;</span><br><span class=\"line\">        <span class=\"attr\">name</span>: <span class=\"string\">&quot;å¤§å¤§æ€ªå°†å†›&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">age</span>: <span class=\"number\">19</span></span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">]).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">results</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(results);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://qny.aqingya.cn/img/20200803130143.png\"></p>\n<br>\n\n<p><a href=\"https://es6.ruanyifeng.com/#docs/promise\">es6 Promiseæ•™ç¨‹ é˜®ä¸€å³°</a></p>\n<br>\n\n<br>\n\n<br>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","more":"<br>\n\n\n\n<h2 id=\"Promise-çš„åŸºæœ¬ä½¿ç”¨\"><a href=\"#Promise-çš„åŸºæœ¬ä½¿ç”¨\" class=\"headerlink\" title=\"Promise çš„åŸºæœ¬ä½¿ç”¨\"></a>Promise çš„åŸºæœ¬ä½¿ç”¨</h2><p>ğŸ”·Promiseåˆ°åº•æ˜¯åšä»€ä¹ˆçš„å‘¢ï¼Ÿ</p>\n<p> &emsp;&emsp;ğŸ”¹<span style=\"color:red\">Promiseæ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚</span></p>\n<br>\n\n<p>ğŸ”·é‚£ä»€ä¹ˆæ—¶å€™æˆ‘ä»¬ä¼šæ¥å¤„ç†å¼‚æ­¥äº‹ä»¶å‘¢ï¼Ÿ</p>\n<p>&emsp;&emsp;ğŸ”¹ä¸€ç§å¾ˆå¸¸è§çš„åœºæ™¯åº”è¯¥å°±æ˜¯ç½‘ç»œè¯·æ±‚äº†ã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹ æˆ‘ä»¬å°è£…ä¸€ä¸ªç½‘ç»œè¯·æ±‚çš„å‡½æ•°ï¼Œå› ä¸ºä¸èƒ½ç«‹å³æ‹¿åˆ°ç»“æœï¼Œæ‰€ä»¥ä¸èƒ½åƒç®€å•çš„3+4=7ä¸€æ ·å°†ç»“æœè¿”å›ã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹æ‰€ä»¥å¾€å¾€æˆ‘ä»¬ä¼šä¼ å…¥å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨æ•°æ®è¯·æ±‚æˆåŠŸæ—¶ï¼Œå°†æ•°æ®é€šè¿‡ä¼ å…¥çš„å‡½æ•°å›è°ƒå‡ºå»ã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹å¦‚æœåªæ˜¯ä¸€ä¸ªç®€å•çš„ç½‘ç»œè¯·æ±‚ï¼Œé‚£ä¹ˆè¿™ç§æ–¹æ¡ˆä¸ä¼šç»™æˆ‘ä»¬å¸¦æ¥å¾ˆå¤§çš„éº»çƒ¦ã€‚</p>\n<p>ä½†æ˜¯ï¼Œå½“ç½‘ç»œè¯·æ±‚éå¸¸å¤æ‚æ—¶ï¼Œå°±ä¼šå‡ºç°å›è°ƒåœ°ç‹±ã€‚</p>\n<p>OKï¼Œæˆ‘ä»¥ä¸€ä¸ªéå¸¸å¤¸å¼ çš„æ¡ˆä¾‹æ¥è¯´æ˜ã€‚</p>\n<p>ğŸ”·æˆ‘ä»¬æ¥è€ƒè™‘ä¸‹é¢çš„åœºæ™¯(æœ‰å¤¸å¼ çš„æˆåˆ†)ï¼š</p>\n<p>&emsp;&emsp;ğŸ”¹æˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ä¸ªurl1ä»æœåŠ¡å™¨åŠ è½½ä¸€ä¸ªæ•°æ®data1ï¼Œdata1ä¸­åŒ…å«äº†ä¸‹ä¸€ä¸ªè¯·æ±‚çš„url2</p>\n<p>&emsp;&emsp;ğŸ”¹æˆ‘ä»¬éœ€è¦é€šè¿‡data1å–å‡ºurl2ï¼Œä»æœåŠ¡å™¨åŠ è½½æ•°æ®data2ï¼Œdata2ä¸­åŒ…å«äº†ä¸‹ä¸€ä¸ªè¯·æ±‚çš„url3</p>\n<p>&emsp;&emsp;ğŸ”¹æˆ‘ä»¬éœ€è¦é€šè¿‡data2å–å‡ºurl3ï¼Œä»æœåŠ¡å™¨åŠ è½½æ•°æ®data3ï¼Œdata3ä¸­åŒ…å«äº†ä¸‹ä¸€ä¸ªè¯·æ±‚çš„url4</p>\n<p>&emsp;&emsp;ğŸ”¹å‘é€ç½‘ç»œè¯·æ±‚url4ï¼Œè·å–æœ€ç»ˆçš„æ•°æ®data4</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200803104903.png\"></p>\n<p>ğŸ”·ä¸Šé¢çš„ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ</p>\n<p>&emsp;&emsp;ğŸ”¹æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥æ­£å¸¸è¿è¡Œå¹¶ä¸”è·å–æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹ä½†æ˜¯ï¼Œè¿™æ ·é¢ä»£ç éš¾çœ‹è€Œä¸”ä¸å®¹æ˜“ç»´æŠ¤ã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹æˆ‘ä»¬æ›´åŠ æœŸæœ›çš„æ˜¯ä¸€ç§æ›´åŠ ä¼˜é›…çš„æ–¹å¼æ¥è¿›è¡Œè¿™ç§å¼‚æ­¥æ“ä½œã€‚</p>\n<p>ğŸ”·å¦‚ä½•åšå‘¢ï¼Ÿå°±æ˜¯ä½¿ç”¨Promiseã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹Promiseå¯ä»¥ä»¥ä¸€ç§éå¸¸ä¼˜é›…çš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>\n<p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹Promiseæœ€åŸºæœ¬çš„è¯­æ³•ã€‚</p>\n<p>è¿™é‡Œï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªå®šæ—¶å™¨æ¥æ¨¡æ‹Ÿå¼‚æ­¥äº‹ä»¶ï¼š</p>\n<p>å‡è®¾ä¸‹é¢çš„dataæ˜¯ä»ç½‘ç»œä¸Š1ç§’åè¯·æ±‚çš„æ•°æ®</p>\n<p>console.logå°±æ˜¯æˆ‘ä»¬çš„å¤„ç†æ–¹å¼ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        resolve()</span><br><span class=\"line\">      &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">    &#125;).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;ä½ å¥½ï¼ï¼ï¼&quot;</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;ä½ å¥½ï¼ï¼ï¼&quot;</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;ä½ å¥½ï¼ï¼ï¼&quot;</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;ä½ å¥½ï¼ï¼ï¼&quot;</span>);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">          resolve()</span><br><span class=\"line\">        &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">          resolve()</span><br><span class=\"line\">        &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<p>ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯æœ‰å¼‚æ­¥æ“ä½œæ—¶ï¼Œä½¿ç”¨Promiseå¯¹è¿™ä¸ªå¼‚æ­¥æ“ä½œè¿›è¡Œå°è£…ï¼Œ</p>\n<p>new-&gt; æ„é€ å‡½æ•°ï¼ˆ1.ä¿å­˜ä¸€äº›çŠ¶æ€ä¿¡æ¯ï¼Œ2.æ‰§è¡Œä¼ å…¥çš„å‡½æ•°ï¼‰</p>\n<p>åœ¨æ‰§è¡Œä¼ å…¥çš„å›è°ƒå‡½æ•°çš„æ—¶å€™ï¼Œä¼šä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œresolveï¼Œrejectï¼Œä»–ä»¬æœ¬èº«åˆæ˜¯å‡½æ•°ï¼Œ</p>\n<p>å½“è¯·æ±‚æ“ä½œæˆåŠŸçš„æ—¶å€™ï¼Œä¼šè°ƒç”¨resolve() å‡½æ•°ï¼Œæ‹¿åˆ°è¯·æ±‚åˆ°çš„æ•°æ®ä¼šåœ¨new Promise å‡ºæ¥çš„Promiseå¯¹è±¡çš„ then æ–¹æ³•ä¸­è¿›è¡Œæ“ä½œï¼Œthenæ–¹æ³•çš„å‚æ•°åˆæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ </p>\n<p>å½“è¯·æ±‚æ“ä½œå¤±è´¥çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨reject() å‡½æ•°ï¼Œå¾—åˆ°å¤±è´¥çš„ä¿¡æ¯ï¼Œå°†ä¼šè¢«new Promise å‡ºæ¥çš„Promiseå¯¹è±¡çš„ catch æ–¹æ³•æ•è·ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        resolve(<span class=\"string\">&quot;hello Promise&quot;</span>)</span><br><span class=\"line\">        <span class=\"comment\">// reject(&quot;error message!!!&quot;)</span></span><br><span class=\"line\">      &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">    &#125;).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<h2 id=\"Promiseä¸‰ç§çŠ¶æ€\"><a href=\"#Promiseä¸‰ç§çŠ¶æ€\" class=\"headerlink\" title=\"Promiseä¸‰ç§çŠ¶æ€\"></a>Promiseä¸‰ç§çŠ¶æ€</h2><p>ğŸ”¹pendingï¼šç­‰å¾…çŠ¶æ€ï¼Œæ¯”å¦‚æ­£åœ¨è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œæˆ–è€…å®šæ—¶å™¨æ²¡æœ‰åˆ°æ—¶é—´ã€‚</p>\n<p>ğŸ”¹fulfillï¼šæ»¡è¶³çŠ¶æ€ï¼Œå½“æˆ‘ä»¬ä¸»åŠ¨å›è°ƒäº†resolveæ—¶ï¼Œå°±å¤„äºè¯¥çŠ¶æ€ï¼Œå¹¶ä¸”ä¼šå›è°ƒ.then()</p>\n<p>ğŸ”¹rejectï¼šæ‹’ç»çŠ¶æ€ï¼Œå½“æˆ‘ä»¬ä¸»åŠ¨å›è°ƒäº†rejectæ—¶ï¼Œå°±å¤„äºè¯¥çŠ¶æ€ï¼Œå¹¶ä¸”ä¼šå›è°ƒ.catch()</p>\n<br>\n\n<p><img src=\"https://qny.aqingya.cn/img/20200803120637.png\"></p>\n<p><img src=\"https://qny.aqingya.cn/img/20200803113004.png\"></p>\n<br>\n\n<h2 id=\"Promiseé“¾å¼è°ƒç”¨\"><a href=\"#Promiseé“¾å¼è°ƒç”¨\" class=\"headerlink\" title=\"Promiseé“¾å¼è°ƒç”¨\"></a><strong>Promiseé“¾å¼è°ƒç”¨</strong></h2><p>æ— è®ºæ˜¯thenè¿˜æ˜¯catchéƒ½å¯ä»¥è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬çš„ä»£ç å…¶å®æ˜¯å¯ä»¥è¿›è¡Œé“¾å¼è°ƒç”¨çš„ï¼š</p>\n<p>è¿™é‡Œæˆ‘ä»¬ç›´æ¥é€šè¿‡PromiseåŒ…è£…äº†ä¸€ä¸‹æ–°çš„æ•°æ®ï¼Œå°†Promiseå¯¹è±¡è¿”å›äº†</p>\n<p>Promise.resovle()ï¼šå°†æ•°æ®åŒ…è£…æˆPromiseå¯¹è±¡ï¼Œå¹¶ä¸”åœ¨å†…éƒ¨å›è°ƒresolve()å‡½æ•°</p>\n<p>Promise.reject()ï¼šå°†æ•°æ®åŒ…è£…æˆPromiseå¯¹è±¡ï¼Œå¹¶ä¸”åœ¨å†…éƒ¨å›è°ƒreject()å‡½æ•°</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200803121104.png\"></p>\n<br>\n\n<p><strong>é“¾å¼è°ƒç”¨ç®€å†™</strong></p>\n<p>ç®€åŒ–ç‰ˆä»£ç ï¼š</p>\n<p>å¦‚æœæˆ‘ä»¬å¸Œæœ›æ•°æ®ç›´æ¥åŒ…è£…æˆPromise.resolveï¼Œé‚£ä¹ˆåœ¨thenä¸­å¯ä»¥ç›´æ¥è¿”å›æ•°æ®</p>\n<p>æ³¨æ„ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘è®²return Promise.resovle(data)æ”¹æˆäº†return dataã€‚ç»“æœä¾ç„¶æ˜¯ä¸€æ ·çš„</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200803121151.png\"></p>\n<br>\n\n<h2 id=\"Promise-prototype-then\"><a href=\"#Promise-prototype-then\" class=\"headerlink\" title=\"Promise.prototype.then()\"></a>Promise.prototype.then()</h2><p>Promiseå®ä¾‹å…·æœ‰thenæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´thenæ–¹æ³•æ—¶å®šä¹‰åœ¨åŸå‹å¯¹è±¡ä¸Šçš„ã€‚</p>\n<p>å®ƒçš„ä½œç”¨æ˜¯ä¸ºPromiseå®ä¾‹æ·»åŠ çŠ¶æ€æ”¹å˜æ—¶çš„å›è°ƒå‡½æ•°ã€‚</p>\n<p>å‰é¢è¯´è¿‡ï¼Œthenæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯resolvedçŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯rejectedçŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼ˆå¯é€‰ï¼‰ã€‚</p>\n<p>thenæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ï¼ˆæ³¨æ„ï¼Œä¸æ˜¯åŸæ¥é‚£ä¸ªPromiseå®ä¾‹ï¼‰å› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ï¼Œå³thenæ–¹æ³•åé¢å†è°ƒç”¨å¦ä¸€ä¸ªthenæ–¹æ³•ã€‚</p>\n<p>é‡‡ç”¨é“¾å¼çš„thenå¯ä»¥æŒ‡å®šä¸€ç»„æŒ‰ç…§æ¬¡åºè°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚è¿™æ—¶ï¼Œå‰ä¸€ä¸ªå›è°ƒå‡½æ•°å¯èƒ½è¿”å›ä¸€ä¸ªè¿˜æ˜¯Promiseå¯¹è±¡ï¼ˆå³æœ‰å¼‚æ­¥æ“ä½œï¼‰ï¼Œè¿™æ—¶å€™ä¸€ä¸ªå›è°ƒå‡½æ•°å°±ä¼šç­‰è¯¥Promiseå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œæ‰ä¼šè¢«è°ƒç”¨ã€‚</p>\n<br>\n\n<h2 id=\"Promise-prototype-catch\"><a href=\"#Promise-prototype-catch\" class=\"headerlink\" title=\"Promise.prototype.catch()\"></a><strong>Promise.prototype.catch()</strong></h2><p>Promise.prototype.catchæ–¹æ³•æ˜¯.then(null, rejection)çš„åˆ«åï¼Œç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// resolve(&quot;hello Promise&quot;)</span></span><br><span class=\"line\">    reject(<span class=\"string\">&quot;error message!!!&quot;</span>)</span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(error);      <span class=\"comment\">// æ‰“å°é”™è¯¯ä¿¡æ¯</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n\n\n<br>\n\n\n\n<h2 id=\"Promise-all\"><a href=\"#Promise-all\" class=\"headerlink\" title=\"Promise.all()\"></a>Promise.all()</h2><p>Promise.all(iterable) æ–¹æ³•è¿”å›ä¸€ä¸ª Promise å®ä¾‹ï¼Œæ­¤å®ä¾‹åœ¨ iterable å‚æ•°å†…æ‰€æœ‰çš„ promise éƒ½â€œå®Œæˆï¼ˆresolvedï¼‰â€æˆ–å‚æ•°ä¸­ä¸åŒ…å« promise æ—¶å›è°ƒå®Œæˆï¼ˆresolveï¼‰ï¼›å¦‚æœå‚æ•°ä¸­  promise æœ‰ä¸€ä¸ªå¤±è´¥ï¼ˆrejectedï¼‰ï¼Œæ­¤å®ä¾‹å›è°ƒå¤±è´¥ï¼ˆrejectï¼‰ï¼Œå¤±è´¥åŸå› çš„æ˜¯ç¬¬ä¸€ä¸ªå¤±è´¥ promise çš„ç»“æœã€‚</p>\n<p>å½“æˆ‘ä»¬åˆè¿™æ ·çš„ä¸€ä¸ªéœ€æ±‚çš„æ—¶å€™ï¼šæˆ‘ä»¬éœ€è¦å‘ä¸¤æ¬¡è¯·æ±‚æˆ–è€…å¤šæ¬¡è¯·æ±‚ï¼Œæˆ‘ä»¬éœ€è¦ç­‰è¿™äº›è¯·æ±‚éƒ½å®Œæˆä¹‹åï¼Œå†è¿›è¡Œä¸€ä¸ªéœ€æ±‚æ“ä½œã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¦‚ä½•æ¥å®ç°çš„ï¼Ÿæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ Promise.all() ã€‚</p>\n<p>æˆ‘ä»¬è¿™é‡Œè¿˜æ˜¯ä½¿ç”¨ setTimeout() æ¥æ¨¡æ‹Ÿè¯·æ±‚ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.all([</span><br><span class=\"line\">  <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;  <span class=\"comment\">// ç½‘ç»œè¯·æ±‚ä¸€</span></span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      resolve(&#123;\t\t\t\t\t\t\t   <span class=\"comment\">//ç½‘ç»œè¯·æ±‚ä¸€å¾—åˆ°çš„æ•°æ®</span></span><br><span class=\"line\">        <span class=\"attr\">name</span>: <span class=\"string\">&quot;é˜¿æ¸…&quot;</span>,                      </span><br><span class=\"line\">        <span class=\"attr\">age</span>: <span class=\"number\">18</span></span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;, <span class=\"number\">3000</span>)</span><br><span class=\"line\">  &#125;),</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123;  <span class=\"comment\">//ç½‘ç»œè¯·æ±‚äºŒ</span></span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      resolve(&#123;\t\t\t\t\t\t\t   <span class=\"comment\">//ç½‘ç»œè¯·æ±‚äºŒå¾—åˆ°çš„æ•°æ®</span></span><br><span class=\"line\">        <span class=\"attr\">name</span>: <span class=\"string\">&quot;å¤§å¤§æ€ªå°†å†›&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">age</span>: <span class=\"number\">19</span></span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">]).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">results</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(results);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://qny.aqingya.cn/img/20200803124030.png\"></p>\n<p>å½“ç½‘ç»œè¯·æ±‚éƒ½å®Œæˆçš„æ—¶å€™ï¼Œå°±ä¼šæ‰§è¡Œ Promise.all() çš„thenæ–¹æ³•ã€‚ç½‘ç»œè¯·æ±‚çš„æ•°æ®éƒ½ä¼šæ”¾åœ¨ results æ•°ç»„ä¸­ã€‚ç„¶åæˆ‘ä»¬å°±å¯ä»¥å¯¹å…¶è¿›è¡Œæ“ä½œã€‚</p>\n<p><span style=\"color:red\">éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼ŒPromise.allè·å¾—çš„æˆåŠŸç»“æœçš„æ•°ç»„é‡Œé¢çš„æ•°æ®é¡ºåºå’ŒPromise.allæ¥æ”¶åˆ°çš„æ•°ç»„é¡ºåºæ˜¯ä¸€è‡´çš„ï¼Œå³<em>è¯·æ±‚1</em>çš„ç»“æœåœ¨å‰ï¼Œå³ä¾¿<em>è¯·æ±‚1</em>çš„ç»“æœè·å–çš„æ¯”<em>è¯·æ±‚2</em>è¦æ™šã€‚</span></p>\n<br>\n\n<h2 id=\"Promise-raceçš„ä½¿ç”¨\"><a href=\"#Promise-raceçš„ä½¿ç”¨\" class=\"headerlink\" title=\"Promise.raceçš„ä½¿ç”¨\"></a><strong>Promise.raceçš„ä½¿ç”¨</strong></h2><p>Promise.race(iterable) æ–¹æ³•è¿”å›ä¸€ä¸ª promiseï¼Œä¸€æ—¦è¿­ä»£å™¨ä¸­çš„æŸä¸ªpromiseè§£å†³æˆ–æ‹’ç»ï¼Œè¿”å›çš„ promiseå°±ä¼šè§£å†³æˆ–æ‹’ç»ã€‚</p>\n<p>é¡¾åæ€ä¹‰ï¼ŒPromse.raceå°±æ˜¯èµ›è·‘çš„æ„æ€ï¼Œæ„æ€å°±æ˜¯è¯´ï¼ŒPromise.race([p1, p2, p3])é‡Œé¢å“ªä¸ªç»“æœè·å¾—çš„å¿«ï¼Œå°±è¿”å›é‚£ä¸ªç»“æœï¼Œä¸ç®¡ç»“æœæœ¬èº«æ˜¯æˆåŠŸçŠ¶æ€è¿˜æ˜¯å¤±è´¥çŠ¶æ€ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.race([</span><br><span class=\"line\">  <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123; <span class=\"comment\">// ç½‘ç»œè¯·æ±‚ä¸€</span></span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      resolve(&#123;</span><br><span class=\"line\">        <span class=\"attr\">name</span>: <span class=\"string\">&quot;é˜¿æ¸…&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">age</span>: <span class=\"number\">18</span></span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;, <span class=\"number\">3000</span>)</span><br><span class=\"line\">  &#125;),</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">resolve, reject</span>) </span>&#123; <span class=\"comment\">//ç½‘ç»œè¯·æ±‚äºŒ</span></span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      resolve(&#123;</span><br><span class=\"line\">        <span class=\"attr\">name</span>: <span class=\"string\">&quot;å¤§å¤§æ€ªå°†å†›&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">age</span>: <span class=\"number\">19</span></span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">]).then(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">results</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(results);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"https://qny.aqingya.cn/img/20200803130143.png\"></p>\n<br>\n\n<p><a href=\"https://es6.ruanyifeng.com/#docs/promise\">es6 Promiseæ•™ç¨‹ é˜®ä¸€å³°</a></p>\n<br>\n\n<br>\n\n<br>","categories":[{"name":"ES6","path":"api/categories/ES6.json"}],"tags":[{"name":"Promise","path":"api/tags/Promise.json"},{"name":"ES6","path":"api/tags/ES6.json"}]}