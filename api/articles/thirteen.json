{"title":"JavaScript ---div跟随鼠标移动","slug":"thirteen","date":"2020-04-23T13:29:05.000Z","updated":"2022-07-29T04:22:04.754Z","comments":true,"path":"api/articles/thirteen.json","excerpt":" [Figure] ","covers":["https://qny.aqingya.cn/img/7e789bd443864d498691b293299f68fc.jpg","https://img-blog.csdnimg.cn/20200423212604230.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3d6ZzA4MTc=,size_16,color_FFFFFF,t_70"],"content":"<p><img src=\"https://qny.aqingya.cn/img/7e789bd443864d498691b293299f68fc.jpg\"></p>\n<span id=\"more\"></span>\n\n<br>\n<br>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=&quot;en&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class=\"line\">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class=\"line\">    &lt;style&gt;</span><br><span class=\"line\">        body &#123;</span><br><span class=\"line\">            height: 3000px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        #box &#123;</span><br><span class=\"line\">            width: 100px;</span><br><span class=\"line\">            height: 100px;</span><br><span class=\"line\">            background-color: #bfa;</span><br><span class=\"line\">            /* 开启box的绝对定位 */</span><br><span class=\"line\">            position: absolute;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &lt;/style&gt;</span><br><span class=\"line\">    &lt;script&gt;</span><br><span class=\"line\">        window.onload = function() &#123;</span><br><span class=\"line\">            // 获取box元素</span><br><span class=\"line\">            var box = document.getElementById(&quot;box&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">            // 为window绑定鼠标事件</span><br><span class=\"line\">            document.onmousemove = function(event) &#123;</span><br><span class=\"line\">                // 解决兼容性问题</span><br><span class=\"line\">                event = event || window.event;</span><br><span class=\"line\">                //获取滚动条滚动的距离</span><br><span class=\"line\">                //chromer认为浏览器的滚动条是body的，可以通过Body.scrollTop来获取</span><br><span class=\"line\">                // 火狐等浏览器认为浏览器的滚动条是html的</span><br><span class=\"line\">                // 所以我们就提前进行一个判断</span><br><span class=\"line\">                var st = document.body.scrollTop || document.documentElement.scrollTop;</span><br><span class=\"line\">                var sl = document.body.scrollLeft || document.documentElement.scrollLeft;</span><br><span class=\"line\"></span><br><span class=\"line\">                //获取鼠标的位置</span><br><span class=\"line\">                var top = event.clientY;</span><br><span class=\"line\">                var left = event.clientX;</span><br><span class=\"line\"></span><br><span class=\"line\">                //设置偏移量</span><br><span class=\"line\">                box.style.top = top + st + &quot;px&quot;;</span><br><span class=\"line\">                box.style.left = left + sl + &quot;px&quot;;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;div id=&quot;box&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<p>为什么要获取滚动条长度：如下<br><img src=\"https://img-blog.csdnimg.cn/20200423212604230.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3d6ZzA4MTc=,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<br>\n愿你的坚持终有收获。\n<br>\n<br>\n\n\n\n","more":"<br>\n<br>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=&quot;en&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class=\"line\">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class=\"line\">    &lt;style&gt;</span><br><span class=\"line\">        body &#123;</span><br><span class=\"line\">            height: 3000px;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        #box &#123;</span><br><span class=\"line\">            width: 100px;</span><br><span class=\"line\">            height: 100px;</span><br><span class=\"line\">            background-color: #bfa;</span><br><span class=\"line\">            /* 开启box的绝对定位 */</span><br><span class=\"line\">            position: absolute;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &lt;/style&gt;</span><br><span class=\"line\">    &lt;script&gt;</span><br><span class=\"line\">        window.onload = function() &#123;</span><br><span class=\"line\">            // 获取box元素</span><br><span class=\"line\">            var box = document.getElementById(&quot;box&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">            // 为window绑定鼠标事件</span><br><span class=\"line\">            document.onmousemove = function(event) &#123;</span><br><span class=\"line\">                // 解决兼容性问题</span><br><span class=\"line\">                event = event || window.event;</span><br><span class=\"line\">                //获取滚动条滚动的距离</span><br><span class=\"line\">                //chromer认为浏览器的滚动条是body的，可以通过Body.scrollTop来获取</span><br><span class=\"line\">                // 火狐等浏览器认为浏览器的滚动条是html的</span><br><span class=\"line\">                // 所以我们就提前进行一个判断</span><br><span class=\"line\">                var st = document.body.scrollTop || document.documentElement.scrollTop;</span><br><span class=\"line\">                var sl = document.body.scrollLeft || document.documentElement.scrollLeft;</span><br><span class=\"line\"></span><br><span class=\"line\">                //获取鼠标的位置</span><br><span class=\"line\">                var top = event.clientY;</span><br><span class=\"line\">                var left = event.clientX;</span><br><span class=\"line\"></span><br><span class=\"line\">                //设置偏移量</span><br><span class=\"line\">                box.style.top = top + st + &quot;px&quot;;</span><br><span class=\"line\">                box.style.left = left + sl + &quot;px&quot;;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &lt;/script&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">    &lt;div id=&quot;box&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<p>为什么要获取滚动条长度：如下<br><img src=\"https://img-blog.csdnimg.cn/20200423212604230.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3d6ZzA4MTc=,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<br>\n愿你的坚持终有收获。\n<br>\n<br>","categories":[{"name":"庖丁解牛","path":"api/categories/庖丁解牛.json"}],"tags":[{"name":"JavaScript","path":"api/tags/JavaScript.json"}]}