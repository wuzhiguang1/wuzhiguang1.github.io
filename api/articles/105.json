{"title":"微信小程序——wxParse使用方法","slug":"105","date":"2020-08-30T14:55:04.000Z","updated":"2022-07-29T04:22:04.795Z","comments":true,"path":"api/articles/105.json","excerpt":" [Figure] ","covers":["https://cdn.jsdelivr.net/gh/wuzhiguang1/bolgfile@1.8/photo/p26w3e.png","https://qny.aqingya.cn/img/20200830230514.png"],"content":"<p><img src=\"https://cdn.jsdelivr.net/gh/wuzhiguang1/bolgfile@1.8/photo/p26w3e.png\"></p>\n<span id=\"more\"></span>\n\n<p>wxParse是一个微信小程序富文本解析组件。现在小程序里面自带了一个<a href=\"https://developers.weixin.qq.com/miniprogram/dev/component/rich-text.html\"><code>&lt;rich-text&gt;</code></a>组件也能解析富文本，但是表现不尽人意。所以我还是采用的wxParse来解析富文本的。</p>\n<p>wxParse git地址：<a href=\"https://github.com/icindy/wxParse%E3%80%82\">https://github.com/icindy/wxParse。</a></p>\n<p>如下图：</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200830230514.png\"></p>\n<h3 id=\"2-在-你需要引用这个插件的-wxml-文件中引用-wxParse-wxml\"><a href=\"#2-在-你需要引用这个插件的-wxml-文件中引用-wxParse-wxml\" class=\"headerlink\" title=\"2.在 你需要引用这个插件的 wxml 文件中引用 wxParse.wxml\"></a>2.在 你需要引用这个插件的 wxml 文件中引用 wxParse.wxml</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//路径根据你实际情况修改</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">import</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;../../../wxParse/wxParse.wxml&quot;</span>/&gt;</span> </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-在-你需要引用这个插件的-wxss-文件中引用-wxParse-wxss\"><a href=\"#3-在-你需要引用这个插件的-wxss-文件中引用-wxParse-wxss\" class=\"headerlink\" title=\"3.在 你需要引用这个插件的 wxss 文件中引用 wxParse.wxss\"></a>3.在 你需要引用这个插件的 wxss 文件中引用 wxParse.wxss</h3><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//路径根据你实际情况修改</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&quot;../../../wxParse/wxParse.wxss&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-在-你需要引用这个插件的-js-文件中引用-wxParse-js\"><a href=\"#4-在-你需要引用这个插件的-js-文件中引用-wxParse-js\" class=\"headerlink\" title=\"4.在 你需要引用这个插件的 js 文件中引用 wxParse.js\"></a>4.在 你需要引用这个插件的 js 文件中引用 wxParse.js</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//路径根据你的实际情况更改</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> WxParse = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../../../wxParse/wxParse.js&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-将你需要解析的内容进行解析\"><a href=\"#5-将你需要解析的内容进行解析\" class=\"headerlink\" title=\"5.将你需要解析的内容进行解析\"></a>5.将你需要解析的内容进行解析</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* WxParse.wxParse(bindName , type, data, target,imagePadding)</span></span><br><span class=\"line\"><span class=\"comment\">* 1.bindName绑定的数据名(必填)</span></span><br><span class=\"line\"><span class=\"comment\">* 2.type可以为html或者md(必填)</span></span><br><span class=\"line\"><span class=\"comment\">* 3.data为传入的具体数据(必填)</span></span><br><span class=\"line\"><span class=\"comment\">* 4.target为Page对象,一般为this(必填)</span></span><br><span class=\"line\"><span class=\"comment\">* 5.imagePadding为当图片自适应是左右的单一padding(默认为0,可选)</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> that=<span class=\"built_in\">this</span>;</span><br><span class=\"line\">WxParse.wxParse(<span class=\"string\">&#x27;引用的时候的名字,如courseDetail&#x27;</span>, <span class=\"string\">&#x27;html&#x27;</span>, <span class=\"string\">&#x27;你需要解析的数据,如courseDetailContent&#x27;</span>, that, <span class=\"number\">5</span>)</span><br></pre></td></tr></table></figure>\n\n<p>实例</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Page(&#123;</span><br><span class=\"line\">  <span class=\"attr\">data</span>: &#123;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">onLoad</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> that = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    wx.request(&#123;</span><br><span class=\"line\">        <span class=\"attr\">url</span>: <span class=\"string\">&#x27;&#x27;</span>, </span><br><span class=\"line\">        <span class=\"attr\">method</span>: <span class=\"string\">&#x27;POST&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">data</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&#x27;id&#x27;</span>:<span class=\"number\">13</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"attr\">header</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&#x27;content-type&#x27;</span>: <span class=\"string\">&#x27;application/json&#x27;</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"attr\">success</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> article = res.data[<span class=\"number\">0</span>].post;</span><br><span class=\"line\">            WxParse.wxParse(<span class=\"string\">&#x27;article&#x27;</span>, <span class=\"string\">&#x27;html&#x27;</span>, article, that,<span class=\"number\">5</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"6-在-wxml-文件中引用你解析出来的数据\"><a href=\"#6-在-wxml-文件中引用你解析出来的数据\" class=\"headerlink\" title=\"6.在 wxml 文件中引用你解析出来的数据\"></a>6.在 wxml 文件中引用你解析出来的数据</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//这里的courseDetail就是你上面的bindName</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">is</span>=<span class=\"string\">&quot;wxParse&quot;</span> <span class=\"attr\">data</span>=<span class=\"string\">&quot;&#123;&#123;wxParseData:courseDetail.nodes&#125;&#125;&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br></pre></td></tr></table></figure>","more":"<p>wxParse是一个微信小程序富文本解析组件。现在小程序里面自带了一个<a href=\"https://developers.weixin.qq.com/miniprogram/dev/component/rich-text.html\"><code>&lt;rich-text&gt;</code></a>组件也能解析富文本，但是表现不尽人意。所以我还是采用的wxParse来解析富文本的。</p>\n<p>wxParse git地址：<a href=\"https://github.com/icindy/wxParse%E3%80%82\">https://github.com/icindy/wxParse。</a></p>\n<p>如下图：</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200830230514.png\"></p>\n<h3 id=\"2-在-你需要引用这个插件的-wxml-文件中引用-wxParse-wxml\"><a href=\"#2-在-你需要引用这个插件的-wxml-文件中引用-wxParse-wxml\" class=\"headerlink\" title=\"2.在 你需要引用这个插件的 wxml 文件中引用 wxParse.wxml\"></a>2.在 你需要引用这个插件的 wxml 文件中引用 wxParse.wxml</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//路径根据你实际情况修改</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">import</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;../../../wxParse/wxParse.wxml&quot;</span>/&gt;</span> </span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-在-你需要引用这个插件的-wxss-文件中引用-wxParse-wxss\"><a href=\"#3-在-你需要引用这个插件的-wxss-文件中引用-wxParse-wxss\" class=\"headerlink\" title=\"3.在 你需要引用这个插件的 wxss 文件中引用 wxParse.wxss\"></a>3.在 你需要引用这个插件的 wxss 文件中引用 wxParse.wxss</h3><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//路径根据你实际情况修改</span><br><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">&quot;../../../wxParse/wxParse.wxss&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-在-你需要引用这个插件的-js-文件中引用-wxParse-js\"><a href=\"#4-在-你需要引用这个插件的-js-文件中引用-wxParse-js\" class=\"headerlink\" title=\"4.在 你需要引用这个插件的 js 文件中引用 wxParse.js\"></a>4.在 你需要引用这个插件的 js 文件中引用 wxParse.js</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//路径根据你的实际情况更改</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> WxParse = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;../../../wxParse/wxParse.js&#x27;</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-将你需要解析的内容进行解析\"><a href=\"#5-将你需要解析的内容进行解析\" class=\"headerlink\" title=\"5.将你需要解析的内容进行解析\"></a>5.将你需要解析的内容进行解析</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* WxParse.wxParse(bindName , type, data, target,imagePadding)</span></span><br><span class=\"line\"><span class=\"comment\">* 1.bindName绑定的数据名(必填)</span></span><br><span class=\"line\"><span class=\"comment\">* 2.type可以为html或者md(必填)</span></span><br><span class=\"line\"><span class=\"comment\">* 3.data为传入的具体数据(必填)</span></span><br><span class=\"line\"><span class=\"comment\">* 4.target为Page对象,一般为this(必填)</span></span><br><span class=\"line\"><span class=\"comment\">* 5.imagePadding为当图片自适应是左右的单一padding(默认为0,可选)</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> that=<span class=\"built_in\">this</span>;</span><br><span class=\"line\">WxParse.wxParse(<span class=\"string\">&#x27;引用的时候的名字,如courseDetail&#x27;</span>, <span class=\"string\">&#x27;html&#x27;</span>, <span class=\"string\">&#x27;你需要解析的数据,如courseDetailContent&#x27;</span>, that, <span class=\"number\">5</span>)</span><br></pre></td></tr></table></figure>\n\n<p>实例</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Page(&#123;</span><br><span class=\"line\">  <span class=\"attr\">data</span>: &#123;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">onLoad</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> that = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    wx.request(&#123;</span><br><span class=\"line\">        <span class=\"attr\">url</span>: <span class=\"string\">&#x27;&#x27;</span>, </span><br><span class=\"line\">        <span class=\"attr\">method</span>: <span class=\"string\">&#x27;POST&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">data</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&#x27;id&#x27;</span>:<span class=\"number\">13</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"attr\">header</span>: &#123;</span><br><span class=\"line\">            <span class=\"string\">&#x27;content-type&#x27;</span>: <span class=\"string\">&#x27;application/json&#x27;</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"attr\">success</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> article = res.data[<span class=\"number\">0</span>].post;</span><br><span class=\"line\">            WxParse.wxParse(<span class=\"string\">&#x27;article&#x27;</span>, <span class=\"string\">&#x27;html&#x27;</span>, article, that,<span class=\"number\">5</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"6-在-wxml-文件中引用你解析出来的数据\"><a href=\"#6-在-wxml-文件中引用你解析出来的数据\" class=\"headerlink\" title=\"6.在 wxml 文件中引用你解析出来的数据\"></a>6.在 wxml 文件中引用你解析出来的数据</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//这里的courseDetail就是你上面的bindName</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">template</span> <span class=\"attr\">is</span>=<span class=\"string\">&quot;wxParse&quot;</span> <span class=\"attr\">data</span>=<span class=\"string\">&quot;&#123;&#123;wxParseData:courseDetail.nodes&#125;&#125;&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span><br></pre></td></tr></table></figure>","categories":[{"name":"微信小程序","path":"api/categories/微信小程序.json"}],"tags":[{"name":"微信小程序","path":"api/tags/微信小程序.json"}]}