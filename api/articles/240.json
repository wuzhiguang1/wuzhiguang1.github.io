{"title":"element 中“el-date-picker”限制时间为只能选7天内的日期用法","slug":"240","date":"2022-11-02T09:02:58.000Z","updated":"2022-11-02T09:08:39.907Z","comments":true,"path":"api/articles/240.json","excerpt":null,"covers":["https://qny.aqingya.cn/img/20221102170555.png"],"content":"<p><img src=\"https://qny.aqingya.cn/img/20221102170555.png\"></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">el-date-picker</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">v-model</span>=<span class=\"string\">&quot;date&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">type</span>=<span class=\"string\">&quot;daterange&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:pickerOptions</span>=<span class=\"string\">&quot;pickerOptions&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">range-separator</span>=<span class=\"string\">&quot;至&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">start-placeholder</span>=<span class=\"string\">&quot;开始日期&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">end-placeholder</span>=<span class=\"string\">&quot;结束日期&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-date-picker</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>data</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">choiceDate: <span class=\"literal\">null</span>,</span><br><span class=\"line\"><span class=\"attr\">pickerOptions</span>: &#123;</span><br><span class=\"line\">  <span class=\"attr\">onPick</span>: <span class=\"function\">(<span class=\"params\">&#123; maxDate, minDate &#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 把选择的第一个日期赋值给一个变量。</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.choiceDate = minDate.getTime();</span><br><span class=\"line\">    <span class=\"comment\">// 如何你选择了两个日期了，就把那个变量置空</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (maxDate) <span class=\"built_in\">this</span>.choiceDate = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">disabledDate</span>: <span class=\"function\">(<span class=\"params\">time</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 如何选择了一个日期</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.choiceDate) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 7天的时间戳</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> one = <span class=\"number\">6</span> * <span class=\"number\">24</span> * <span class=\"number\">3600</span> * <span class=\"number\">1000</span>;</span><br><span class=\"line\">      <span class=\"comment\">// 当前日期 - one = 7天之前</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> minTime = <span class=\"built_in\">this</span>.choiceDate - one;</span><br><span class=\"line\">      <span class=\"comment\">// 当前日期 + one = 7天之后</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> maxTime = <span class=\"built_in\">this</span>.choiceDate + one;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> (</span><br><span class=\"line\">        time.getTime() &lt; minTime ||</span><br><span class=\"line\">        time.getTime() &gt; maxTime</span><br><span class=\"line\">        <span class=\"comment\">// 限制不能选择今天及以后</span></span><br><span class=\"line\">        <span class=\"comment\">// || time.getTime() + 1 * 24 * 3600 * 1000 &gt; Date.now()</span></span><br><span class=\"line\">      );</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 如果没有选择日期，就要限制不能选择今天及以后</span></span><br><span class=\"line\">      <span class=\"comment\">// return time.getTime() + 1 * 24 * 3600 * 1000 &gt; Date.now();</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n","more":"<p><img src=\"https://qny.aqingya.cn/img/20221102170555.png\"></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">el-date-picker</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">v-model</span>=<span class=\"string\">&quot;date&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">type</span>=<span class=\"string\">&quot;daterange&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">:pickerOptions</span>=<span class=\"string\">&quot;pickerOptions&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">range-separator</span>=<span class=\"string\">&quot;至&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">start-placeholder</span>=<span class=\"string\">&quot;开始日期&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">end-placeholder</span>=<span class=\"string\">&quot;结束日期&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-date-picker</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>data</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">choiceDate: <span class=\"literal\">null</span>,</span><br><span class=\"line\"><span class=\"attr\">pickerOptions</span>: &#123;</span><br><span class=\"line\">  <span class=\"attr\">onPick</span>: <span class=\"function\">(<span class=\"params\">&#123; maxDate, minDate &#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 把选择的第一个日期赋值给一个变量。</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.choiceDate = minDate.getTime();</span><br><span class=\"line\">    <span class=\"comment\">// 如何你选择了两个日期了，就把那个变量置空</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (maxDate) <span class=\"built_in\">this</span>.choiceDate = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">disabledDate</span>: <span class=\"function\">(<span class=\"params\">time</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 如何选择了一个日期</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.choiceDate) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 7天的时间戳</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> one = <span class=\"number\">6</span> * <span class=\"number\">24</span> * <span class=\"number\">3600</span> * <span class=\"number\">1000</span>;</span><br><span class=\"line\">      <span class=\"comment\">// 当前日期 - one = 7天之前</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> minTime = <span class=\"built_in\">this</span>.choiceDate - one;</span><br><span class=\"line\">      <span class=\"comment\">// 当前日期 + one = 7天之后</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> maxTime = <span class=\"built_in\">this</span>.choiceDate + one;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> (</span><br><span class=\"line\">        time.getTime() &lt; minTime ||</span><br><span class=\"line\">        time.getTime() &gt; maxTime</span><br><span class=\"line\">        <span class=\"comment\">// 限制不能选择今天及以后</span></span><br><span class=\"line\">        <span class=\"comment\">// || time.getTime() + 1 * 24 * 3600 * 1000 &gt; Date.now()</span></span><br><span class=\"line\">      );</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 如果没有选择日期，就要限制不能选择今天及以后</span></span><br><span class=\"line\">      <span class=\"comment\">// return time.getTime() + 1 * 24 * 3600 * 1000 &gt; Date.now();</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n","categories":[{"name":"element","path":"api/categories/element.json"}],"tags":[{"name":"Vue","path":"api/tags/Vue.json"},{"name":"element","path":"api/tags/element.json"},{"name":"日期选择器","path":"api/tags/日期选择器.json"}]}