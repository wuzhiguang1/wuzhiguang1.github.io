{"title":"Vue组件实现返回上一页保存原数据","slug":"261","date":"2023-01-05T08:00:11.000Z","updated":"2023-01-05T08:04:43.781Z","comments":true,"path":"api/articles/261.json","excerpt":null,"covers":null,"content":"<h2 id=\"配置路由\"><a href=\"#配置路由\" class=\"headerlink\" title=\"配置路由\"></a>配置路由</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">new</span> Router(&#123;</span><br><span class=\"line\">  <span class=\"attr\">routes</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/hello&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">name</span>: <span class=\"string\">&#x27;HelloWorld&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">component</span>: HelloWorld,</span><br><span class=\"line\">      <span class=\"attr\">meta</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">keepAlive</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 需要缓存</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/hello2&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">name</span>: <span class=\"string\">&#x27;HelloWorld2&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">component</span>: HelloWorld2,</span><br><span class=\"line\">      <span class=\"attr\">meta</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">keepAlive</span>: <span class=\"literal\">false</span> <span class=\"comment\">// 不需要缓存</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;history&#x27;</span>,</span><br><span class=\"line\">  scrollBehavior (to, <span class=\"keyword\">from</span>, savedPosition) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (savedPosition) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> savedPosition</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">x</span>: <span class=\"number\">0</span>, <span class=\"attr\">y</span>: <span class=\"number\">0</span> &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"在App-vue文件里修改\"><a href=\"#在App-vue文件里修改\" class=\"headerlink\" title=\"在App.vue文件里修改\"></a>在App.vue文件里修改</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;app&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">     <span class=\"comment\">&lt;!-- &lt;router-view /&gt; --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">\t<span class=\"tag\">&lt;<span class=\"name\">keep-alive</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">\t\t<span class=\"tag\">&lt;<span class=\"name\">router-view</span> <span class=\"attr\">v-if</span>=<span class=\"string\">&quot;$route.meta.keepAlive&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">router-view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">\t<span class=\"tag\">&lt;/<span class=\"name\">keep-alive</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">\t<span class=\"tag\">&lt;<span class=\"name\">router-view</span> <span class=\"attr\">v-if</span>=<span class=\"string\">&quot;!$route.meta.keepAlive&quot;</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&lt;/template&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"使用-router-back-返回-才能生效。\"><a href=\"#使用-router-back-返回-才能生效。\" class=\"headerlink\" title=\"使用$router.back()返回,才能生效。\"></a>使用$router.back()返回,才能生效。</h2>","more":"<h2 id=\"配置路由\"><a href=\"#配置路由\" class=\"headerlink\" title=\"配置路由\"></a>配置路由</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">new</span> Router(&#123;</span><br><span class=\"line\">  <span class=\"attr\">routes</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/hello&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">name</span>: <span class=\"string\">&#x27;HelloWorld&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">component</span>: HelloWorld,</span><br><span class=\"line\">      <span class=\"attr\">meta</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">keepAlive</span>: <span class=\"literal\">true</span> <span class=\"comment\">// 需要缓存</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/hello2&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">name</span>: <span class=\"string\">&#x27;HelloWorld2&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">component</span>: HelloWorld2,</span><br><span class=\"line\">      <span class=\"attr\">meta</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">keepAlive</span>: <span class=\"literal\">false</span> <span class=\"comment\">// 不需要缓存</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;history&#x27;</span>,</span><br><span class=\"line\">  scrollBehavior (to, <span class=\"keyword\">from</span>, savedPosition) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (savedPosition) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> savedPosition</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">x</span>: <span class=\"number\">0</span>, <span class=\"attr\">y</span>: <span class=\"number\">0</span> &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"在App-vue文件里修改\"><a href=\"#在App-vue文件里修改\" class=\"headerlink\" title=\"在App.vue文件里修改\"></a>在App.vue文件里修改</h2><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;app&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">     <span class=\"comment\">&lt;!-- &lt;router-view /&gt; --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">\t<span class=\"tag\">&lt;<span class=\"name\">keep-alive</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">\t\t<span class=\"tag\">&lt;<span class=\"name\">router-view</span> <span class=\"attr\">v-if</span>=<span class=\"string\">&quot;$route.meta.keepAlive&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">router-view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">\t<span class=\"tag\">&lt;/<span class=\"name\">keep-alive</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">\t<span class=\"tag\">&lt;<span class=\"name\">router-view</span> <span class=\"attr\">v-if</span>=<span class=\"string\">&quot;!$route.meta.keepAlive&quot;</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&lt;/template&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"使用-router-back-返回-才能生效。\"><a href=\"#使用-router-back-返回-才能生效。\" class=\"headerlink\" title=\"使用$router.back()返回,才能生效。\"></a>使用$router.back()返回,才能生效。</h2>","categories":[{"name":"Vue","path":"api/categories/Vue.json"}],"tags":[{"name":"Vue","path":"api/tags/Vue.json"}]}