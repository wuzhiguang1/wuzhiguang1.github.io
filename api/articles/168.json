{"title":"uni-app微信小程序分享“微信好友”与分享到“朋友圈”功能(最新)","slug":"168","date":"2021-11-18T13:19:44.000Z","updated":"2022-07-29T04:22:04.785Z","comments":true,"path":"api/articles/168.json","excerpt":null,"covers":["https://qny.aqingya.cn/img/20211118212156.png"],"content":"<h2 id=\"方式一：按钮点击分享\"><a href=\"#方式一：按钮点击分享\" class=\"headerlink\" title=\"方式一：按钮点击分享\"></a>方式一：按钮点击分享</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">data-src</span>=<span class=\"string\">&quot;这个是分享图片地址&quot;</span> <span class=\"attr\">data-title</span>=<span class=\"string\">&quot;这个是分享标题&quot;</span> <span class=\"attr\">open-type</span>=<span class=\"string\">&quot;share&quot;</span>&gt;</span>发给好友<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">data-src</span>=<span class=\"string\">&quot;这个是分享图片地址&quot;</span> <span class=\"attr\">data-title</span>=<span class=\"string\">&quot;这个是分享标题&quot;</span> <span class=\"attr\">open-type</span>=<span class=\"string\">&quot;share&quot;</span>&gt;</span>发到朋友圈<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"方式二：uniapp中全局混入分享功能\"><a href=\"#方式二：uniapp中全局混入分享功能\" class=\"headerlink\" title=\"方式二：uniapp中全局混入分享功能\"></a>方式二：uniapp中全局混入分享功能</h2><div class=\"note primary no-icon flat\"><p>用uni-app开发的微信小程序要调用分享功能，以下是点击小程序头部胶囊（三个点）时调用的代码，将每一个页面的分享功能弄成组件调用。</p>\n</div>\n\n<p>1、创建一个js文件。(shere.js)</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span>&#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">data</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">//设置默认的分享参数</span></span><br><span class=\"line\">                <span class=\"attr\">sharedata</span>:&#123;</span><br><span class=\"line\">                    <span class=\"attr\">title</span>:<span class=\"string\">&#x27;ALAPI&#x27;</span>,</span><br><span class=\"line\">                    <span class=\"attr\">path</span>:<span class=\"string\">&#x27;/pages/index/index&#x27;</span>,</span><br><span class=\"line\">                    <span class=\"attr\">imageUrl</span>:<span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">                    <span class=\"attr\">desc</span>:<span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">                    <span class=\"attr\">content</span>:<span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"comment\">//发送给朋友</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">onShareAppMessage</span>(<span class=\"params\">res</span>)</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">                <span class=\"attr\">title</span>:<span class=\"built_in\">this</span>.sharedata.title,</span><br><span class=\"line\">                <span class=\"attr\">path</span>:<span class=\"built_in\">this</span>.sharedata.path,</span><br><span class=\"line\">                <span class=\"attr\">imageUrl</span>:<span class=\"built_in\">this</span>.sharedata.imageUrl,</span><br><span class=\"line\">                <span class=\"attr\">desc</span>:<span class=\"built_in\">this</span>.sharedata.desc,</span><br><span class=\"line\">                <span class=\"attr\">content</span>:<span class=\"built_in\">this</span>.sharedata.content,</span><br><span class=\"line\">                <span class=\"function\"><span class=\"title\">success</span>(<span class=\"params\">res</span>)</span>&#123;</span><br><span class=\"line\">                    uni.showToast(&#123;</span><br><span class=\"line\">                        <span class=\"attr\">title</span>:<span class=\"string\">&#x27;分享成功&#x27;</span></span><br><span class=\"line\">                    &#125;)</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                <span class=\"function\"><span class=\"title\">fail</span>(<span class=\"params\">res</span>)</span>&#123;</span><br><span class=\"line\">                    uni.showToast(&#123;</span><br><span class=\"line\">                        <span class=\"attr\">title</span>:<span class=\"string\">&#x27;分享失败&#x27;</span>,</span><br><span class=\"line\">                        <span class=\"attr\">icon</span>:<span class=\"string\">&#x27;none&#x27;</span></span><br><span class=\"line\">                    &#125;)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">       </span><br><span class=\"line\">        <span class=\"comment\">//uniapp微信小程序分享页面到微信朋友圈</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">onShareTimeline</span>(<span class=\"params\">res</span>)</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">                <span class=\"attr\">title</span>:<span class=\"built_in\">this</span>.sharedata.title,</span><br><span class=\"line\">                <span class=\"attr\">query</span>:<span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">                <span class=\"attr\">imageUrl</span>:<span class=\"built_in\">this</span>.sharedata.imageurl,</span><br><span class=\"line\">                <span class=\"function\"><span class=\"title\">success</span>(<span class=\"params\">res</span>)</span>&#123;</span><br><span class=\"line\">                    uni.showToast(&#123;</span><br><span class=\"line\">                        <span class=\"attr\">title</span>:<span class=\"string\">&#x27;分享成功&#x27;</span></span><br><span class=\"line\">                    &#125;)</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                <span class=\"function\"><span class=\"title\">fail</span>(<span class=\"params\">res</span>)</span>&#123;</span><br><span class=\"line\">                    uni.showToast(&#123;</span><br><span class=\"line\">                        <span class=\"attr\">title</span>:<span class=\"string\">&#x27;分享失败&#x27;</span>,</span><br><span class=\"line\">                        <span class=\"attr\">icon</span>:<span class=\"string\">&#x27;none&#x27;</span></span><br><span class=\"line\">                    &#125;)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>2、全局混入。在 main.js 里面 添加全局的 mixin。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> share <span class=\"keyword\">from</span> <span class=\"string\">&#x27;@/components/....你的路径.../share.js&#x27;</span> <span class=\"comment\">//自定义分享功能</span></span><br><span class=\"line\">Vue.mixin(share)</span><br></pre></td></tr></table></figure>\n\n<p>3、使用。在需要的页面中的data中添加(sharedata)。在需要的页面中修改会将默认参数覆盖，即可完成对某个特定的页面进行分享。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">data</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//设置默认的分享参数</span></span><br><span class=\"line\">            <span class=\"attr\">sharedata</span>:&#123;</span><br><span class=\"line\">                <span class=\"attr\">title</span>:<span class=\"string\">&#x27;ALAPI&#x27;</span>,</span><br><span class=\"line\">                <span class=\"attr\">path</span>:<span class=\"string\">&#x27;/pages/my/my&#x27;</span>,</span><br><span class=\"line\">                <span class=\"attr\">imageUrl</span>:<span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">                <span class=\"attr\">desc</span>:<span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">                <span class=\"attr\">content</span>:<span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>使用方式二，也是最方便的一种使用方式，在main.js中封装成一个全局函数调用。</p>\n<p>main.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.prototype.pub_show_share = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">zhege, l_listdata, xml1,fx_title,fx_path, fx_imageurl, fx_desc, fx_content,xml8</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (fx_title)&#123;zhege.sharedata.title = <span class=\"string\">&#x27;&#x27;</span> + fx_title;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (fx_path)&#123;zhege.sharedata.path = <span class=\"string\">&#x27;&#x27;</span> + fx_path;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (fx_imageurl)&#123;zhege.sharedata.imageurl = <span class=\"string\">&#x27;&#x27;</span> + fx_imageurl;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (fx_desc)&#123;zhege.sharedata.desc = <span class=\"string\">&#x27;&#x27;</span> + fx_desc;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (fx_content)&#123;zhege.sharedata.content = <span class=\"string\">&#x27;&#x27;</span> + fx_content;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在需要特殊分享页面中，放到created中。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"title\">created</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.pub_show_share(<span class=\"built_in\">this</span>, <span class=\"string\">&#x27;&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>,<span class=\"string\">&#x27;我的页面&#x27;</span>,<span class=\"string\">&#x27;/pages/my/my&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>,<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<div class=\"note blue icon-padding flat\"><i class=\"note-icon fas fa-bullhorn\"></i><p>注意：第一个参数一定是 this。</p>\n</div>\n\n<p><img src=\"https://qny.aqingya.cn/img/20211118212156.png\"></p>\n","more":"<h2 id=\"方式一：按钮点击分享\"><a href=\"#方式一：按钮点击分享\" class=\"headerlink\" title=\"方式一：按钮点击分享\"></a>方式一：按钮点击分享</h2><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">data-src</span>=<span class=\"string\">&quot;这个是分享图片地址&quot;</span> <span class=\"attr\">data-title</span>=<span class=\"string\">&quot;这个是分享标题&quot;</span> <span class=\"attr\">open-type</span>=<span class=\"string\">&quot;share&quot;</span>&gt;</span>发给好友<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">data-src</span>=<span class=\"string\">&quot;这个是分享图片地址&quot;</span> <span class=\"attr\">data-title</span>=<span class=\"string\">&quot;这个是分享标题&quot;</span> <span class=\"attr\">open-type</span>=<span class=\"string\">&quot;share&quot;</span>&gt;</span>发到朋友圈<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"方式二：uniapp中全局混入分享功能\"><a href=\"#方式二：uniapp中全局混入分享功能\" class=\"headerlink\" title=\"方式二：uniapp中全局混入分享功能\"></a>方式二：uniapp中全局混入分享功能</h2><div class=\"note primary no-icon flat\"><p>用uni-app开发的微信小程序要调用分享功能，以下是点击小程序头部胶囊（三个点）时调用的代码，将每一个页面的分享功能弄成组件调用。</p>\n</div>\n\n<p>1、创建一个js文件。(shere.js)</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span>&#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">data</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">//设置默认的分享参数</span></span><br><span class=\"line\">                <span class=\"attr\">sharedata</span>:&#123;</span><br><span class=\"line\">                    <span class=\"attr\">title</span>:<span class=\"string\">&#x27;ALAPI&#x27;</span>,</span><br><span class=\"line\">                    <span class=\"attr\">path</span>:<span class=\"string\">&#x27;/pages/index/index&#x27;</span>,</span><br><span class=\"line\">                    <span class=\"attr\">imageUrl</span>:<span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">                    <span class=\"attr\">desc</span>:<span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">                    <span class=\"attr\">content</span>:<span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"comment\">//发送给朋友</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">onShareAppMessage</span>(<span class=\"params\">res</span>)</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">                <span class=\"attr\">title</span>:<span class=\"built_in\">this</span>.sharedata.title,</span><br><span class=\"line\">                <span class=\"attr\">path</span>:<span class=\"built_in\">this</span>.sharedata.path,</span><br><span class=\"line\">                <span class=\"attr\">imageUrl</span>:<span class=\"built_in\">this</span>.sharedata.imageUrl,</span><br><span class=\"line\">                <span class=\"attr\">desc</span>:<span class=\"built_in\">this</span>.sharedata.desc,</span><br><span class=\"line\">                <span class=\"attr\">content</span>:<span class=\"built_in\">this</span>.sharedata.content,</span><br><span class=\"line\">                <span class=\"function\"><span class=\"title\">success</span>(<span class=\"params\">res</span>)</span>&#123;</span><br><span class=\"line\">                    uni.showToast(&#123;</span><br><span class=\"line\">                        <span class=\"attr\">title</span>:<span class=\"string\">&#x27;分享成功&#x27;</span></span><br><span class=\"line\">                    &#125;)</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                <span class=\"function\"><span class=\"title\">fail</span>(<span class=\"params\">res</span>)</span>&#123;</span><br><span class=\"line\">                    uni.showToast(&#123;</span><br><span class=\"line\">                        <span class=\"attr\">title</span>:<span class=\"string\">&#x27;分享失败&#x27;</span>,</span><br><span class=\"line\">                        <span class=\"attr\">icon</span>:<span class=\"string\">&#x27;none&#x27;</span></span><br><span class=\"line\">                    &#125;)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">       </span><br><span class=\"line\">        <span class=\"comment\">//uniapp微信小程序分享页面到微信朋友圈</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"title\">onShareTimeline</span>(<span class=\"params\">res</span>)</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">                <span class=\"attr\">title</span>:<span class=\"built_in\">this</span>.sharedata.title,</span><br><span class=\"line\">                <span class=\"attr\">query</span>:<span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">                <span class=\"attr\">imageUrl</span>:<span class=\"built_in\">this</span>.sharedata.imageurl,</span><br><span class=\"line\">                <span class=\"function\"><span class=\"title\">success</span>(<span class=\"params\">res</span>)</span>&#123;</span><br><span class=\"line\">                    uni.showToast(&#123;</span><br><span class=\"line\">                        <span class=\"attr\">title</span>:<span class=\"string\">&#x27;分享成功&#x27;</span></span><br><span class=\"line\">                    &#125;)</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                <span class=\"function\"><span class=\"title\">fail</span>(<span class=\"params\">res</span>)</span>&#123;</span><br><span class=\"line\">                    uni.showToast(&#123;</span><br><span class=\"line\">                        <span class=\"attr\">title</span>:<span class=\"string\">&#x27;分享失败&#x27;</span>,</span><br><span class=\"line\">                        <span class=\"attr\">icon</span>:<span class=\"string\">&#x27;none&#x27;</span></span><br><span class=\"line\">                    &#125;)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>2、全局混入。在 main.js 里面 添加全局的 mixin。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> share <span class=\"keyword\">from</span> <span class=\"string\">&#x27;@/components/....你的路径.../share.js&#x27;</span> <span class=\"comment\">//自定义分享功能</span></span><br><span class=\"line\">Vue.mixin(share)</span><br></pre></td></tr></table></figure>\n\n<p>3、使用。在需要的页面中的data中添加(sharedata)。在需要的页面中修改会将默认参数覆盖，即可完成对某个特定的页面进行分享。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">data</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//设置默认的分享参数</span></span><br><span class=\"line\">            <span class=\"attr\">sharedata</span>:&#123;</span><br><span class=\"line\">                <span class=\"attr\">title</span>:<span class=\"string\">&#x27;ALAPI&#x27;</span>,</span><br><span class=\"line\">                <span class=\"attr\">path</span>:<span class=\"string\">&#x27;/pages/my/my&#x27;</span>,</span><br><span class=\"line\">                <span class=\"attr\">imageUrl</span>:<span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">                <span class=\"attr\">desc</span>:<span class=\"string\">&#x27;&#x27;</span>,</span><br><span class=\"line\">                <span class=\"attr\">content</span>:<span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>使用方式二，也是最方便的一种使用方式，在main.js中封装成一个全局函数调用。</p>\n<p>main.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.prototype.pub_show_share = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">zhege, l_listdata, xml1,fx_title,fx_path, fx_imageurl, fx_desc, fx_content,xml8</span>) </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (fx_title)&#123;zhege.sharedata.title = <span class=\"string\">&#x27;&#x27;</span> + fx_title;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (fx_path)&#123;zhege.sharedata.path = <span class=\"string\">&#x27;&#x27;</span> + fx_path;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (fx_imageurl)&#123;zhege.sharedata.imageurl = <span class=\"string\">&#x27;&#x27;</span> + fx_imageurl;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (fx_desc)&#123;zhege.sharedata.desc = <span class=\"string\">&#x27;&#x27;</span> + fx_desc;&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (fx_content)&#123;zhege.sharedata.content = <span class=\"string\">&#x27;&#x27;</span> + fx_content;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在需要特殊分享页面中，放到created中。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"title\">created</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.pub_show_share(<span class=\"built_in\">this</span>, <span class=\"string\">&#x27;&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>,<span class=\"string\">&#x27;我的页面&#x27;</span>,<span class=\"string\">&#x27;/pages/my/my&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>, <span class=\"string\">&#x27;&#x27;</span>,<span class=\"string\">&#x27;&#x27;</span>);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<div class=\"note blue icon-padding flat\"><i class=\"note-icon fas fa-bullhorn\"></i><p>注意：第一个参数一定是 this。</p>\n</div>\n\n<p><img src=\"https://qny.aqingya.cn/img/20211118212156.png\"></p>\n","categories":[{"name":"uni-app开发","path":"api/categories/uni-app开发.json"}],"tags":[{"name":"微信小程序","path":"api/tags/微信小程序.json"},{"name":"uni-app开发","path":"api/tags/uni-app开发.json"}]}