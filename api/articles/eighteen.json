{"title":"js简单实现轮播图","slug":"eighteen","date":"2020-04-27T03:55:11.000Z","updated":"2022-07-29T04:22:04.754Z","comments":true,"path":"api/articles/eighteen.json","excerpt":" [Figure] ","covers":["https://qny.aqingya.cn/img/5ddc1a4438e546e0bd480c83cc37b5c1.jpg"],"content":"<p><img src=\"https://qny.aqingya.cn/img/5ddc1a4438e546e0bd480c83cc37b5c1.jpg\"></p>\n<span id=\"more\"></span>\n\n<br>\nindex.html\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=&quot;en&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class=\"line\">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">    * &#123;</span><br><span class=\"line\">        padding: 0px;</span><br><span class=\"line\">        margin: 0px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    #out &#123;</span><br><span class=\"line\">        width: 520px;</span><br><span class=\"line\">        height: 333px;</span><br><span class=\"line\">        background-color: #bfa;</span><br><span class=\"line\">        margin: 50px auto;</span><br><span class=\"line\">        padding: 10px 0px;</span><br><span class=\"line\">        position: relative;</span><br><span class=\"line\">        overflow: hidden;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    #imglist &#123;</span><br><span class=\"line\">        list-style: none;</span><br><span class=\"line\">        /* width: 2600px; */</span><br><span class=\"line\">        position: absolute;</span><br><span class=\"line\">        left: 0px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    #imglist li &#123;</span><br><span class=\"line\">        float: left;</span><br><span class=\"line\">        margin: 0px 10px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    #navdiv &#123;</span><br><span class=\"line\">        position: absolute;</span><br><span class=\"line\">        bottom: 15px;</span><br><span class=\"line\">        /* left: 200px; */</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    #navdiv a &#123;</span><br><span class=\"line\">        float: left;</span><br><span class=\"line\">        width: 15px;</span><br><span class=\"line\">        height: 15px;</span><br><span class=\"line\">        background-color: red;</span><br><span class=\"line\">        margin: 0 5px;</span><br><span class=\"line\">        opacity: 0.5;</span><br><span class=\"line\">        border-radius: 50%;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    #navdiv a:hover &#123;</span><br><span class=\"line\">        background-color: #686269;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br><span class=\"line\">&lt;script src=&quot;js/tool.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    window.onload = function() &#123;</span><br><span class=\"line\">        var img = document.getElementsByTagName(&quot;img&quot;);</span><br><span class=\"line\">        var imglist = document.getElementById(&quot;imglist&quot;);</span><br><span class=\"line\">        imglist.style.width = 520 * img.length + &quot;px&quot;;</span><br><span class=\"line\">        // 设置导航块居中</span><br><span class=\"line\">        var navdiv = document.getElementById(&quot;navdiv&quot;);</span><br><span class=\"line\">        var out = document.getElementById(&quot;out&quot;);</span><br><span class=\"line\">        navdiv.style.left = (out.offsetWidth - navdiv.offsetWidth) / 2 + &quot;px&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">        var index = 0;</span><br><span class=\"line\">        var arra = document.getElementsByTagName(&quot;a&quot;);</span><br><span class=\"line\">        arra[index].style.backgroundColor = &quot;#686269&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">        // 为每一个超链接添加单机响应事件</span><br><span class=\"line\">        for (var i = 0; i &lt; arra.length; i++) &#123;</span><br><span class=\"line\">            arra[i].num = i;</span><br><span class=\"line\">            arra[i].onclick = function() &#123;</span><br><span class=\"line\">                // 当我们手动去切换的时候，去停止轮播图</span><br><span class=\"line\">                clearInterval(timer);</span><br><span class=\"line\">                // 为每个超链接做标记</span><br><span class=\"line\">                index = this.num;</span><br><span class=\"line\"></span><br><span class=\"line\">                // imglist.style.left = -520 * index + &quot;px&quot;;</span><br><span class=\"line\">                setA();</span><br><span class=\"line\">                move(imglist, &quot;left&quot;, -520 * index, 20, function() &#123;</span><br><span class=\"line\">                    // 手动点击切换结束之后，再次开启定时器。</span><br><span class=\"line\">                    autoChenge();</span><br><span class=\"line\"></span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        autoChenge();</span><br><span class=\"line\"></span><br><span class=\"line\">        function setA() &#123;</span><br><span class=\"line\">            // 判断索引是否是最后一张</span><br><span class=\"line\">            if (index &gt;= arra.length) &#123;</span><br><span class=\"line\">                index = 0;</span><br><span class=\"line\">                //如果为最后一张，直接将imglist的left设置为0，</span><br><span class=\"line\">                imglist.style.left = 0;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            for (var i = 0; i &lt; arra.length; i++) &#123;</span><br><span class=\"line\">                // 设置为空，防止设置颜色之后，在内联样式里优先级过高，</span><br><span class=\"line\">                arra[i].style.backgroundColor = &quot;&quot;;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            arra[index].style.backgroundColor = &quot;#686269&quot;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        // 设置定时器</span><br><span class=\"line\">        // 定义定时器标识</span><br><span class=\"line\">        var timer;</span><br><span class=\"line\"></span><br><span class=\"line\">        function autoChenge() &#123;</span><br><span class=\"line\">            timer = setInterval(function() &#123;</span><br><span class=\"line\">                index++;</span><br><span class=\"line\">                //  %= 算法 判断index的长度是否超过img的长度，如果超过就返回0</span><br><span class=\"line\">                index %= img.length;</span><br><span class=\"line\">                move(imglist, &quot;left&quot;, -520 * index, 20, function() &#123;</span><br><span class=\"line\">                    setA();</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            &#125;, 3000);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;div id=&quot;out&quot;&gt;</span><br><span class=\"line\">        &lt;ul id=&quot;imglist&quot;&gt;</span><br><span class=\"line\">            &lt;li&gt;&lt;img src=&quot;img/1.jpg&quot; alt=&quot;&quot;&gt;&lt;/li&gt;</span><br><span class=\"line\">            &lt;li&gt;&lt;img src=&quot;img/2.jpg&quot; alt=&quot;&quot;&gt;&lt;/li&gt;</span><br><span class=\"line\">            &lt;li&gt;&lt;img src=&quot;img/3.jpg&quot; alt=&quot;&quot;&gt;&lt;/li&gt;</span><br><span class=\"line\">            &lt;li&gt;&lt;img src=&quot;img/4.jpg&quot; alt=&quot;&quot;&gt;&lt;/li&gt;</span><br><span class=\"line\">            &lt;li&gt;&lt;img src=&quot;img/5.jpg&quot; alt=&quot;&quot;&gt;&lt;/li&gt;</span><br><span class=\"line\">            &lt;li&gt;&lt;img src=&quot;img/1.jpg&quot; alt=&quot;&quot;&gt;&lt;/li&gt;</span><br><span class=\"line\">        &lt;/ul&gt;</span><br><span class=\"line\">        &lt;div id=&quot;navdiv&quot;&gt;</span><br><span class=\"line\">            &lt;a href=&quot;javascript:;&quot;&gt;&lt;/a&gt;</span><br><span class=\"line\">            &lt;a href=&quot;javascript:;&quot;&gt;&lt;/a&gt;</span><br><span class=\"line\">            &lt;a href=&quot;javascript:;&quot;&gt;&lt;/a&gt;</span><br><span class=\"line\">            &lt;a href=&quot;javascript:;&quot;&gt;&lt;/a&gt;</span><br><span class=\"line\">            &lt;a href=&quot;javascript:;&quot;&gt;&lt;/a&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>tool.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//实现动画效果</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">move</span>(<span class=\"params\">obj, arrtr, target, speed, callback</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">clearInterval</span>(obj.timer);</span><br><span class=\"line\">    <span class=\"comment\">// 获取当前位置</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> current = <span class=\"built_in\">parseInt</span>(getstyle(obj, arrtr));</span><br><span class=\"line\">    <span class=\"comment\">// 判断speed正负</span></span><br><span class=\"line\">    <span class=\"comment\">// 0-800 向左移</span></span><br><span class=\"line\">    <span class=\"comment\">//800-0 向右移</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (current &gt; target) &#123;</span><br><span class=\"line\">        speed = -speed;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 将timer作为属性 给自身的obj元素。</span></span><br><span class=\"line\">    obj.timer = <span class=\"built_in\">setInterval</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> oldvalue = <span class=\"built_in\">parseInt</span>(getstyle(obj, arrtr));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> newvalue = oldvalue + speed;</span><br><span class=\"line\">        <span class=\"comment\">// 向左移时，需要判断newvalue是否小于target</span></span><br><span class=\"line\">        <span class=\"comment\">// 向右移时，需要判断newvalue是否大于target</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((speed &lt; <span class=\"number\">0</span> &amp;&amp; newvalue &lt; target) || (speed &gt; <span class=\"number\">0</span> &amp;&amp; newvalue &gt; target)) &#123;</span><br><span class=\"line\">            newvalue = target;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        obj.style[arrtr] = newvalue + <span class=\"string\">&quot;px&quot;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (newvalue == target) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">clearInterval</span>(obj.timer);</span><br><span class=\"line\">            <span class=\"comment\">// 如果有回调函数就调用，没有则不调用。</span></span><br><span class=\"line\">            callback &amp;&amp; callback();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;, <span class=\"number\">20</span>);</span><br><span class=\"line\">    <span class=\"comment\">// return false;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 获取元素的样式</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getstyle</span>(<span class=\"params\">obj, name</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.getComputedStyle) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> getComputedStyle(obj, <span class=\"literal\">null</span>)[name];</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> obj.currentStyle[name];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<br>\n愿你的坚持终有收获。\n\n<br>\n<br>\n","more":"<br>\nindex.html\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!DOCTYPE html&gt;</span><br><span class=\"line\">&lt;html lang=&quot;en&quot;&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class=\"line\">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;style&gt;</span><br><span class=\"line\">    * &#123;</span><br><span class=\"line\">        padding: 0px;</span><br><span class=\"line\">        margin: 0px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    #out &#123;</span><br><span class=\"line\">        width: 520px;</span><br><span class=\"line\">        height: 333px;</span><br><span class=\"line\">        background-color: #bfa;</span><br><span class=\"line\">        margin: 50px auto;</span><br><span class=\"line\">        padding: 10px 0px;</span><br><span class=\"line\">        position: relative;</span><br><span class=\"line\">        overflow: hidden;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    #imglist &#123;</span><br><span class=\"line\">        list-style: none;</span><br><span class=\"line\">        /* width: 2600px; */</span><br><span class=\"line\">        position: absolute;</span><br><span class=\"line\">        left: 0px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    #imglist li &#123;</span><br><span class=\"line\">        float: left;</span><br><span class=\"line\">        margin: 0px 10px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    #navdiv &#123;</span><br><span class=\"line\">        position: absolute;</span><br><span class=\"line\">        bottom: 15px;</span><br><span class=\"line\">        /* left: 200px; */</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    #navdiv a &#123;</span><br><span class=\"line\">        float: left;</span><br><span class=\"line\">        width: 15px;</span><br><span class=\"line\">        height: 15px;</span><br><span class=\"line\">        background-color: red;</span><br><span class=\"line\">        margin: 0 5px;</span><br><span class=\"line\">        opacity: 0.5;</span><br><span class=\"line\">        border-radius: 50%;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    #navdiv a:hover &#123;</span><br><span class=\"line\">        background-color: #686269;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;/style&gt;</span><br><span class=\"line\">&lt;script src=&quot;js/tool.js&quot;&gt;&lt;/script&gt;</span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    window.onload = function() &#123;</span><br><span class=\"line\">        var img = document.getElementsByTagName(&quot;img&quot;);</span><br><span class=\"line\">        var imglist = document.getElementById(&quot;imglist&quot;);</span><br><span class=\"line\">        imglist.style.width = 520 * img.length + &quot;px&quot;;</span><br><span class=\"line\">        // 设置导航块居中</span><br><span class=\"line\">        var navdiv = document.getElementById(&quot;navdiv&quot;);</span><br><span class=\"line\">        var out = document.getElementById(&quot;out&quot;);</span><br><span class=\"line\">        navdiv.style.left = (out.offsetWidth - navdiv.offsetWidth) / 2 + &quot;px&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">        var index = 0;</span><br><span class=\"line\">        var arra = document.getElementsByTagName(&quot;a&quot;);</span><br><span class=\"line\">        arra[index].style.backgroundColor = &quot;#686269&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">        // 为每一个超链接添加单机响应事件</span><br><span class=\"line\">        for (var i = 0; i &lt; arra.length; i++) &#123;</span><br><span class=\"line\">            arra[i].num = i;</span><br><span class=\"line\">            arra[i].onclick = function() &#123;</span><br><span class=\"line\">                // 当我们手动去切换的时候，去停止轮播图</span><br><span class=\"line\">                clearInterval(timer);</span><br><span class=\"line\">                // 为每个超链接做标记</span><br><span class=\"line\">                index = this.num;</span><br><span class=\"line\"></span><br><span class=\"line\">                // imglist.style.left = -520 * index + &quot;px&quot;;</span><br><span class=\"line\">                setA();</span><br><span class=\"line\">                move(imglist, &quot;left&quot;, -520 * index, 20, function() &#123;</span><br><span class=\"line\">                    // 手动点击切换结束之后，再次开启定时器。</span><br><span class=\"line\">                    autoChenge();</span><br><span class=\"line\"></span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        autoChenge();</span><br><span class=\"line\"></span><br><span class=\"line\">        function setA() &#123;</span><br><span class=\"line\">            // 判断索引是否是最后一张</span><br><span class=\"line\">            if (index &gt;= arra.length) &#123;</span><br><span class=\"line\">                index = 0;</span><br><span class=\"line\">                //如果为最后一张，直接将imglist的left设置为0，</span><br><span class=\"line\">                imglist.style.left = 0;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            for (var i = 0; i &lt; arra.length; i++) &#123;</span><br><span class=\"line\">                // 设置为空，防止设置颜色之后，在内联样式里优先级过高，</span><br><span class=\"line\">                arra[i].style.backgroundColor = &quot;&quot;;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            arra[index].style.backgroundColor = &quot;#686269&quot;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        // 设置定时器</span><br><span class=\"line\">        // 定义定时器标识</span><br><span class=\"line\">        var timer;</span><br><span class=\"line\"></span><br><span class=\"line\">        function autoChenge() &#123;</span><br><span class=\"line\">            timer = setInterval(function() &#123;</span><br><span class=\"line\">                index++;</span><br><span class=\"line\">                //  %= 算法 判断index的长度是否超过img的长度，如果超过就返回0</span><br><span class=\"line\">                index %= img.length;</span><br><span class=\"line\">                move(imglist, &quot;left&quot;, -520 * index, 20, function() &#123;</span><br><span class=\"line\">                    setA();</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">            &#125;, 3000);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;div id=&quot;out&quot;&gt;</span><br><span class=\"line\">        &lt;ul id=&quot;imglist&quot;&gt;</span><br><span class=\"line\">            &lt;li&gt;&lt;img src=&quot;img/1.jpg&quot; alt=&quot;&quot;&gt;&lt;/li&gt;</span><br><span class=\"line\">            &lt;li&gt;&lt;img src=&quot;img/2.jpg&quot; alt=&quot;&quot;&gt;&lt;/li&gt;</span><br><span class=\"line\">            &lt;li&gt;&lt;img src=&quot;img/3.jpg&quot; alt=&quot;&quot;&gt;&lt;/li&gt;</span><br><span class=\"line\">            &lt;li&gt;&lt;img src=&quot;img/4.jpg&quot; alt=&quot;&quot;&gt;&lt;/li&gt;</span><br><span class=\"line\">            &lt;li&gt;&lt;img src=&quot;img/5.jpg&quot; alt=&quot;&quot;&gt;&lt;/li&gt;</span><br><span class=\"line\">            &lt;li&gt;&lt;img src=&quot;img/1.jpg&quot; alt=&quot;&quot;&gt;&lt;/li&gt;</span><br><span class=\"line\">        &lt;/ul&gt;</span><br><span class=\"line\">        &lt;div id=&quot;navdiv&quot;&gt;</span><br><span class=\"line\">            &lt;a href=&quot;javascript:;&quot;&gt;&lt;/a&gt;</span><br><span class=\"line\">            &lt;a href=&quot;javascript:;&quot;&gt;&lt;/a&gt;</span><br><span class=\"line\">            &lt;a href=&quot;javascript:;&quot;&gt;&lt;/a&gt;</span><br><span class=\"line\">            &lt;a href=&quot;javascript:;&quot;&gt;&lt;/a&gt;</span><br><span class=\"line\">            &lt;a href=&quot;javascript:;&quot;&gt;&lt;/a&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n\n<p>tool.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//实现动画效果</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">move</span>(<span class=\"params\">obj, arrtr, target, speed, callback</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">clearInterval</span>(obj.timer);</span><br><span class=\"line\">    <span class=\"comment\">// 获取当前位置</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> current = <span class=\"built_in\">parseInt</span>(getstyle(obj, arrtr));</span><br><span class=\"line\">    <span class=\"comment\">// 判断speed正负</span></span><br><span class=\"line\">    <span class=\"comment\">// 0-800 向左移</span></span><br><span class=\"line\">    <span class=\"comment\">//800-0 向右移</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (current &gt; target) &#123;</span><br><span class=\"line\">        speed = -speed;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 将timer作为属性 给自身的obj元素。</span></span><br><span class=\"line\">    obj.timer = <span class=\"built_in\">setInterval</span>(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> oldvalue = <span class=\"built_in\">parseInt</span>(getstyle(obj, arrtr));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> newvalue = oldvalue + speed;</span><br><span class=\"line\">        <span class=\"comment\">// 向左移时，需要判断newvalue是否小于target</span></span><br><span class=\"line\">        <span class=\"comment\">// 向右移时，需要判断newvalue是否大于target</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((speed &lt; <span class=\"number\">0</span> &amp;&amp; newvalue &lt; target) || (speed &gt; <span class=\"number\">0</span> &amp;&amp; newvalue &gt; target)) &#123;</span><br><span class=\"line\">            newvalue = target;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        obj.style[arrtr] = newvalue + <span class=\"string\">&quot;px&quot;</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (newvalue == target) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">clearInterval</span>(obj.timer);</span><br><span class=\"line\">            <span class=\"comment\">// 如果有回调函数就调用，没有则不调用。</span></span><br><span class=\"line\">            callback &amp;&amp; callback();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;, <span class=\"number\">20</span>);</span><br><span class=\"line\">    <span class=\"comment\">// return false;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 获取元素的样式</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getstyle</span>(<span class=\"params\">obj, name</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.getComputedStyle) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> getComputedStyle(obj, <span class=\"literal\">null</span>)[name];</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> obj.currentStyle[name];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<br>\n愿你的坚持终有收获。\n\n<br>\n<br>","categories":[{"name":"JavaScript","path":"api/categories/JavaScript.json"}],"tags":[{"name":"JavaScript","path":"api/tags/JavaScript.json"}]}