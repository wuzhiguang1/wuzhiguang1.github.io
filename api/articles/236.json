{"title":"JS金额验证，保留两位小数，超出两位输入无效（VUE + ElementUI）","slug":"236","date":"2022-10-09T03:39:09.000Z","updated":"2022-10-09T03:44:22.580Z","comments":true,"path":"api/articles/236.json","excerpt":null,"covers":null,"content":"<h2 id=\"JS金额验证，保留两位小数，超出两位输入无效（VUE-ElementUI）\"><a href=\"#JS金额验证，保留两位小数，超出两位输入无效（VUE-ElementUI）\" class=\"headerlink\" title=\"JS金额验证，保留两位小数，超出两位输入无效（VUE + ElementUI）\"></a>JS金额验证，保留两位小数，超出两位输入无效（VUE + <a href=\"https://so.csdn.net/so/search?q=ElementUI&spm=1001.2101.3001.7020\">ElementUI</a>）</h2><ul>\n<li>需求<ul>\n<li>输入框内输入金额</li>\n<li>金额不能为中文、特殊字符</li>\n<li>最大金额没有限制，最小金额大于0</li>\n<li>保留两位小数</li>\n<li>超出两位小数无法继续输入</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">el-input</span> <span class=\"attr\">v-model</span>=<span class=\"string\">&quot;price&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;请输入价格&quot;</span> @<span class=\"attr\">input</span>=<span class=\"string\">&quot;check&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-input</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">  <span class=\"function\"><span class=\"title\">data</span>(<span class=\"params\"></span>)</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">    <span class=\"keyword\">return</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"attr\">price</span>: <span class=\"string\">&#x27;&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">    &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">  &#125;,</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">  <span class=\"attr\">methods</span>: &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">    check () &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"comment\">// 正则限制输入的金额不能为中文、特殊字符、两位小数</span></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"keyword\">let</span> reg = <span class=\"regexp\">/(^[1-9]([0-9]+)?(\\.[0-9]&#123;1,2&#125;)?$)|(^[0-9]\\.[0-9]([0-9])?$)/</span>;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"comment\">// 输入金额不能为空</span></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.price === <span class=\"string\">&#x27;&#x27;</span>)&#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;请输入价格&#x27;</span>)</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"comment\">// 如果不符合正则，提示</span></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"keyword\">if</span> (!reg.test(+<span class=\"built_in\">this</span>.price)) &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;支付金额格式错误，请重新输入&#x27;</span>)</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"comment\">// 保留两位小数</span></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"keyword\">let</span> price = <span class=\"built_in\">this</span>.price</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"keyword\">let</span> pArr = price.split(<span class=\"string\">&#x27;.&#x27;</span>) <span class=\"comment\">//得到的是数组,pArr[0]为整数部分,pArr[1]为小数部分</span></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"keyword\">if</span>(pArr.length &gt; <span class=\"number\">1</span>) &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">          <span class=\"built_in\">this</span>.price = pArr[<span class=\"number\">0</span>] + <span class=\"string\">&quot;.&quot;</span> + pArr[<span class=\"number\">1</span>].substr(<span class=\"number\">0</span>, <span class=\"number\">2</span>);</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"comment\">// 最后得到的值为string类型，如果需要字符型可以使用Number(price)转换</span></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">    &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">  &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<p>注意：</p>\n<p>保留两位小数的时候，最开始使用到的是toFixed(2)，但是这种实现方式导致了一些问题<br>toFixed()是有四舍五入的，所以我继续输入5以上的数字，金额会一分一分的继续加，例如：当前我输入了1.43，我再输入9，金额会变为1.44<br>切记！！最后得到的是字符类型，如果需要数值型，一定要手动转一下！！</p>\n","more":"<h2 id=\"JS金额验证，保留两位小数，超出两位输入无效（VUE-ElementUI）\"><a href=\"#JS金额验证，保留两位小数，超出两位输入无效（VUE-ElementUI）\" class=\"headerlink\" title=\"JS金额验证，保留两位小数，超出两位输入无效（VUE + ElementUI）\"></a>JS金额验证，保留两位小数，超出两位输入无效（VUE + <a href=\"https://so.csdn.net/so/search?q=ElementUI&spm=1001.2101.3001.7020\">ElementUI</a>）</h2><ul>\n<li>需求<ul>\n<li>输入框内输入金额</li>\n<li>金额不能为中文、特殊字符</li>\n<li>最大金额没有限制，最小金额大于0</li>\n<li>保留两位小数</li>\n<li>超出两位小数无法继续输入</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">el-input</span> <span class=\"attr\">v-model</span>=<span class=\"string\">&quot;price&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;请输入价格&quot;</span> @<span class=\"attr\">input</span>=<span class=\"string\">&quot;check&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">el-input</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">  <span class=\"function\"><span class=\"title\">data</span>(<span class=\"params\"></span>)</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">    <span class=\"keyword\">return</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"attr\">price</span>: <span class=\"string\">&#x27;&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">    &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">  &#125;,</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">  <span class=\"attr\">methods</span>: &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">    check () &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"comment\">// 正则限制输入的金额不能为中文、特殊字符、两位小数</span></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"keyword\">let</span> reg = <span class=\"regexp\">/(^[1-9]([0-9]+)?(\\.[0-9]&#123;1,2&#125;)?$)|(^[0-9]\\.[0-9]([0-9])?$)/</span>;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"comment\">// 输入金额不能为空</span></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.price === <span class=\"string\">&#x27;&#x27;</span>)&#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;请输入价格&#x27;</span>)</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"comment\">// 如果不符合正则，提示</span></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"keyword\">if</span> (!reg.test(+<span class=\"built_in\">this</span>.price)) &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;支付金额格式错误，请重新输入&#x27;</span>)</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"comment\">// 保留两位小数</span></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"keyword\">let</span> price = <span class=\"built_in\">this</span>.price</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"keyword\">let</span> pArr = price.split(<span class=\"string\">&#x27;.&#x27;</span>) <span class=\"comment\">//得到的是数组,pArr[0]为整数部分,pArr[1]为小数部分</span></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"keyword\">if</span>(pArr.length &gt; <span class=\"number\">1</span>) &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">          <span class=\"built_in\">this</span>.price = pArr[<span class=\"number\">0</span>] + <span class=\"string\">&quot;.&quot;</span> + pArr[<span class=\"number\">1</span>].substr(<span class=\"number\">0</span>, <span class=\"number\">2</span>);</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">      <span class=\"comment\">// 最后得到的值为string类型，如果需要字符型可以使用Number(price)转换</span></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">    &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">  &#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<p>注意：</p>\n<p>保留两位小数的时候，最开始使用到的是toFixed(2)，但是这种实现方式导致了一些问题<br>toFixed()是有四舍五入的，所以我继续输入5以上的数字，金额会一分一分的继续加，例如：当前我输入了1.43，我再输入9，金额会变为1.44<br>切记！！最后得到的是字符类型，如果需要数值型，一定要手动转一下！！</p>\n","categories":[{"name":"Vue","path":"api/categories/Vue.json"}],"tags":[{"name":"JavaScript","path":"api/tags/JavaScript.json"},{"name":"Vue","path":"api/tags/Vue.json"},{"name":"正则表达式","path":"api/tags/正则表达式.json"}]}