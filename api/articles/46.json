{"title":"纯js之代码雨特效","slug":"46","date":"2020-06-29T09:15:47.000Z","updated":"2022-07-29T04:22:04.779Z","comments":true,"path":"api/articles/46.json","excerpt":" [Figure] ","covers":["https://qny.aqingya.cn/img/172bb36aadfb373f.png","https://img-blog.csdnimg.cn/20200629171930444.gif"],"content":"<p><img src=\"https://qny.aqingya.cn/img/172bb36aadfb373f.png\"></p>\n<span id=\"more\"></span>\n\n<h1 id=\"纯js之代码雨特效-laughing\"><a href=\"#纯js之代码雨特效-laughing\" class=\"headerlink\" title=\"纯js之代码雨特效:laughing:\"></a>纯js之代码雨特效:laughing:</h1><hr>\n<h5 id=\"html代码：\"><a href=\"#html代码：\" class=\"headerlink\" title=\"html代码：\"></a>html代码：</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;code_rain_canvas&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;1440&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;900&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h5 id=\"js-代码：\"><a href=\"#js-代码：\" class=\"headerlink\" title=\"js 代码：\"></a>js 代码：</h5><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">         <span class=\"comment\">//获取画布对象</span></span><br><span class=\"line\">         <span class=\"keyword\">var</span> canvas = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;code_rain_canvas&quot;</span>);</span><br><span class=\"line\">         <span class=\"comment\">//获取画布的上下文</span></span><br><span class=\"line\">         <span class=\"keyword\">var</span> context = canvas.getContext(<span class=\"string\">&quot;2d&quot;</span>);</span><br><span class=\"line\">         <span class=\"keyword\">var</span> s = <span class=\"built_in\">window</span>.screen;</span><br><span class=\"line\">         <span class=\"keyword\">var</span> W = canvas.width = s.width;</span><br><span class=\"line\">         <span class=\"keyword\">var</span> H = canvas.height;</span><br><span class=\"line\">         <span class=\"comment\">//获取浏览器屏幕的宽度和高度</span></span><br><span class=\"line\">         <span class=\"comment\">//var W = window.innerWidth;</span></span><br><span class=\"line\">         <span class=\"comment\">//var H = window.innerHeight;</span></span><br><span class=\"line\">         <span class=\"comment\">//设置canvas的宽度和高度</span></span><br><span class=\"line\">         canvas.width = W;</span><br><span class=\"line\">         canvas.height = H;</span><br><span class=\"line\">         <span class=\"comment\">//每个文字的字体大小</span></span><br><span class=\"line\">         <span class=\"keyword\">var</span> fontSize = <span class=\"number\">12</span>;</span><br><span class=\"line\">         <span class=\"comment\">//计算列</span></span><br><span class=\"line\">         <span class=\"keyword\">var</span> colunms = <span class=\"built_in\">Math</span>.floor(W / fontSize);</span><br><span class=\"line\">         <span class=\"comment\">//记录每列文字的y轴坐标</span></span><br><span class=\"line\">         <span class=\"keyword\">var</span> drops = [];</span><br><span class=\"line\">         <span class=\"comment\">//给每一个文字初始化一个起始点的位置</span></span><br><span class=\"line\">         <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; colunms; i++) &#123;</span><br><span class=\"line\">             drops.push(<span class=\"number\">0</span>);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         <span class=\"comment\">//运动的文字</span></span><br><span class=\"line\">         <span class=\"keyword\">var</span> str = <span class=\"string\">&quot;WELCOME TO WWW.ITRHX.COM&quot;</span>;</span><br><span class=\"line\">         <span class=\"comment\">//4:fillText(str,x,y);原理就是去更改y的坐标位置</span></span><br><span class=\"line\">         <span class=\"comment\">//绘画的函数</span></span><br><span class=\"line\">         <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">draw</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">             context.fillStyle = <span class=\"string\">&quot;rgba(238,238,238,.08)&quot;</span>; <span class=\"comment\">//遮盖层</span></span><br><span class=\"line\">             context.fillRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, W, H);</span><br><span class=\"line\">             <span class=\"comment\">//给字体设置样式</span></span><br><span class=\"line\">             context.font = <span class=\"string\">&quot;600 &quot;</span> + fontSize + <span class=\"string\">&quot;px  Georgia&quot;</span>;</span><br><span class=\"line\">             <span class=\"comment\">//给字体添加颜色</span></span><br><span class=\"line\">             context.fillStyle = [<span class=\"string\">&quot;#33B5E5&quot;</span>, <span class=\"string\">&quot;#0099CC&quot;</span>, <span class=\"string\">&quot;#AA66CC&quot;</span>, <span class=\"string\">&quot;#9933CC&quot;</span>, <span class=\"string\">&quot;#99CC00&quot;</span>, <span class=\"string\">&quot;#669900&quot;</span>, <span class=\"string\">&quot;#FFBB33&quot;</span>, <span class=\"string\">&quot;#FF8800&quot;</span>, <span class=\"string\">&quot;#FF4444&quot;</span>, <span class=\"string\">&quot;#CC0000&quot;</span>][<span class=\"built_in\">parseInt</span>(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">10</span>)]; <span class=\"comment\">//randColor();可以rgb,hsl, 标准色，十六进制颜色</span></span><br><span class=\"line\">             <span class=\"comment\">//写入画布中</span></span><br><span class=\"line\">             <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; colunms; i++) &#123;</span><br><span class=\"line\">                 <span class=\"keyword\">var</span> index = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * str.length);</span><br><span class=\"line\">                 <span class=\"keyword\">var</span> x = i * fontSize;</span><br><span class=\"line\">                 <span class=\"keyword\">var</span> y = drops[i] * fontSize;</span><br><span class=\"line\">                 context.fillText(str[index], x, y);</span><br><span class=\"line\">                 <span class=\"comment\">//如果要改变时间，肯定就是改变每次他的起点</span></span><br><span class=\"line\">                 <span class=\"keyword\">if</span> (y &gt;= canvas.height &amp;&amp; <span class=\"built_in\">Math</span>.random() &gt; <span class=\"number\">0.99</span>) &#123;</span><br><span class=\"line\">                     drops[i] = <span class=\"number\">0</span>;</span><br><span class=\"line\">                 &#125;</span><br><span class=\"line\">                 drops[i]++;</span><br><span class=\"line\">             &#125;</span><br><span class=\"line\">         &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">         <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">randColor</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">//随机颜色</span></span><br><span class=\"line\">             <span class=\"keyword\">var</span> r = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">256</span>);</span><br><span class=\"line\">             <span class=\"keyword\">var</span> g = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">256</span>);</span><br><span class=\"line\">             <span class=\"keyword\">var</span> b = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">256</span>);</span><br><span class=\"line\">             <span class=\"keyword\">return</span> <span class=\"string\">&quot;rgb(&quot;</span> + r + <span class=\"string\">&quot;,&quot;</span> + g + <span class=\"string\">&quot;,&quot;</span> + b + <span class=\"string\">&quot;)&quot;</span>;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         draw();</span><br><span class=\"line\">         <span class=\"built_in\">setInterval</span>(draw, <span class=\"number\">35</span>);</span><br><span class=\"line\">     &#125;;</span><br></pre></td></tr></table></figure>\n\n\n\n<h5 id=\"展示效果：\"><a href=\"#展示效果：\" class=\"headerlink\" title=\"展示效果：\"></a>展示效果：</h5><p><img src=\"https://img-blog.csdnimg.cn/20200629171930444.gif\" alt=\"在这里插入图片描述\"></p>\n<p><br><br></p>\n<p>愿你的坚持终有收获</p>\n<p><br><br></p>\n","more":"<h1 id=\"纯js之代码雨特效-laughing\"><a href=\"#纯js之代码雨特效-laughing\" class=\"headerlink\" title=\"纯js之代码雨特效:laughing:\"></a>纯js之代码雨特效:laughing:</h1><hr>\n<h5 id=\"html代码：\"><a href=\"#html代码：\" class=\"headerlink\" title=\"html代码：\"></a>html代码：</h5><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;code_rain_canvas&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;1440&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;900&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h5 id=\"js-代码：\"><a href=\"#js-代码：\" class=\"headerlink\" title=\"js 代码：\"></a>js 代码：</h5><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">         <span class=\"comment\">//获取画布对象</span></span><br><span class=\"line\">         <span class=\"keyword\">var</span> canvas = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;code_rain_canvas&quot;</span>);</span><br><span class=\"line\">         <span class=\"comment\">//获取画布的上下文</span></span><br><span class=\"line\">         <span class=\"keyword\">var</span> context = canvas.getContext(<span class=\"string\">&quot;2d&quot;</span>);</span><br><span class=\"line\">         <span class=\"keyword\">var</span> s = <span class=\"built_in\">window</span>.screen;</span><br><span class=\"line\">         <span class=\"keyword\">var</span> W = canvas.width = s.width;</span><br><span class=\"line\">         <span class=\"keyword\">var</span> H = canvas.height;</span><br><span class=\"line\">         <span class=\"comment\">//获取浏览器屏幕的宽度和高度</span></span><br><span class=\"line\">         <span class=\"comment\">//var W = window.innerWidth;</span></span><br><span class=\"line\">         <span class=\"comment\">//var H = window.innerHeight;</span></span><br><span class=\"line\">         <span class=\"comment\">//设置canvas的宽度和高度</span></span><br><span class=\"line\">         canvas.width = W;</span><br><span class=\"line\">         canvas.height = H;</span><br><span class=\"line\">         <span class=\"comment\">//每个文字的字体大小</span></span><br><span class=\"line\">         <span class=\"keyword\">var</span> fontSize = <span class=\"number\">12</span>;</span><br><span class=\"line\">         <span class=\"comment\">//计算列</span></span><br><span class=\"line\">         <span class=\"keyword\">var</span> colunms = <span class=\"built_in\">Math</span>.floor(W / fontSize);</span><br><span class=\"line\">         <span class=\"comment\">//记录每列文字的y轴坐标</span></span><br><span class=\"line\">         <span class=\"keyword\">var</span> drops = [];</span><br><span class=\"line\">         <span class=\"comment\">//给每一个文字初始化一个起始点的位置</span></span><br><span class=\"line\">         <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; colunms; i++) &#123;</span><br><span class=\"line\">             drops.push(<span class=\"number\">0</span>);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         <span class=\"comment\">//运动的文字</span></span><br><span class=\"line\">         <span class=\"keyword\">var</span> str = <span class=\"string\">&quot;WELCOME TO WWW.ITRHX.COM&quot;</span>;</span><br><span class=\"line\">         <span class=\"comment\">//4:fillText(str,x,y);原理就是去更改y的坐标位置</span></span><br><span class=\"line\">         <span class=\"comment\">//绘画的函数</span></span><br><span class=\"line\">         <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">draw</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">             context.fillStyle = <span class=\"string\">&quot;rgba(238,238,238,.08)&quot;</span>; <span class=\"comment\">//遮盖层</span></span><br><span class=\"line\">             context.fillRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, W, H);</span><br><span class=\"line\">             <span class=\"comment\">//给字体设置样式</span></span><br><span class=\"line\">             context.font = <span class=\"string\">&quot;600 &quot;</span> + fontSize + <span class=\"string\">&quot;px  Georgia&quot;</span>;</span><br><span class=\"line\">             <span class=\"comment\">//给字体添加颜色</span></span><br><span class=\"line\">             context.fillStyle = [<span class=\"string\">&quot;#33B5E5&quot;</span>, <span class=\"string\">&quot;#0099CC&quot;</span>, <span class=\"string\">&quot;#AA66CC&quot;</span>, <span class=\"string\">&quot;#9933CC&quot;</span>, <span class=\"string\">&quot;#99CC00&quot;</span>, <span class=\"string\">&quot;#669900&quot;</span>, <span class=\"string\">&quot;#FFBB33&quot;</span>, <span class=\"string\">&quot;#FF8800&quot;</span>, <span class=\"string\">&quot;#FF4444&quot;</span>, <span class=\"string\">&quot;#CC0000&quot;</span>][<span class=\"built_in\">parseInt</span>(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">10</span>)]; <span class=\"comment\">//randColor();可以rgb,hsl, 标准色，十六进制颜色</span></span><br><span class=\"line\">             <span class=\"comment\">//写入画布中</span></span><br><span class=\"line\">             <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; colunms; i++) &#123;</span><br><span class=\"line\">                 <span class=\"keyword\">var</span> index = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * str.length);</span><br><span class=\"line\">                 <span class=\"keyword\">var</span> x = i * fontSize;</span><br><span class=\"line\">                 <span class=\"keyword\">var</span> y = drops[i] * fontSize;</span><br><span class=\"line\">                 context.fillText(str[index], x, y);</span><br><span class=\"line\">                 <span class=\"comment\">//如果要改变时间，肯定就是改变每次他的起点</span></span><br><span class=\"line\">                 <span class=\"keyword\">if</span> (y &gt;= canvas.height &amp;&amp; <span class=\"built_in\">Math</span>.random() &gt; <span class=\"number\">0.99</span>) &#123;</span><br><span class=\"line\">                     drops[i] = <span class=\"number\">0</span>;</span><br><span class=\"line\">                 &#125;</span><br><span class=\"line\">                 drops[i]++;</span><br><span class=\"line\">             &#125;</span><br><span class=\"line\">         &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">         <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">randColor</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">//随机颜色</span></span><br><span class=\"line\">             <span class=\"keyword\">var</span> r = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">256</span>);</span><br><span class=\"line\">             <span class=\"keyword\">var</span> g = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">256</span>);</span><br><span class=\"line\">             <span class=\"keyword\">var</span> b = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">256</span>);</span><br><span class=\"line\">             <span class=\"keyword\">return</span> <span class=\"string\">&quot;rgb(&quot;</span> + r + <span class=\"string\">&quot;,&quot;</span> + g + <span class=\"string\">&quot;,&quot;</span> + b + <span class=\"string\">&quot;)&quot;</span>;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">         draw();</span><br><span class=\"line\">         <span class=\"built_in\">setInterval</span>(draw, <span class=\"number\">35</span>);</span><br><span class=\"line\">     &#125;;</span><br></pre></td></tr></table></figure>\n\n\n\n<h5 id=\"展示效果：\"><a href=\"#展示效果：\" class=\"headerlink\" title=\"展示效果：\"></a>展示效果：</h5><p><img src=\"https://img-blog.csdnimg.cn/20200629171930444.gif\" alt=\"在这里插入图片描述\"></p>\n<p><br><br></p>\n<p>愿你的坚持终有收获</p>\n<p><br><br></p>","categories":[{"name":"庖丁解牛","path":"api/categories/庖丁解牛.json"}],"tags":[{"name":"JavaScript","path":"api/tags/JavaScript.json"}]}