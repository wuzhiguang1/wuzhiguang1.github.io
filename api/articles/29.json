{"title":"JavaScript ---表单脚本总结","slug":"29","date":"2020-05-31T08:01:43.000Z","updated":"2022-07-29T04:22:04.783Z","comments":true,"path":"api/articles/29.json","excerpt":" [Figure] ","covers":["https://qny.aqingya.cn/img/98f2abdf50c04d17b17748185207c048.png","https://img-blog.csdnimg.cn/20200531132456844.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3d6ZzA4MTc=,size_16,color_FFFFFF,t_70"],"content":"<p><img src=\"https://qny.aqingya.cn/img/98f2abdf50c04d17b17748185207c048.png\"></p>\n<span id=\"more\"></span>\n\n<h1 id=\"表单基础知识\"><a href=\"#表单基础知识\" class=\"headerlink\" title=\"表单基础知识\"></a>表单基础知识</h1><p>在JavaScript中，表单对应的是HTMLFormElement 类型，它继承了HTMLElement 。</p>\n<ul>\n<li>acceptCharset:服务器能够处理的字符集;等价于HTML中的accept -charset特性。</li>\n<li>action:接受请求的URL;等价于HTML中的action特性。</li>\n<li>elements:表单中所有控件的集合( HTMLCollection )。</li>\n<li>enctype:请求的编码类型;等价于HTML中的enctype特性。</li>\n<li>length:表单中控件的数量。</li>\n<li>method:要发送的HTTP请求类型，通常是”get”或”post”;等价于HTML的method特性。</li>\n<li>name :表单的名称;等价于HTML的name特性。</li>\n<li>reset () :将所有表单域重置为默认值。</li>\n<li>submit () :提交表单。</li>\n<li>target:用于发送请求和接收响应的窗口名称;等价于HTML的target特性。</li>\n</ul>\n<p>document.forms 可以获取页面中的所有表单，返回一个集合，在这个集合中可以通过数值索引或者name值来获取特定的表单。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> firstForm = <span class=\"built_in\">document</span>.forms[<span class=\"number\">0</span>]; <span class=\"comment\">//取得页面中的第一个表单</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> myForm = <span class=\"built_in\">document</span>.forms[<span class=\"string\">&quot;form2&quot;</span>]; <span class=\"comment\">//取得页面中为&quot;form2&quot;的表单</span></span><br></pre></td></tr></table></figure>\n\n\n<br>\n<br>\n\n<h2 id=\"1、提交表单\"><a href=\"#1、提交表单\" class=\"headerlink\" title=\"1、提交表单\"></a>1、提交表单</h2><p>用户点击按钮或者图像时</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   </span><br><span class=\"line\">&lt;input type=<span class=\"string\">&quot;submit&quot;</span> value=<span class=\"string\">&quot;Submit Form&quot;</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span>&gt;</span>Submit Form<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;image&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;graphic.gif&quot;</span>&gt;</span>  //图像也可以作为提交按钮</span></span><br><span class=\"line\"><span class=\"xml\"></span></span><br></pre></td></tr></table></figure>\n\n<p>在JavaScript中，可以用submit() 方法也可以提交表单。<strong>注意：在调用submit() 方法提交表单的时候，不会触发submit 事件。</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> form = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;myForm&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// 提交表单</span></span><br><span class=\"line\">form.submit();</span><br></pre></td></tr></table></figure>\n\n<p>阻止提交按钮：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> form = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;myForm&quot;</span>);</span><br><span class=\"line\">EventUtil.addHandler(form, <span class=\"string\">&quot;submit&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\tevent = EventUtil.getEvent(event);</span><br><span class=\"line\">\tEventUtil.preventDefault(event);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<h2 id=\"2、重置表单\"><a href=\"#2、重置表单\" class=\"headerlink\" title=\"2、重置表单\"></a>2、重置表单</h2><p>重置按钮：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&lt;input type=<span class=\"string\">&quot;reset&quot;</span> value=<span class=\"string\">&quot;Reset Form&quot;</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;reset&quot;</span>&gt;</span>Reset Form<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>在JavaScript中，可以用 reset() 方法也可以重置表单。<strong>注意：在调用 reset() 方法提交表单的时候，会一样触发 reset 事件。</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> form = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;myForm&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// 重置表单</span></span><br><span class=\"line\">form.reset();</span><br></pre></td></tr></table></figure>\n\n<p>阻止重置按钮：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> form = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;myForm&quot;</span>);</span><br><span class=\"line\">EventUtil.addHandler(form, <span class=\"string\">&quot;reset&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\tevent = EventUtil.getEvent(event);</span><br><span class=\"line\">\tEventUtil.preventDefault(event);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<br>\n\n<h2 id=\"3、表单字段\"><a href=\"#3、表单字段\" class=\"headerlink\" title=\"3、表单字段\"></a>3、表单字段</h2><p>每个表单都有一个element 属，它是表单中所有表单元素的集合。是一个有序列表。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> form = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;form1&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">//取得表单中的的一个字段</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> field1 = form.elements[<span class=\"number\">0</span>];</span><br><span class=\"line\"><span class=\"comment\">//取得表单中为&quot;textbox1&quot;的字段</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> field2 = form.elements[<span class=\"string\">&quot;textbox1&quot;</span>];</span><br><span class=\"line\"><span class=\"comment\">//取得表单中包含字段的数量</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> fieldCount = form.elements.length;</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<p><strong>1、共有的表单字段属性</strong></p>\n<ul>\n<li>disabled:布尔值，表示当前字段是否被禁用。</li>\n<li>form:指向当前字段所属表单的指针;只读。</li>\n<li>name :当前字段的名称。</li>\n<li>readonly:布尔值，表示当前字段是否只读。</li>\n<li>tabIndex:表示当前字段的切换( tab)序号。</li>\n<li>type:当前字段的类型，如” checkbox”、”radio”,等等。</li>\n<li>value:当前字段将被提交给服务器的值。对文件字段来说，这个属性是只读的，包含着文件<br>在计算机中的路径。</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> form = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;myForm&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> field = form.elements[<span class=\"number\">0</span>];</span><br><span class=\"line\"><span class=\"comment\">//修改value 属性</span></span><br><span class=\"line\">field.value = <span class=\"string\">&quot;Another value&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">//检查 form 属性的值</span></span><br><span class=\"line\">alert(field.form === form); <span class=\"comment\">//true</span></span><br><span class=\"line\"><span class=\"comment\">//把焦点设置当前字段</span></span><br><span class=\"line\">field.focus();</span><br><span class=\"line\"><span class=\"comment\">//禁用当前字段</span></span><br><span class=\"line\">field.disabled = <span class=\"literal\">true</span>;</span><br><span class=\"line\"><span class=\"comment\">//修改 type 属性（不推荐，但对&lt;input&gt;是可行的）</span></span><br><span class=\"line\">field.type = <span class=\"string\">&quot;checkbox&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<p>防止多次点击提交按钮</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EventUtil.addHandler(form, <span class=\"string\">&quot;submit&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>)</span>&#123;</span><br><span class=\"line\">event = EventUtil.getEvent(event);</span><br><span class=\"line\"><span class=\"keyword\">var</span> target = EventUtil.getTarget(event);</span><br><span class=\"line\"><span class=\"comment\">//取得提交按钮</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> btn = target.elements[<span class=\"string\">&quot;submit-btn&quot;</span>];</span><br><span class=\"line\"><span class=\"comment\">//禁用它</span></span><br><span class=\"line\">btn.disabled = <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>除了&lt;fieldset&gt;之外 ，所有表单都有 type 属性。但是&lt;input&gt;和&lt;button&gt;元素的 type 属性是可以动态修改的，而&lt;select&gt;元素的 type 属性则是只读的。<br><img src=\"https://img-blog.csdnimg.cn/20200531132456844.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3d6ZzA4MTc=,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<br>\n\n<p><strong>2、focus() 和 blur()</strong> </p>\n<p>focus() 方法用于将浏览器的焦点设置到表单字段上。<br>blur() 方法把焦点移走。</p>\n<p>HTML5中新增一个 autofocus 属性。自动吧焦点设置到相应的字段。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input type=<span class=\"string\">&quot;text&quot;</span> autofocus&gt;</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<p><strong>3、共有的字段事件</strong></p>\n<p>除了支持鼠标、键盘、更改和HTML事件之外，所有表单字段都支持下列3个事件。</p>\n<ul>\n<li>blur:当前字段失去焦点时触发。</li>\n<li>change:对于&lt;input&gt;和&lt;textarea&gt;元素，在它们失去焦点且value值改变时触发;对于&lt;select&gt;元素，在其选项改变时触发。</li>\n<li>focus:当前字段获得焦点时触发。</li>\n</ul>\n<br>\n<br>\n\n<h1 id=\"文本框脚本\"><a href=\"#文本框脚本\" class=\"headerlink\" title=\"文本框脚本\"></a>文本框脚本</h1><p>&lt;input&gt; 单行文本框</p>\n<ul>\n<li>size特性：指定文本框中能够显示的字符数。</li>\n<li>value特性：设置文本框的初值。</li>\n<li>maxlength 特性：指定文本框可以接受的最大字符数。</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input type=<span class=\"string\">&quot;text&quot;</span> size=<span class=\"string\">&quot;25&quot;</span> maxlength=<span class=\"string\">&quot;50&quot;</span> value=<span class=\"string\">&quot;aqingya&quot;</span>&gt;</span><br></pre></td></tr></table></figure>\n<br>\n\n<p>&lt;textarea&gt; 多行文本框</p>\n<ul>\n<li>rows：指定文本框中的字符行数</li>\n<li>cols：指定文本框中的字符列数</li>\n</ul>\n<br>\n<br>\n\n<h2 id=\"1、选择文本\"><a href=\"#1、选择文本\" class=\"headerlink\" title=\"1、选择文本\"></a>1、选择文本</h2><p>select() 方法：用于选择文本框中的所有文本。&lt;inpout&gt;和&lt;textarea&gt;都支持 。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EventUtil.addHandler(textbox, <span class=\"string\">&quot;focus&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    event = EventUtil.getEvent(event);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> target = EventUtil.getTarget(event);</span><br><span class=\"line\">    target.select();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<br>\n\n<p><strong>1、选择（select）事件</strong></p>\n<p>选择文本框中的文本就会触发该事件。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> textbox = <span class=\"built_in\">document</span>.forms[<span class=\"number\">0</span>].elements[<span class=\"string\">&quot;textbox1&quot;</span>];</span><br><span class=\"line\">EventUtil.addHandler(textbox, <span class=\"string\">&quot;select&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>)</span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">var</span> alert(<span class=\"string\">&quot;Text selected&quot;</span> + textbox.value);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n\n<p>2、取得选择的文本</p>\n<p>通过select 事件我们知道用户什么时候选择了文本，但是不知道选择了什么样的文本。<br>两个属性：selectionStart 和selectionEnd 表示选择文本的范围（文本的开头和结尾）</p>\n<p>兼容IE8及更早的版本中有一个document. selection对象。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSelectedText</span>(<span class=\"params\">textbox</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> textbox.selectionStart == <span class=\"string\">&quot;number&quot;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> textbox.value.substring(textbox.selectionStart,textbox.selectionEnd);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.selection) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">document</span>.selection.createRange().text;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<p><strong>3、选择部分文本</strong></p>\n<p>setSelectionRange() 方法，这个方法接收两个参数:要选择的第一个字符的索引和要 选择的最后一个字符之后的字符的索引(类似于substring()方法的两个参数)。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">textbox.value = <span class=\"string\">&quot;Hello world!&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//选择所有字符</span></span><br><span class=\"line\">textbox.setSelectionRange(<span class=\"number\">0</span>, textbox.value.length); <span class=\"comment\">//&quot;Hello world!&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//选择前 3 个字符</span></span><br><span class=\"line\">textbox.setSelectionRange(<span class=\"number\">0</span>, <span class=\"number\">3</span>); <span class=\"comment\">//&quot;Hel&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//选择第4到第6个字符</span></span><br><span class=\"line\">textbox.setSelectionRange(<span class=\"number\">4</span>, <span class=\"number\">7</span>); <span class=\"comment\">//&quot;o w&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>兼容IE8<br>createTextRange() 方法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">textbox.value = <span class=\"string\">&quot;Hello world!&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> range = textbox.createTextRange();</span><br><span class=\"line\"><span class=\"comment\">//选择所有字符</span></span><br><span class=\"line\">range.collapse(<span class=\"literal\">true</span>);</span><br><span class=\"line\">range.moveStart(<span class=\"string\">&quot;character&quot;</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">range.moveEnd(<span class=\"string\">&quot;character&quot;</span>, textbox.value.length); <span class=\"comment\">//&quot;Hello world!&quot;</span></span><br><span class=\"line\">range.select();</span><br><span class=\"line\"><span class=\"comment\">//选择前 3 个字符</span></span><br><span class=\"line\">range.collapse(<span class=\"literal\">true</span>);</span><br><span class=\"line\">range.moveStart(<span class=\"string\">&quot;character&quot;</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">range.moveEnd(<span class=\"string\">&quot;character&quot;</span>, <span class=\"number\">3</span>);</span><br><span class=\"line\">range.select(); <span class=\"comment\">//&quot;Hel&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//选择第4到第6个字符</span></span><br><span class=\"line\">range.collapse(<span class=\"literal\">true</span>);</span><br><span class=\"line\">range.moveStart(<span class=\"string\">&quot;character&quot;</span>, <span class=\"number\">4</span>);</span><br><span class=\"line\">range.moveEnd(<span class=\"string\">&quot;character&quot;</span>, <span class=\"number\">3</span>);</span><br><span class=\"line\">range.select(); <span class=\"comment\">//&quot;o w&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>跨浏览器方法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">selectText</span>(<span class=\"params\">textbox, startIndex, stopIndex</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (textbox.setSelectionRange) &#123;</span><br><span class=\"line\">        textbox.setSelectionRange(startIndex, stopIndex);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (textbox.createTextRange) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> range = textbox.createTextRange();</span><br><span class=\"line\">        range.collapse(<span class=\"literal\">true</span>);</span><br><span class=\"line\">        range.moveStart(<span class=\"string\">&quot;character&quot;</span>, startIndex);</span><br><span class=\"line\">        range.moveEnd(<span class=\"string\">&quot;character&quot;</span>, stopIndex - startIndex);</span><br><span class=\"line\">        range.select();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    textbox.focus();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">textbox.value = <span class=\"string\">&quot;Hello world!&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//选择所有字符</span></span><br><span class=\"line\">selectText(textbox, <span class=\"number\">0</span>, textbox.value.length); <span class=\"comment\">//&quot;Hello world!&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//选择前 3 个字符</span></span><br><span class=\"line\">selectText(textbox, <span class=\"number\">0</span>, <span class=\"number\">3</span>); <span class=\"comment\">//&quot;Hel&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//选择第4到第6个字符</span></span><br><span class=\"line\">selectText(textbox, <span class=\"number\">4</span>, <span class=\"number\">7</span>); <span class=\"comment\">//&quot;o w&quot;</span></span><br></pre></td></tr></table></figure>\n<br>\n<br>\n\n<h2 id=\"2、过滤输入\"><a href=\"#2、过滤输入\" class=\"headerlink\" title=\"2、过滤输入\"></a>2、过滤输入</h2><p><strong>1、屏蔽字符</strong></p>\n<p>响应文本输入框中插入字符操作的是keypress 事件。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EventUtil.addHandler(textbox, <span class=\"string\">&quot;keypress&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    event = EventUtil.getEvent(event);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> target = EventUtil.getTarget(event);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> charCode = EventUtil.getCharCode(event);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"regexp\">/\\d/</span>.test(<span class=\"built_in\">String</span>.fromCharCode(charCode)) &amp;&amp; charCode &gt; <span class=\"number\">9</span> &amp;&amp;</span><br><span class=\"line\">        !event.ctrlKey) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//屏蔽不符合的按键</span></span><br><span class=\"line\">        EventUtil.preventDefault(event);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<p><strong>2、操作剪切板</strong></p>\n<p>剪切板事件</p>\n<ul>\n<li>beforecopy:在发生复制操作前触发。</li>\n<li>copy :在发生复制操作时触发。</li>\n<li>beforecut:在发生剪切操作前触发。</li>\n<li>cut :在发生剪切操作时触发。</li>\n<li>be forepaste:在发生粘贴操作前触发。</li>\n<li>paste:在发生粘贴操作时触发。</li>\n</ul>\n<p>向EventUtil中添加方法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//获取粘贴板内容</span></span><br><span class=\"line\"><span class=\"attr\">getClipboardText</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 兼容浏览器 ，在IE中clipboardData是window对象。</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> clipboardData = (event.clipboardData || <span class=\"built_in\">window</span>.clipboardData);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> clipboardData.getData(<span class=\"string\">&quot;text&quot;</span>);</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//设置粘贴板内容</span></span><br><span class=\"line\"><span class=\"attr\">setClipboardText</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event, value</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (event.clipboardData) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> event.clipboardData.setData(<span class=\"string\">&quot;text/plain&quot;</span>, value);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.clipboardData) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">window</span>.clipboardData.setData(<span class=\"string\">&quot;text&quot;</span>, value);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p>在需要确保粘贴到文本框中的文本中包含某些字符，或者符合某种格式要求时，能够访问剪贴板是非常有用的。例如，如果一个文本框只接受数值，那么就必须检测粘贴过来的值，以确保有效。在paste事件中，可以确定剪贴板中的值是否有效，如果无效，就可以像下面示例中那样，取消默认的行为。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EventUtil.addHandler(textbox, <span class=\"string\">&quot;paste&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    event = EventUtil.getEvent(event);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> text = EventUtil.getClipboardText(event);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"regexp\">/^\\d*$/</span>.test(text)) &#123;</span><br><span class=\"line\">        EventUtil.preventDefault(event);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<p><strong>到目前EventUtil 如下：</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> EventUtil = &#123;</span><br><span class=\"line\">            <span class=\"attr\">addHandler</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">element, type, handler</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (element.addEventListener) &#123;</span><br><span class=\"line\">                    element.addEventListener(type, handler, <span class=\"literal\">false</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (element.attachEvent) &#123;</span><br><span class=\"line\">                    element.attachEvent(<span class=\"string\">&quot;on&quot;</span> + type, handler);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    element[<span class=\"string\">&quot;on&quot;</span> + type] = handler;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 解决浏览器兼容性问题</span></span><br><span class=\"line\">            <span class=\"attr\">getEvent</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> event ? event : <span class=\"built_in\">window</span>.event;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 返回事件目标</span></span><br><span class=\"line\">            <span class=\"attr\">getTarget</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> event.target || event.srcElement;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//取消事件的默认行为。</span></span><br><span class=\"line\">            <span class=\"attr\">preventDefault</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (event.preventDefault) &#123;</span><br><span class=\"line\">                    event.preventDefault();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    event.returnValue = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 移除事件处理程序</span></span><br><span class=\"line\">            <span class=\"attr\">removeHandler</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">element, type, handler</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (element.removeEventListener) &#123;</span><br><span class=\"line\">                    element.removeEventListener(type, handler, <span class=\"literal\">false</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (element.detachEvent) &#123;</span><br><span class=\"line\">                    element.detachEvent(<span class=\"string\">&quot;on&quot;</span> + type, handler);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    element[<span class=\"string\">&quot;on&quot;</span> + type] = <span class=\"literal\">null</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//提供相关元素的信息，relatedTarget这个属性只对与mouseover和mouseout事件才包含值。</span></span><br><span class=\"line\">            <span class=\"attr\">getRelatedTarget</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (event.relatedTarget) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> event.relatedTarget;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (event.toElement) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> event.toElement;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (event.fromElement) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> event.fromElement;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//获取鼠标按钮</span></span><br><span class=\"line\">            <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">             *  0: 表示没有按下按钮。</span></span><br><span class=\"line\"><span class=\"comment\">                1: 表示按下了主鼠标按钮。</span></span><br><span class=\"line\"><span class=\"comment\">                2: 表示按下了次鼠标按钮。</span></span><br><span class=\"line\"><span class=\"comment\">                3: 表示同时按下了主、次鼠标按钮</span></span><br><span class=\"line\"><span class=\"comment\">                4: 表示按下了中间的鼠标按钮。</span></span><br><span class=\"line\"><span class=\"comment\">                5: 表示同时按下了主鼠标按钮和中间的鼠标按钮。</span></span><br><span class=\"line\"><span class=\"comment\">                6: 表示同时按下了次鼠标按钮和中间的鼠标按钮。</span></span><br><span class=\"line\"><span class=\"comment\">                7: 表示同时按下了三个鼠标按钮。*/</span></span><br><span class=\"line\">            <span class=\"attr\">getButton</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.implementation.hasFeature(<span class=\"string\">&quot;MouseEvents&quot;</span>, <span class=\"string\">&quot;2.0&quot;</span>)) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> event.button;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">switch</span> (event.button) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">case</span> <span class=\"number\">0</span>:</span><br><span class=\"line\">                        <span class=\"keyword\">case</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">                        <span class=\"keyword\">case</span> <span class=\"number\">3</span>:</span><br><span class=\"line\">                        <span class=\"keyword\">case</span> <span class=\"number\">5</span>:</span><br><span class=\"line\">                        <span class=\"keyword\">case</span> <span class=\"number\">7</span>:</span><br><span class=\"line\">                            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">                        <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">                        <span class=\"keyword\">case</span> <span class=\"number\">6</span>:</span><br><span class=\"line\">                            <span class=\"keyword\">return</span> <span class=\"number\">2</span>;</span><br><span class=\"line\">                        <span class=\"keyword\">case</span> <span class=\"number\">4</span>:</span><br><span class=\"line\">                            <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//获得鼠标滚轮的增量值delta</span></span><br><span class=\"line\">            <span class=\"attr\">getWheelDelta</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (event.wheelDelta) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> (client.engine.opera &amp;&amp; client.engine.opera &lt; <span class=\"number\">9.5</span> ?</span><br><span class=\"line\">                        -event.wheelDelta : event.wheelDelta);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> -event.detail * <span class=\"number\">40</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//获取字符串编码  主要用于文本框 监听事件是keypress</span></span><br><span class=\"line\">            <span class=\"attr\">getCharCode</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> event.charCode == <span class=\"string\">&quot;number&quot;</span>) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> event.charCode;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> event.keyCode;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//获取粘贴板内容</span></span><br><span class=\"line\">            <span class=\"attr\">getClipboardText</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"comment\">// 兼容浏览器 ，在IE中clipboardData是window对象。</span></span><br><span class=\"line\">                <span class=\"keyword\">var</span> clipboardData = (event.clipboardData || <span class=\"built_in\">window</span>.clipboardData);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> clipboardData.getData(<span class=\"string\">&quot;text&quot;</span>);</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//设置粘贴板内容</span></span><br><span class=\"line\">            <span class=\"attr\">setClipboardText</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event, value</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (event.clipboardData) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> event.clipboardData.setData(<span class=\"string\">&quot;text/plain&quot;</span>, value);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.clipboardData) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> <span class=\"built_in\">window</span>.clipboardData.setData(<span class=\"string\">&quot;text&quot;</span>, value);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//取消进一步的事件捕获或者冒泡</span></span><br><span class=\"line\">            <span class=\"attr\">stopPropagation</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (event.stopPropagation) &#123;</span><br><span class=\"line\">                    event.stopPropagation();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    event.cancelBubble = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;;</span><br></pre></td></tr></table></figure>\n\n\n<br>\n\n<h2 id=\"4、HTML5-约束验证API\"><a href=\"#4、HTML5-约束验证API\" class=\"headerlink\" title=\"4、HTML5 约束验证API\"></a>4、HTML5 约束验证API</h2><p><strong>1、必填字段</strong></p>\n<p>required 属性：带有required 属性的字段必须填。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&quot;username&quot;</span> required&gt;</span><br></pre></td></tr></table></figure>\n<br>\n\n<p><strong>2、其他输入类型</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input type=<span class=\"string\">&quot;email&quot;</span> name =<span class=\"string\">&quot;email&quot;</span>&gt;</span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;url&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;homepage&quot;</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<br>\n\n<p><strong>3、数值范围</strong></p>\n<p>比如想让用户只能输入 0 到 100 的值，而且还是5的倍数。·</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input type=<span class=\"string\">&quot;number&quot;</span> min=<span class=\"string\">&quot;0&quot;</span> max=<span class=\"string\">&quot;100&quot;</span> step=<span class=\"string\">&quot;5&quot;</span> name=<span class=\"string\">&quot;count&quot;</span>&gt;</span><br></pre></td></tr></table></figure>\n<br>\n\n<p>4、输入模式</p>\n<p>pattern 属性：这个属性的值的一个正则表达式。用于匹配文本框中的值。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input type=<span class=\"string\">&quot;text&quot;</span> pattern=<span class=\"string\">&quot;\\d+&quot;</span> name=<span class=\"string\">&quot;count&quot;</span>&gt;</span><br></pre></td></tr></table></figure>\n<br>\n\n<p><strong>5、检测有效性</strong></p>\n<p>checkValidity() 方法可以检查表单中的某个字段是否有效。所有的表单字段都有这个方法。</p>\n<p><strong>话句话说：必填字段中如果没有值就是无效的，而字段中的值与pattern属性不匹配也是无效的。</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.forms[<span class=\"number\">0</span>].elements[<span class=\"number\">0</span>].checkValidity())&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//字符有效，继续</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">//字符无效</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>要检测整个表单是否有效，可以在表单自身调用checkValidity()方法。如果所有表单字段都有效，这个方法返回true;即使有一一个字段无效，这个方法也会返回false。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span>(<span class=\"built_in\">document</span>.forms[<span class=\"number\">0</span>].checkValidity())&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//表单有效，继续</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">//表单无效</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<p><strong>6、禁用验证</strong></p>\n<p>novalidate 属性：设置它，表单就不需要进行验证。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;form method=<span class=\"string\">&quot;post&quot;</span> action=<span class=\"string\">&quot; &quot;</span> novalidate&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/form&gt;</span><br></pre></td></tr></table></figure>\n<p>formnovalidate 属性：某一个按钮不需要验证。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input type=<span class=\"string\">&quot;submit&quot;</span>  name=<span class=\"string\">&quot;阿清&quot;</span> value=<span class=\"string\">&quot;aqing&quot;</span> formnovalidate&gt;</span><br></pre></td></tr></table></figure>\n<br>\n<br>\n\n\n<h1 id=\"选择框脚本\"><a href=\"#选择框脚本\" class=\"headerlink\" title=\"选择框脚本\"></a>选择框脚本</h1><p>选择框是通过&lt;select&gt;和&lt;option&gt;元素创建的。为了方便与这个控件交互，除了所有表单字段共有的属性和方法外，HTMLSelectElement 类型还提供了下列属性和方法。</p>\n<ul>\n<li>add (newoption, relOption): 向控件中插人新&lt;option&gt;元素，其位置在相关项( relOption)之前。</li>\n<li>multiple:布尔值，表示是否允许多项选择;等价于HTML中的multiple特性。</li>\n<li>options:控件中所有&lt;option&gt;元素的HTMLCollection。</li>\n<li>remove ( index) :移除给定位置的选项。</li>\n<li>selectedIndex:基于0的选中项的索引，如果没有选中项，则值为-1。对于支持多选的控件,只保存选中项中第一项的索引。</li>\n<li>size:选择框中可见的行数;等价于HTML中的size特性。</li>\n</ul>\n<br>\n\n<p>选择框的type属性不是”select-one”,就是”select- multiple”,这取决于HTML代码中有没有multiple特性。选择框的value属性由当前选中项决定，相应规则如下。</p>\n<ul>\n<li>如果没有选中的项，则选择框的value属性保存空字符串。</li>\n<li>如果有一个选中项，而且该项的value特性已经在HTML中指定，则选择框的value属性等于选中项的value特性。即使value特性的值是空字符串，也同样遵循此条规则。</li>\n<li>如果有一个选中项，但该项的value特性在HTML中未指定，则选择框的value属性等于该项的文本。</li>\n<li>如果有多个选中项，则选择框的value属性将依据前两条规则取得第一个选中项的值。</li>\n</ul>\n<p>举个栗子：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;select name=<span class=\"string\">&quot;location&quot;</span> id=<span class=\"string\">&quot;selLocation&quot;</span>&gt;</span><br><span class=\"line\">\t<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Sunnyvale, CA&quot;</span>&gt;</span>Sunnyvale<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span><br><span class=\"line\">\t<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Los Angeles, CA&quot;</span>&gt;</span>Los Angeles<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span><br><span class=\"line\">\t<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Mountain View, CA&quot;</span>&gt;</span>Mountain View<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span><br><span class=\"line\">\t<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span>China<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span><br><span class=\"line\">\t<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">option</span>&gt;</span>Australia<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span><br><span class=\"line\">&lt;/select&gt;</span><br></pre></td></tr></table></figure>\n<p>如果用户选择了其中第一项，则选择框的值就是” Sunnyvale, CA”。 如果文本为”China “的选项被选中，则选择框的值就是-一个空字符串，因为其value特性是空的。如果选择了最后一项，那么由于&lt;option&gt;中没有指定value特性，则选择框的值就是” Australia”。</p>\n<br>\n\n<p>在DOM中，每个&lt;option&gt;元素都有一个HTMLOptionElement 对象表示。为便于访问数据，HTMLOptionElement对象添加了下列属性:<strong>（这些属性的目的都是为了方便选项的访问）</strong></p>\n<ul>\n<li>index:当前选项在options集合中的索引。</li>\n<li>label:当前选项的标签;等价于HTML中的label特性。</li>\n<li>selected:布尔值，表示当前选项是否被选中。将这个属性设置为true可以选中当前选项。</li>\n<li>text:选项的文本。</li>\n<li>value:选项的值(等价于HTML中的value特性)。</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> selectbox = <span class=\"built_in\">document</span>.forms[<span class=\"number\">0</span>]. elements[<span class=\"string\">&quot;location&quot;</span>];</span><br><span class=\"line\"><span class=\"comment\">// 推荐</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> text = selectbox.options[<span class=\"number\">0</span>].text; <span class=\"comment\">// 选项中的文本</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> value = selectbox.options[<span class=\"number\">0</span>].value; <span class=\"comment\">//选项的值\t</span></span><br></pre></td></tr></table></figure>\n\n<br>\n\n<h2 id=\"1、添加选项\"><a href=\"#1、添加选项\" class=\"headerlink\" title=\"1、添加选项\"></a>1、添加选项</h2><p>有两种方法<br>1、使用DOM方法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> newOption = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&quot;option&quot;</span>);</span><br><span class=\"line\">newOption.appendChild(<span class=\"built_in\">document</span>.createTextNode(<span class=\"string\">&quot;Option text&quot;</span>));</span><br><span class=\"line\">newOption.setAttribute(<span class=\"string\">&quot;value&quot;</span>, <span class=\"string\">&quot;Option value&quot;</span>);</span><br><span class=\"line\">selectbox.appendChild(newOption);</span><br></pre></td></tr></table></figure>\n<p>2、添加新选项的方式是使用选择框的add()方法。DOM规定这个方法接受两个参数:要添加的新选项和将位于新选项之后的选项。如果想在列表的最后添加一个选项，应该将第二个参数设置为null。在IE中第二个参数设置为undefined。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> newOption = <span class=\"keyword\">new</span> Option(<span class=\"string\">&quot;Option text&quot;</span>, <span class=\"string\">&quot;Option value&quot;</span>);</span><br><span class=\"line\">selectbox.add(newOption, <span class=\"literal\">undefined</span>); <span class=\"comment\">//最佳方案</span></span><br></pre></td></tr></table></figure>\n<p><strong>推荐使用第二种</strong></p>\n<br>\n\n<h2 id=\"2、移除选项\"><a href=\"#2、移除选项\" class=\"headerlink\" title=\"2、移除选项\"></a>2、移除选项</h2><p>1、使用DOM方法中的removeChild() 方法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">selectbox.removeChild(selectbox.options[<span class=\"number\">0</span>]); <span class=\"comment\">//移除第一个选项</span></span><br></pre></td></tr></table></figure>\n<p>2、使用选项框中的remove() 方法<br> 一个参数：移除选项的索引</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">selectbox.remove(<span class=\"number\">0</span>);  <span class=\"comment\">//移除第一个选项</span></span><br></pre></td></tr></table></figure>\n\n<p>3、就是将相应选项设置为null。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">selectbox.options[<span class=\"number\">0</span>] = <span class=\"literal\">null</span>; <span class=\"comment\">//移除第一个选项</span></span><br></pre></td></tr></table></figure>\n\n<br>\n\n<h2 id=\"3、移动和重排选项\"><a href=\"#3、移动和重排选项\" class=\"headerlink\" title=\"3、移动和重排选项\"></a>3、移动和重排选项</h2><p>移动：使用DOM中的appendChild() 方法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> selectbox1 = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;selLocations1&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> selectbox2 = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;selLocations2&quot;</span>);</span><br><span class=\"line\">selectbox2.appendChild(selectbox1.options[<span class=\"number\">0</span>]);</span><br></pre></td></tr></table></figure>\n<p><span style=\"color:red\">移动选项与移除选项有一个共同之处，即会重置每-一个选项的index属性。</span></p>\n<br>\n\n<p>重排：使用DOM方法 insertBefore() 方法。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> optionToMove = selectbox.options[<span class=\"number\">1</span>];</span><br><span class=\"line\">selectbox.insertBefore(optionToMove, selectbox.options[optionToMove.index-<span class=\"number\">1</span>]);</span><br></pre></td></tr></table></figure>\n\n<hr>\n<br>\n<br>\n愿你的坚持终有收获。\n<br>\n<br>\n\n\n\n","more":"<h1 id=\"表单基础知识\"><a href=\"#表单基础知识\" class=\"headerlink\" title=\"表单基础知识\"></a>表单基础知识</h1><p>在JavaScript中，表单对应的是HTMLFormElement 类型，它继承了HTMLElement 。</p>\n<ul>\n<li>acceptCharset:服务器能够处理的字符集;等价于HTML中的accept -charset特性。</li>\n<li>action:接受请求的URL;等价于HTML中的action特性。</li>\n<li>elements:表单中所有控件的集合( HTMLCollection )。</li>\n<li>enctype:请求的编码类型;等价于HTML中的enctype特性。</li>\n<li>length:表单中控件的数量。</li>\n<li>method:要发送的HTTP请求类型，通常是”get”或”post”;等价于HTML的method特性。</li>\n<li>name :表单的名称;等价于HTML的name特性。</li>\n<li>reset () :将所有表单域重置为默认值。</li>\n<li>submit () :提交表单。</li>\n<li>target:用于发送请求和接收响应的窗口名称;等价于HTML的target特性。</li>\n</ul>\n<p>document.forms 可以获取页面中的所有表单，返回一个集合，在这个集合中可以通过数值索引或者name值来获取特定的表单。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> firstForm = <span class=\"built_in\">document</span>.forms[<span class=\"number\">0</span>]; <span class=\"comment\">//取得页面中的第一个表单</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> myForm = <span class=\"built_in\">document</span>.forms[<span class=\"string\">&quot;form2&quot;</span>]; <span class=\"comment\">//取得页面中为&quot;form2&quot;的表单</span></span><br></pre></td></tr></table></figure>\n\n\n<br>\n<br>\n\n<h2 id=\"1、提交表单\"><a href=\"#1、提交表单\" class=\"headerlink\" title=\"1、提交表单\"></a>1、提交表单</h2><p>用户点击按钮或者图像时</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   </span><br><span class=\"line\">&lt;input type=<span class=\"string\">&quot;submit&quot;</span> value=<span class=\"string\">&quot;Submit Form&quot;</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span>&gt;</span>Submit Form<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;image&quot;</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;graphic.gif&quot;</span>&gt;</span>  //图像也可以作为提交按钮</span></span><br><span class=\"line\"><span class=\"xml\"></span></span><br></pre></td></tr></table></figure>\n\n<p>在JavaScript中，可以用submit() 方法也可以提交表单。<strong>注意：在调用submit() 方法提交表单的时候，不会触发submit 事件。</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> form = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;myForm&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// 提交表单</span></span><br><span class=\"line\">form.submit();</span><br></pre></td></tr></table></figure>\n\n<p>阻止提交按钮：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> form = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;myForm&quot;</span>);</span><br><span class=\"line\">EventUtil.addHandler(form, <span class=\"string\">&quot;submit&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\tevent = EventUtil.getEvent(event);</span><br><span class=\"line\">\tEventUtil.preventDefault(event);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<h2 id=\"2、重置表单\"><a href=\"#2、重置表单\" class=\"headerlink\" title=\"2、重置表单\"></a>2、重置表单</h2><p>重置按钮：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">&lt;input type=<span class=\"string\">&quot;reset&quot;</span> value=<span class=\"string\">&quot;Reset Form&quot;</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;reset&quot;</span>&gt;</span>Reset Form<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>在JavaScript中，可以用 reset() 方法也可以重置表单。<strong>注意：在调用 reset() 方法提交表单的时候，会一样触发 reset 事件。</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> form = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;myForm&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// 重置表单</span></span><br><span class=\"line\">form.reset();</span><br></pre></td></tr></table></figure>\n\n<p>阻止重置按钮：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> form = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;myForm&quot;</span>);</span><br><span class=\"line\">EventUtil.addHandler(form, <span class=\"string\">&quot;reset&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>)</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\tevent = EventUtil.getEvent(event);</span><br><span class=\"line\">\tEventUtil.preventDefault(event);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<br>\n\n<h2 id=\"3、表单字段\"><a href=\"#3、表单字段\" class=\"headerlink\" title=\"3、表单字段\"></a>3、表单字段</h2><p>每个表单都有一个element 属，它是表单中所有表单元素的集合。是一个有序列表。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> form = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;form1&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">//取得表单中的的一个字段</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> field1 = form.elements[<span class=\"number\">0</span>];</span><br><span class=\"line\"><span class=\"comment\">//取得表单中为&quot;textbox1&quot;的字段</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> field2 = form.elements[<span class=\"string\">&quot;textbox1&quot;</span>];</span><br><span class=\"line\"><span class=\"comment\">//取得表单中包含字段的数量</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> fieldCount = form.elements.length;</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<p><strong>1、共有的表单字段属性</strong></p>\n<ul>\n<li>disabled:布尔值，表示当前字段是否被禁用。</li>\n<li>form:指向当前字段所属表单的指针;只读。</li>\n<li>name :当前字段的名称。</li>\n<li>readonly:布尔值，表示当前字段是否只读。</li>\n<li>tabIndex:表示当前字段的切换( tab)序号。</li>\n<li>type:当前字段的类型，如” checkbox”、”radio”,等等。</li>\n<li>value:当前字段将被提交给服务器的值。对文件字段来说，这个属性是只读的，包含着文件<br>在计算机中的路径。</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> form = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;myForm&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> field = form.elements[<span class=\"number\">0</span>];</span><br><span class=\"line\"><span class=\"comment\">//修改value 属性</span></span><br><span class=\"line\">field.value = <span class=\"string\">&quot;Another value&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">//检查 form 属性的值</span></span><br><span class=\"line\">alert(field.form === form); <span class=\"comment\">//true</span></span><br><span class=\"line\"><span class=\"comment\">//把焦点设置当前字段</span></span><br><span class=\"line\">field.focus();</span><br><span class=\"line\"><span class=\"comment\">//禁用当前字段</span></span><br><span class=\"line\">field.disabled = <span class=\"literal\">true</span>;</span><br><span class=\"line\"><span class=\"comment\">//修改 type 属性（不推荐，但对&lt;input&gt;是可行的）</span></span><br><span class=\"line\">field.type = <span class=\"string\">&quot;checkbox&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<p>防止多次点击提交按钮</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EventUtil.addHandler(form, <span class=\"string\">&quot;submit&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>)</span>&#123;</span><br><span class=\"line\">event = EventUtil.getEvent(event);</span><br><span class=\"line\"><span class=\"keyword\">var</span> target = EventUtil.getTarget(event);</span><br><span class=\"line\"><span class=\"comment\">//取得提交按钮</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> btn = target.elements[<span class=\"string\">&quot;submit-btn&quot;</span>];</span><br><span class=\"line\"><span class=\"comment\">//禁用它</span></span><br><span class=\"line\">btn.disabled = <span class=\"literal\">true</span>;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>除了&lt;fieldset&gt;之外 ，所有表单都有 type 属性。但是&lt;input&gt;和&lt;button&gt;元素的 type 属性是可以动态修改的，而&lt;select&gt;元素的 type 属性则是只读的。<br><img src=\"https://img-blog.csdnimg.cn/20200531132456844.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3d6ZzA4MTc=,size_16,color_FFFFFF,t_70\" alt=\"在这里插入图片描述\"></p>\n<br>\n\n<p><strong>2、focus() 和 blur()</strong> </p>\n<p>focus() 方法用于将浏览器的焦点设置到表单字段上。<br>blur() 方法把焦点移走。</p>\n<p>HTML5中新增一个 autofocus 属性。自动吧焦点设置到相应的字段。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input type=<span class=\"string\">&quot;text&quot;</span> autofocus&gt;</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<p><strong>3、共有的字段事件</strong></p>\n<p>除了支持鼠标、键盘、更改和HTML事件之外，所有表单字段都支持下列3个事件。</p>\n<ul>\n<li>blur:当前字段失去焦点时触发。</li>\n<li>change:对于&lt;input&gt;和&lt;textarea&gt;元素，在它们失去焦点且value值改变时触发;对于&lt;select&gt;元素，在其选项改变时触发。</li>\n<li>focus:当前字段获得焦点时触发。</li>\n</ul>\n<br>\n<br>\n\n<h1 id=\"文本框脚本\"><a href=\"#文本框脚本\" class=\"headerlink\" title=\"文本框脚本\"></a>文本框脚本</h1><p>&lt;input&gt; 单行文本框</p>\n<ul>\n<li>size特性：指定文本框中能够显示的字符数。</li>\n<li>value特性：设置文本框的初值。</li>\n<li>maxlength 特性：指定文本框可以接受的最大字符数。</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input type=<span class=\"string\">&quot;text&quot;</span> size=<span class=\"string\">&quot;25&quot;</span> maxlength=<span class=\"string\">&quot;50&quot;</span> value=<span class=\"string\">&quot;aqingya&quot;</span>&gt;</span><br></pre></td></tr></table></figure>\n<br>\n\n<p>&lt;textarea&gt; 多行文本框</p>\n<ul>\n<li>rows：指定文本框中的字符行数</li>\n<li>cols：指定文本框中的字符列数</li>\n</ul>\n<br>\n<br>\n\n<h2 id=\"1、选择文本\"><a href=\"#1、选择文本\" class=\"headerlink\" title=\"1、选择文本\"></a>1、选择文本</h2><p>select() 方法：用于选择文本框中的所有文本。&lt;inpout&gt;和&lt;textarea&gt;都支持 。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EventUtil.addHandler(textbox, <span class=\"string\">&quot;focus&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    event = EventUtil.getEvent(event);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> target = EventUtil.getTarget(event);</span><br><span class=\"line\">    target.select();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<br>\n\n<p><strong>1、选择（select）事件</strong></p>\n<p>选择文本框中的文本就会触发该事件。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> textbox = <span class=\"built_in\">document</span>.forms[<span class=\"number\">0</span>].elements[<span class=\"string\">&quot;textbox1&quot;</span>];</span><br><span class=\"line\">EventUtil.addHandler(textbox, <span class=\"string\">&quot;select&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>)</span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">var</span> alert(<span class=\"string\">&quot;Text selected&quot;</span> + textbox.value);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n\n<p>2、取得选择的文本</p>\n<p>通过select 事件我们知道用户什么时候选择了文本，但是不知道选择了什么样的文本。<br>两个属性：selectionStart 和selectionEnd 表示选择文本的范围（文本的开头和结尾）</p>\n<p>兼容IE8及更早的版本中有一个document. selection对象。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSelectedText</span>(<span class=\"params\">textbox</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> textbox.selectionStart == <span class=\"string\">&quot;number&quot;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> textbox.value.substring(textbox.selectionStart,textbox.selectionEnd);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.selection) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">document</span>.selection.createRange().text;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<p><strong>3、选择部分文本</strong></p>\n<p>setSelectionRange() 方法，这个方法接收两个参数:要选择的第一个字符的索引和要 选择的最后一个字符之后的字符的索引(类似于substring()方法的两个参数)。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">textbox.value = <span class=\"string\">&quot;Hello world!&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//选择所有字符</span></span><br><span class=\"line\">textbox.setSelectionRange(<span class=\"number\">0</span>, textbox.value.length); <span class=\"comment\">//&quot;Hello world!&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//选择前 3 个字符</span></span><br><span class=\"line\">textbox.setSelectionRange(<span class=\"number\">0</span>, <span class=\"number\">3</span>); <span class=\"comment\">//&quot;Hel&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//选择第4到第6个字符</span></span><br><span class=\"line\">textbox.setSelectionRange(<span class=\"number\">4</span>, <span class=\"number\">7</span>); <span class=\"comment\">//&quot;o w&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>兼容IE8<br>createTextRange() 方法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">textbox.value = <span class=\"string\">&quot;Hello world!&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> range = textbox.createTextRange();</span><br><span class=\"line\"><span class=\"comment\">//选择所有字符</span></span><br><span class=\"line\">range.collapse(<span class=\"literal\">true</span>);</span><br><span class=\"line\">range.moveStart(<span class=\"string\">&quot;character&quot;</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">range.moveEnd(<span class=\"string\">&quot;character&quot;</span>, textbox.value.length); <span class=\"comment\">//&quot;Hello world!&quot;</span></span><br><span class=\"line\">range.select();</span><br><span class=\"line\"><span class=\"comment\">//选择前 3 个字符</span></span><br><span class=\"line\">range.collapse(<span class=\"literal\">true</span>);</span><br><span class=\"line\">range.moveStart(<span class=\"string\">&quot;character&quot;</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">range.moveEnd(<span class=\"string\">&quot;character&quot;</span>, <span class=\"number\">3</span>);</span><br><span class=\"line\">range.select(); <span class=\"comment\">//&quot;Hel&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//选择第4到第6个字符</span></span><br><span class=\"line\">range.collapse(<span class=\"literal\">true</span>);</span><br><span class=\"line\">range.moveStart(<span class=\"string\">&quot;character&quot;</span>, <span class=\"number\">4</span>);</span><br><span class=\"line\">range.moveEnd(<span class=\"string\">&quot;character&quot;</span>, <span class=\"number\">3</span>);</span><br><span class=\"line\">range.select(); <span class=\"comment\">//&quot;o w&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>跨浏览器方法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">selectText</span>(<span class=\"params\">textbox, startIndex, stopIndex</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (textbox.setSelectionRange) &#123;</span><br><span class=\"line\">        textbox.setSelectionRange(startIndex, stopIndex);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (textbox.createTextRange) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> range = textbox.createTextRange();</span><br><span class=\"line\">        range.collapse(<span class=\"literal\">true</span>);</span><br><span class=\"line\">        range.moveStart(<span class=\"string\">&quot;character&quot;</span>, startIndex);</span><br><span class=\"line\">        range.moveEnd(<span class=\"string\">&quot;character&quot;</span>, stopIndex - startIndex);</span><br><span class=\"line\">        range.select();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    textbox.focus();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">textbox.value = <span class=\"string\">&quot;Hello world!&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//选择所有字符</span></span><br><span class=\"line\">selectText(textbox, <span class=\"number\">0</span>, textbox.value.length); <span class=\"comment\">//&quot;Hello world!&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//选择前 3 个字符</span></span><br><span class=\"line\">selectText(textbox, <span class=\"number\">0</span>, <span class=\"number\">3</span>); <span class=\"comment\">//&quot;Hel&quot;</span></span><br><span class=\"line\"><span class=\"comment\">//选择第4到第6个字符</span></span><br><span class=\"line\">selectText(textbox, <span class=\"number\">4</span>, <span class=\"number\">7</span>); <span class=\"comment\">//&quot;o w&quot;</span></span><br></pre></td></tr></table></figure>\n<br>\n<br>\n\n<h2 id=\"2、过滤输入\"><a href=\"#2、过滤输入\" class=\"headerlink\" title=\"2、过滤输入\"></a>2、过滤输入</h2><p><strong>1、屏蔽字符</strong></p>\n<p>响应文本输入框中插入字符操作的是keypress 事件。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EventUtil.addHandler(textbox, <span class=\"string\">&quot;keypress&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    event = EventUtil.getEvent(event);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> target = EventUtil.getTarget(event);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> charCode = EventUtil.getCharCode(event);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"regexp\">/\\d/</span>.test(<span class=\"built_in\">String</span>.fromCharCode(charCode)) &amp;&amp; charCode &gt; <span class=\"number\">9</span> &amp;&amp;</span><br><span class=\"line\">        !event.ctrlKey) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//屏蔽不符合的按键</span></span><br><span class=\"line\">        EventUtil.preventDefault(event);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<p><strong>2、操作剪切板</strong></p>\n<p>剪切板事件</p>\n<ul>\n<li>beforecopy:在发生复制操作前触发。</li>\n<li>copy :在发生复制操作时触发。</li>\n<li>beforecut:在发生剪切操作前触发。</li>\n<li>cut :在发生剪切操作时触发。</li>\n<li>be forepaste:在发生粘贴操作前触发。</li>\n<li>paste:在发生粘贴操作时触发。</li>\n</ul>\n<p>向EventUtil中添加方法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//获取粘贴板内容</span></span><br><span class=\"line\"><span class=\"attr\">getClipboardText</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 兼容浏览器 ，在IE中clipboardData是window对象。</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> clipboardData = (event.clipboardData || <span class=\"built_in\">window</span>.clipboardData);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> clipboardData.getData(<span class=\"string\">&quot;text&quot;</span>);</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//设置粘贴板内容</span></span><br><span class=\"line\"><span class=\"attr\">setClipboardText</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event, value</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (event.clipboardData) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> event.clipboardData.setData(<span class=\"string\">&quot;text/plain&quot;</span>, value);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.clipboardData) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">window</span>.clipboardData.setData(<span class=\"string\">&quot;text&quot;</span>, value);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p>在需要确保粘贴到文本框中的文本中包含某些字符，或者符合某种格式要求时，能够访问剪贴板是非常有用的。例如，如果一个文本框只接受数值，那么就必须检测粘贴过来的值，以确保有效。在paste事件中，可以确定剪贴板中的值是否有效，如果无效，就可以像下面示例中那样，取消默认的行为。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">EventUtil.addHandler(textbox, <span class=\"string\">&quot;paste&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    event = EventUtil.getEvent(event);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> text = EventUtil.getClipboardText(event);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"regexp\">/^\\d*$/</span>.test(text)) &#123;</span><br><span class=\"line\">        EventUtil.preventDefault(event);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<p><strong>到目前EventUtil 如下：</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> EventUtil = &#123;</span><br><span class=\"line\">            <span class=\"attr\">addHandler</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">element, type, handler</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (element.addEventListener) &#123;</span><br><span class=\"line\">                    element.addEventListener(type, handler, <span class=\"literal\">false</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (element.attachEvent) &#123;</span><br><span class=\"line\">                    element.attachEvent(<span class=\"string\">&quot;on&quot;</span> + type, handler);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    element[<span class=\"string\">&quot;on&quot;</span> + type] = handler;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 解决浏览器兼容性问题</span></span><br><span class=\"line\">            <span class=\"attr\">getEvent</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> event ? event : <span class=\"built_in\">window</span>.event;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 返回事件目标</span></span><br><span class=\"line\">            <span class=\"attr\">getTarget</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> event.target || event.srcElement;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//取消事件的默认行为。</span></span><br><span class=\"line\">            <span class=\"attr\">preventDefault</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (event.preventDefault) &#123;</span><br><span class=\"line\">                    event.preventDefault();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    event.returnValue = <span class=\"literal\">false</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// 移除事件处理程序</span></span><br><span class=\"line\">            <span class=\"attr\">removeHandler</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">element, type, handler</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (element.removeEventListener) &#123;</span><br><span class=\"line\">                    element.removeEventListener(type, handler, <span class=\"literal\">false</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (element.detachEvent) &#123;</span><br><span class=\"line\">                    element.detachEvent(<span class=\"string\">&quot;on&quot;</span> + type, handler);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    element[<span class=\"string\">&quot;on&quot;</span> + type] = <span class=\"literal\">null</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//提供相关元素的信息，relatedTarget这个属性只对与mouseover和mouseout事件才包含值。</span></span><br><span class=\"line\">            <span class=\"attr\">getRelatedTarget</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (event.relatedTarget) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> event.relatedTarget;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (event.toElement) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> event.toElement;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (event.fromElement) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> event.fromElement;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//获取鼠标按钮</span></span><br><span class=\"line\">            <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">             *  0: 表示没有按下按钮。</span></span><br><span class=\"line\"><span class=\"comment\">                1: 表示按下了主鼠标按钮。</span></span><br><span class=\"line\"><span class=\"comment\">                2: 表示按下了次鼠标按钮。</span></span><br><span class=\"line\"><span class=\"comment\">                3: 表示同时按下了主、次鼠标按钮</span></span><br><span class=\"line\"><span class=\"comment\">                4: 表示按下了中间的鼠标按钮。</span></span><br><span class=\"line\"><span class=\"comment\">                5: 表示同时按下了主鼠标按钮和中间的鼠标按钮。</span></span><br><span class=\"line\"><span class=\"comment\">                6: 表示同时按下了次鼠标按钮和中间的鼠标按钮。</span></span><br><span class=\"line\"><span class=\"comment\">                7: 表示同时按下了三个鼠标按钮。*/</span></span><br><span class=\"line\">            <span class=\"attr\">getButton</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.implementation.hasFeature(<span class=\"string\">&quot;MouseEvents&quot;</span>, <span class=\"string\">&quot;2.0&quot;</span>)) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> event.button;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">switch</span> (event.button) &#123;</span><br><span class=\"line\">                        <span class=\"keyword\">case</span> <span class=\"number\">0</span>:</span><br><span class=\"line\">                        <span class=\"keyword\">case</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">                        <span class=\"keyword\">case</span> <span class=\"number\">3</span>:</span><br><span class=\"line\">                        <span class=\"keyword\">case</span> <span class=\"number\">5</span>:</span><br><span class=\"line\">                        <span class=\"keyword\">case</span> <span class=\"number\">7</span>:</span><br><span class=\"line\">                            <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">                        <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">                        <span class=\"keyword\">case</span> <span class=\"number\">6</span>:</span><br><span class=\"line\">                            <span class=\"keyword\">return</span> <span class=\"number\">2</span>;</span><br><span class=\"line\">                        <span class=\"keyword\">case</span> <span class=\"number\">4</span>:</span><br><span class=\"line\">                            <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//获得鼠标滚轮的增量值delta</span></span><br><span class=\"line\">            <span class=\"attr\">getWheelDelta</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (event.wheelDelta) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> (client.engine.opera &amp;&amp; client.engine.opera &lt; <span class=\"number\">9.5</span> ?</span><br><span class=\"line\">                        -event.wheelDelta : event.wheelDelta);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> -event.detail * <span class=\"number\">40</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//获取字符串编码  主要用于文本框 监听事件是keypress</span></span><br><span class=\"line\">            <span class=\"attr\">getCharCode</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> event.charCode == <span class=\"string\">&quot;number&quot;</span>) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> event.charCode;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> event.keyCode;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//获取粘贴板内容</span></span><br><span class=\"line\">            <span class=\"attr\">getClipboardText</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"comment\">// 兼容浏览器 ，在IE中clipboardData是window对象。</span></span><br><span class=\"line\">                <span class=\"keyword\">var</span> clipboardData = (event.clipboardData || <span class=\"built_in\">window</span>.clipboardData);</span><br><span class=\"line\">                <span class=\"keyword\">return</span> clipboardData.getData(<span class=\"string\">&quot;text&quot;</span>);</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//设置粘贴板内容</span></span><br><span class=\"line\">            <span class=\"attr\">setClipboardText</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event, value</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (event.clipboardData) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> event.clipboardData.setData(<span class=\"string\">&quot;text/plain&quot;</span>, value);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.clipboardData) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> <span class=\"built_in\">window</span>.clipboardData.setData(<span class=\"string\">&quot;text&quot;</span>, value);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//取消进一步的事件捕获或者冒泡</span></span><br><span class=\"line\">            <span class=\"attr\">stopPropagation</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (event.stopPropagation) &#123;</span><br><span class=\"line\">                    event.stopPropagation();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    event.cancelBubble = <span class=\"literal\">true</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;;</span><br></pre></td></tr></table></figure>\n\n\n<br>\n\n<h2 id=\"4、HTML5-约束验证API\"><a href=\"#4、HTML5-约束验证API\" class=\"headerlink\" title=\"4、HTML5 约束验证API\"></a>4、HTML5 约束验证API</h2><p><strong>1、必填字段</strong></p>\n<p>required 属性：带有required 属性的字段必须填。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input type=<span class=\"string\">&quot;text&quot;</span> name=<span class=\"string\">&quot;username&quot;</span> required&gt;</span><br></pre></td></tr></table></figure>\n<br>\n\n<p><strong>2、其他输入类型</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input type=<span class=\"string\">&quot;email&quot;</span> name =<span class=\"string\">&quot;email&quot;</span>&gt;</span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;url&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;homepage&quot;</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<br>\n\n<p><strong>3、数值范围</strong></p>\n<p>比如想让用户只能输入 0 到 100 的值，而且还是5的倍数。·</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input type=<span class=\"string\">&quot;number&quot;</span> min=<span class=\"string\">&quot;0&quot;</span> max=<span class=\"string\">&quot;100&quot;</span> step=<span class=\"string\">&quot;5&quot;</span> name=<span class=\"string\">&quot;count&quot;</span>&gt;</span><br></pre></td></tr></table></figure>\n<br>\n\n<p>4、输入模式</p>\n<p>pattern 属性：这个属性的值的一个正则表达式。用于匹配文本框中的值。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input type=<span class=\"string\">&quot;text&quot;</span> pattern=<span class=\"string\">&quot;\\d+&quot;</span> name=<span class=\"string\">&quot;count&quot;</span>&gt;</span><br></pre></td></tr></table></figure>\n<br>\n\n<p><strong>5、检测有效性</strong></p>\n<p>checkValidity() 方法可以检查表单中的某个字段是否有效。所有的表单字段都有这个方法。</p>\n<p><strong>话句话说：必填字段中如果没有值就是无效的，而字段中的值与pattern属性不匹配也是无效的。</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"built_in\">document</span>.forms[<span class=\"number\">0</span>].elements[<span class=\"number\">0</span>].checkValidity())&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//字符有效，继续</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">//字符无效</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>要检测整个表单是否有效，可以在表单自身调用checkValidity()方法。如果所有表单字段都有效，这个方法返回true;即使有一一个字段无效，这个方法也会返回false。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span>(<span class=\"built_in\">document</span>.forms[<span class=\"number\">0</span>].checkValidity())&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//表单有效，继续</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">//表单无效</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<br>\n\n<p><strong>6、禁用验证</strong></p>\n<p>novalidate 属性：设置它，表单就不需要进行验证。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;form method=<span class=\"string\">&quot;post&quot;</span> action=<span class=\"string\">&quot; &quot;</span> novalidate&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/form&gt;</span><br></pre></td></tr></table></figure>\n<p>formnovalidate 属性：某一个按钮不需要验证。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input type=<span class=\"string\">&quot;submit&quot;</span>  name=<span class=\"string\">&quot;阿清&quot;</span> value=<span class=\"string\">&quot;aqing&quot;</span> formnovalidate&gt;</span><br></pre></td></tr></table></figure>\n<br>\n<br>\n\n\n<h1 id=\"选择框脚本\"><a href=\"#选择框脚本\" class=\"headerlink\" title=\"选择框脚本\"></a>选择框脚本</h1><p>选择框是通过&lt;select&gt;和&lt;option&gt;元素创建的。为了方便与这个控件交互，除了所有表单字段共有的属性和方法外，HTMLSelectElement 类型还提供了下列属性和方法。</p>\n<ul>\n<li>add (newoption, relOption): 向控件中插人新&lt;option&gt;元素，其位置在相关项( relOption)之前。</li>\n<li>multiple:布尔值，表示是否允许多项选择;等价于HTML中的multiple特性。</li>\n<li>options:控件中所有&lt;option&gt;元素的HTMLCollection。</li>\n<li>remove ( index) :移除给定位置的选项。</li>\n<li>selectedIndex:基于0的选中项的索引，如果没有选中项，则值为-1。对于支持多选的控件,只保存选中项中第一项的索引。</li>\n<li>size:选择框中可见的行数;等价于HTML中的size特性。</li>\n</ul>\n<br>\n\n<p>选择框的type属性不是”select-one”,就是”select- multiple”,这取决于HTML代码中有没有multiple特性。选择框的value属性由当前选中项决定，相应规则如下。</p>\n<ul>\n<li>如果没有选中的项，则选择框的value属性保存空字符串。</li>\n<li>如果有一个选中项，而且该项的value特性已经在HTML中指定，则选择框的value属性等于选中项的value特性。即使value特性的值是空字符串，也同样遵循此条规则。</li>\n<li>如果有一个选中项，但该项的value特性在HTML中未指定，则选择框的value属性等于该项的文本。</li>\n<li>如果有多个选中项，则选择框的value属性将依据前两条规则取得第一个选中项的值。</li>\n</ul>\n<p>举个栗子：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;select name=<span class=\"string\">&quot;location&quot;</span> id=<span class=\"string\">&quot;selLocation&quot;</span>&gt;</span><br><span class=\"line\">\t<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Sunnyvale, CA&quot;</span>&gt;</span>Sunnyvale<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span><br><span class=\"line\">\t<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Los Angeles, CA&quot;</span>&gt;</span>Los Angeles<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span><br><span class=\"line\">\t<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;Mountain View, CA&quot;</span>&gt;</span>Mountain View<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span><br><span class=\"line\">\t<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">option</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span>China<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span><br><span class=\"line\">\t<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">option</span>&gt;</span>Australia<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span></span><br><span class=\"line\">&lt;/select&gt;</span><br></pre></td></tr></table></figure>\n<p>如果用户选择了其中第一项，则选择框的值就是” Sunnyvale, CA”。 如果文本为”China “的选项被选中，则选择框的值就是-一个空字符串，因为其value特性是空的。如果选择了最后一项，那么由于&lt;option&gt;中没有指定value特性，则选择框的值就是” Australia”。</p>\n<br>\n\n<p>在DOM中，每个&lt;option&gt;元素都有一个HTMLOptionElement 对象表示。为便于访问数据，HTMLOptionElement对象添加了下列属性:<strong>（这些属性的目的都是为了方便选项的访问）</strong></p>\n<ul>\n<li>index:当前选项在options集合中的索引。</li>\n<li>label:当前选项的标签;等价于HTML中的label特性。</li>\n<li>selected:布尔值，表示当前选项是否被选中。将这个属性设置为true可以选中当前选项。</li>\n<li>text:选项的文本。</li>\n<li>value:选项的值(等价于HTML中的value特性)。</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> selectbox = <span class=\"built_in\">document</span>.forms[<span class=\"number\">0</span>]. elements[<span class=\"string\">&quot;location&quot;</span>];</span><br><span class=\"line\"><span class=\"comment\">// 推荐</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> text = selectbox.options[<span class=\"number\">0</span>].text; <span class=\"comment\">// 选项中的文本</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> value = selectbox.options[<span class=\"number\">0</span>].value; <span class=\"comment\">//选项的值\t</span></span><br></pre></td></tr></table></figure>\n\n<br>\n\n<h2 id=\"1、添加选项\"><a href=\"#1、添加选项\" class=\"headerlink\" title=\"1、添加选项\"></a>1、添加选项</h2><p>有两种方法<br>1、使用DOM方法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> newOption = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&quot;option&quot;</span>);</span><br><span class=\"line\">newOption.appendChild(<span class=\"built_in\">document</span>.createTextNode(<span class=\"string\">&quot;Option text&quot;</span>));</span><br><span class=\"line\">newOption.setAttribute(<span class=\"string\">&quot;value&quot;</span>, <span class=\"string\">&quot;Option value&quot;</span>);</span><br><span class=\"line\">selectbox.appendChild(newOption);</span><br></pre></td></tr></table></figure>\n<p>2、添加新选项的方式是使用选择框的add()方法。DOM规定这个方法接受两个参数:要添加的新选项和将位于新选项之后的选项。如果想在列表的最后添加一个选项，应该将第二个参数设置为null。在IE中第二个参数设置为undefined。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> newOption = <span class=\"keyword\">new</span> Option(<span class=\"string\">&quot;Option text&quot;</span>, <span class=\"string\">&quot;Option value&quot;</span>);</span><br><span class=\"line\">selectbox.add(newOption, <span class=\"literal\">undefined</span>); <span class=\"comment\">//最佳方案</span></span><br></pre></td></tr></table></figure>\n<p><strong>推荐使用第二种</strong></p>\n<br>\n\n<h2 id=\"2、移除选项\"><a href=\"#2、移除选项\" class=\"headerlink\" title=\"2、移除选项\"></a>2、移除选项</h2><p>1、使用DOM方法中的removeChild() 方法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">selectbox.removeChild(selectbox.options[<span class=\"number\">0</span>]); <span class=\"comment\">//移除第一个选项</span></span><br></pre></td></tr></table></figure>\n<p>2、使用选项框中的remove() 方法<br> 一个参数：移除选项的索引</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">selectbox.remove(<span class=\"number\">0</span>);  <span class=\"comment\">//移除第一个选项</span></span><br></pre></td></tr></table></figure>\n\n<p>3、就是将相应选项设置为null。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">selectbox.options[<span class=\"number\">0</span>] = <span class=\"literal\">null</span>; <span class=\"comment\">//移除第一个选项</span></span><br></pre></td></tr></table></figure>\n\n<br>\n\n<h2 id=\"3、移动和重排选项\"><a href=\"#3、移动和重排选项\" class=\"headerlink\" title=\"3、移动和重排选项\"></a>3、移动和重排选项</h2><p>移动：使用DOM中的appendChild() 方法</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> selectbox1 = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;selLocations1&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> selectbox2 = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;selLocations2&quot;</span>);</span><br><span class=\"line\">selectbox2.appendChild(selectbox1.options[<span class=\"number\">0</span>]);</span><br></pre></td></tr></table></figure>\n<p><span style=\"color:red\">移动选项与移除选项有一个共同之处，即会重置每-一个选项的index属性。</span></p>\n<br>\n\n<p>重排：使用DOM方法 insertBefore() 方法。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> optionToMove = selectbox.options[<span class=\"number\">1</span>];</span><br><span class=\"line\">selectbox.insertBefore(optionToMove, selectbox.options[optionToMove.index-<span class=\"number\">1</span>]);</span><br></pre></td></tr></table></figure>\n\n<hr>\n<br>\n<br>\n愿你的坚持终有收获。\n<br>\n<br>","categories":[{"name":"JavaScript","path":"api/categories/JavaScript.json"}],"tags":[{"name":"表单","path":"api/tags/表单.json"}]}