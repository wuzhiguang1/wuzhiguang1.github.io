{"title":"微信小程序获取元素高度的方法","slug":"228","date":"2022-09-09T01:09:45.000Z","updated":"2022-09-09T02:03:02.544Z","comments":true,"path":"api/articles/228.json","excerpt":null,"covers":null,"content":"<p><strong>微信小程序如何获取元素的高度</strong>   </p>\n<p>1、获取元素的高度（px单位）：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> query = wx.createSelectorQuery();</span><br><span class=\"line\">query.select(<span class=\"string\">&#x27;.content&#x27;</span>).boundingClientRect(<span class=\"function\"><span class=\"params\">rect</span>=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> height = rect.height;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(height);</span><br><span class=\"line\">&#125;).exec();</span><br></pre></td></tr></table></figure>\n<p>2、获取元素的高度（rpx单位），使用宽高比换算获得：（以下的750是该元素的宽度，单位是rpx的）</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> query = wx.createSelectorQuery();</span><br><span class=\"line\">query.select(<span class=\"string\">&#x27;.content&#x27;</span>).boundingClientRect(<span class=\"function\"><span class=\"params\">rect</span>=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> clientHeight = rect.height;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> clientWidth = rect.width;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> ratio = <span class=\"number\">750</span> / clientWidth;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> height = clientHeight * ratio;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(height);</span><br><span class=\"line\">&#125;).exec();</span><br></pre></td></tr></table></figure>\n<p>3、在页面渲染完成OnReady回调，获取元素高度时，如果不加定时器，获取的元素的高度还是没渲染完异步数据前的高度。故需要加定时器</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">onReady () &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> query = wx.createSelectorQuery();</span><br><span class=\"line\">    query.select(<span class=\"string\">&#x27;.content&#x27;</span>).boundingClientRect(<span class=\"function\"><span class=\"params\">rect</span>=&gt;</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> height = rect.height;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(height);</span><br><span class=\"line\">        &#125;).exec();</span><br><span class=\"line\">    &#125;, <span class=\"number\">300</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","more":"<p><strong>微信小程序如何获取元素的高度</strong>   </p>\n<p>1、获取元素的高度（px单位）：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> query = wx.createSelectorQuery();</span><br><span class=\"line\">query.select(<span class=\"string\">&#x27;.content&#x27;</span>).boundingClientRect(<span class=\"function\"><span class=\"params\">rect</span>=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> height = rect.height;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(height);</span><br><span class=\"line\">&#125;).exec();</span><br></pre></td></tr></table></figure>\n<p>2、获取元素的高度（rpx单位），使用宽高比换算获得：（以下的750是该元素的宽度，单位是rpx的）</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> query = wx.createSelectorQuery();</span><br><span class=\"line\">query.select(<span class=\"string\">&#x27;.content&#x27;</span>).boundingClientRect(<span class=\"function\"><span class=\"params\">rect</span>=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> clientHeight = rect.height;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> clientWidth = rect.width;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> ratio = <span class=\"number\">750</span> / clientWidth;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> height = clientHeight * ratio;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(height);</span><br><span class=\"line\">&#125;).exec();</span><br></pre></td></tr></table></figure>\n<p>3、在页面渲染完成OnReady回调，获取元素高度时，如果不加定时器，获取的元素的高度还是没渲染完异步数据前的高度。故需要加定时器</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">onReady () &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> query = wx.createSelectorQuery();</span><br><span class=\"line\">    query.select(<span class=\"string\">&#x27;.content&#x27;</span>).boundingClientRect(<span class=\"function\"><span class=\"params\">rect</span>=&gt;</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> height = rect.height;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(height);</span><br><span class=\"line\">        &#125;).exec();</span><br><span class=\"line\">    &#125;, <span class=\"number\">300</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":[{"name":"微信小程序","path":"api/categories/微信小程序.json"}],"tags":[{"name":"微信小程序","path":"api/tags/微信小程序.json"}]}