{"title":"Vueä¹‹axiosè¯¦è§£","slug":"80","date":"2020-08-07T12:44:49.000Z","updated":"2022-07-29T04:22:04.761Z","comments":true,"path":"api/articles/80.json","excerpt":" [Figure] ","covers":["https://cdn.jsdelivr.net/gh/wuzhiguang1/bolgfile@1.9/photo/IMG_0075.PNG","https://qny.aqingya.cn/img/20200807114603.png","https://qny.aqingya.cn/img/20200807115413.png","https://qny.aqingya.cn/img/20200807115332.png","https://qny.aqingya.cn/img/20200807134444.png","https://qny.aqingya.cn/img/20200807134521.png","https://qny.aqingya.cn/img/20200807134923.png","https://qny.aqingya.cn/img/20200807134943.png","https://qny.aqingya.cn/img/20200807140410.png","https://qny.aqingya.cn/img/20200807163535.png","https://qny.aqingya.cn/img/20200807163548.png","https://qny.aqingya.cn/img/20200807202022.png","https://qny.aqingya.cn/img/20200807203844.png","https://qny.aqingya.cn/img/20200807203333.png","https://qny.aqingya.cn/img/20200807204036.png","https://qny.aqingya.cn/img/20200807204024.png","https://qny.aqingya.cn/img/20200807204128.png"],"content":"<p><img src=\"https://cdn.jsdelivr.net/gh/wuzhiguang1/bolgfile@1.9/photo/IMG_0075.PNG\" alt=\"\"></p>\n<span id=\"more\"></span>\n<h2 id=\"ä¸ºä»€ä¹ˆé€‰æ‹©axios\"><a href=\"#ä¸ºä»€ä¹ˆé€‰æ‹©axios\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆé€‰æ‹©axios?\"></a>ä¸ºä»€ä¹ˆé€‰æ‹©axios?</h2><p>ğŸ”· åŠŸèƒ½ç‰¹ç‚¹:</p>\n<p>&emsp;&emsp;ğŸ”¹åœ¨æµè§ˆå™¨ä¸­å‘é€ XMLHttpRequests è¯·æ±‚</p>\n<p>&emsp;&emsp;ğŸ”¹åœ¨ node.js ä¸­å‘é€ httpè¯·æ±‚</p>\n<p>&emsp;&emsp;ğŸ”¹æ”¯æŒ Promise API</p>\n<p>&emsp;&emsp;ğŸ”¹æ‹¦æˆªè¯·æ±‚å’Œå“åº”</p>\n<p>&emsp;&emsp;ğŸ”¹è½¬æ¢è¯·æ±‚å’Œå“åº”æ•°æ®</p>\n<p><br></p>\n<h2 id=\"axios-çš„è¯·æ±‚æ–¹å¼\"><a href=\"#axios-çš„è¯·æ±‚æ–¹å¼\" class=\"headerlink\" title=\"axios çš„è¯·æ±‚æ–¹å¼\"></a>axios çš„è¯·æ±‚æ–¹å¼</h2><p>ğŸ”· æ”¯æŒå¤šç§è¯·æ±‚æ–¹å¼:</p>\n<p>&emsp;&emsp;ğŸ”¹ axios(config)</p>\n<p>&emsp;&emsp;ğŸ”¹ axios.request(config)</p>\n<p>&emsp;&emsp;ğŸ”¹ axios.get(url[, config])</p>\n<p>&emsp;&emsp;ğŸ”¹ axios.delete(url[, config])</p>\n<p>&emsp;&emsp;ğŸ”¹ axios.head(url[, config])</p>\n<p>&emsp;&emsp;ğŸ”¹ axios.post(url[, data[, config]])</p>\n<p>&emsp;&emsp;ğŸ”¹ axios.put(url[, data[, config]])</p>\n<p>&emsp;&emsp;ğŸ”¹ axios.patch(url[, data[, config]])</p>\n<p><br></p>\n<h2 id=\"axios-å‘é€åŸºæœ¬è¯·æ±‚\"><a href=\"#axios-å‘é€åŸºæœ¬è¯·æ±‚\" class=\"headerlink\" title=\"axios å‘é€åŸºæœ¬è¯·æ±‚\"></a>axios å‘é€åŸºæœ¬è¯·æ±‚</h2><p><img src=\"https://qny.aqingya.cn/img/20200807114603.png\" alt=\"\"></p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807115413.png\" alt=\"\"></p>\n<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†axios(config) çš„è¯·æ±‚æ–¹å¼ã€‚</p>\n<p><span style=\"color:red\"><strong>configæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒé»˜è®¤æ˜¯é‡‡ç”¨ GET è¯·æ±‚çš„ï¼Œå½“ç„¶å¦‚æœæƒ³è¦ä½¿ç”¨POSTè¯·æ±‚ï¼Œå¯ä»¥æ·»åŠ  <code>methodï¼šâ€œPOSTâ€</code></strong></span></p>\n<p><span style=\"color:red\"><strong>axios å®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥åœ¨åé¢ä½¿ç”¨then catchç­‰æ–¹æ³•ã€‚</strong></span></p>\n<p><br></p>\n<p>ä½¿ç”¨  axios.get(url[, config]) å‘é€è¯·æ±‚æ¼”ç¤ºã€‚</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807115332.png\" alt=\"\"></p>\n<p><br></p>\n<h2 id=\"å‘é€å¹¶å‘è¯·æ±‚\"><a href=\"#å‘é€å¹¶å‘è¯·æ±‚\" class=\"headerlink\" title=\"å‘é€å¹¶å‘è¯·æ±‚\"></a>å‘é€å¹¶å‘è¯·æ±‚</h2><p>æœ‰æ—¶å€™, æˆ‘ä»¬å¯èƒ½éœ€æ±‚åŒæ—¶å‘é€ä¸¤ä¸ªè¯·æ±‚</p>\n<p>ä½¿ç”¨axios.all, å¯ä»¥æ”¾å…¥å¤šä¸ªè¯·æ±‚çš„æ•°ç»„.</p>\n<p>axios.all([]) è¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½¿ç”¨ axios.spread å¯å°†æ•°ç»„ [res1,res2] å±•å¼€ä¸º res1, res2</p>\n<p><br></p>\n<p>ä½¿ç”¨axios.all()</p>\n<p>ä½¿ç”¨æ ¼å¼ï¼š <code>axios.all([axios(config),axios(config)])</code></p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807134444.png\" alt=\"\"></p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807134521.png\" alt=\"\"></p>\n<p><br></p>\n<p>ä½¿ç”¨ axios.spread å¯å°†æ•°ç»„ [res1,res2] å±•å¼€ä¸º res1, res2 </p>\n<p>ä½¿ç”¨æ ¼å¼ï¼š <code>axios.all([axios(config),axios(config)]).then(axios.spread())</code></p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807134923.png\" alt=\"\"></p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807134943.png\" alt=\"\"></p>\n<p><br></p>\n<h2 id=\"å…¨å±€é…ç½®\"><a href=\"#å…¨å±€é…ç½®\" class=\"headerlink\" title=\"å…¨å±€é…ç½®\"></a><strong>å…¨å±€é…ç½®</strong></h2><p>ğŸ”·åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­, æˆ‘ä»¬çš„BaseURLæ˜¯å›ºå®šçš„</p>\n<p>&emsp;&emsp;ğŸ”¹ äº‹å®ä¸Š, åœ¨å¼€å‘ä¸­å¯èƒ½å¾ˆå¤šå‚æ•°éƒ½æ˜¯å›ºå®šçš„ã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹ è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€äº›æŠ½å–, å°†ä¸€äº›å…¬å…±çš„é…ç½®æŠ½å–å‡ºæ¥ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨axioxçš„å…¨å±€é…ç½®ã€‚</p>\n<p><code>axios.defaults</code></p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807140410.png\" alt=\"\"></p>\n<p><br></p>\n<h2 id=\"å¸¸ç”¨çš„é…ç½®é€‰é¡¹\"><a href=\"#å¸¸ç”¨çš„é…ç½®é€‰é¡¹\" class=\"headerlink\" title=\"å¸¸ç”¨çš„é…ç½®é€‰é¡¹\"></a>å¸¸ç”¨çš„é…ç½®é€‰é¡¹</h2><hr>\n<p>ğŸ”·è¯·æ±‚ç±»å‹</p>\n<p>&emsp;&emsp;ğŸ”¹ method: â€˜getâ€™,</p>\n<p>ğŸ”·URLæŸ¥è¯¢å¯¹è±¡</p>\n<p>&emsp;&emsp;ğŸ”¹ params:{ id: 12 },</p>\n<hr>\n<p>ğŸ”·è¯·æ±‚ç±»å‹</p>\n<p>&emsp;&emsp;ğŸ”¹ method: â€˜postâ€™,</p>\n<p>ğŸ”·request body</p>\n<p>&emsp;&emsp;ğŸ”¹ data: { key: â€˜aaâ€™},          </p>\n<hr>\n<p>æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè¯·æ±‚ç±»å‹çš„getï¼Œåˆ™åé¢æ·»åŠ çš„è¯·æ±‚å‚æ•°åº”è¯¥ä½¿ç”¨çš„æ˜¯  params{ } ã€‚å¦‚æœè¯·æ±‚ç±»å‹çš„postï¼Œåˆ™åé¢æ·»åŠ çš„è¯·æ±‚å‚æ•°åº”è¯¥ä½¿ç”¨çš„æ˜¯  data{ } ã€‚</p>\n<p><br></p>\n<p>ğŸ”·è¯·æ±‚åœ°å€</p>\n<p>&emsp;&emsp;ğŸ”¹ url: â€˜/userâ€™,</p>\n<p>ğŸ”·è¯·æ ¹è·¯å¾„</p>\n<p>&emsp;&emsp;ğŸ”¹ baseURL: â€˜<a href=\"http://www.mt.com/api\">http://www.mt.com/api</a>â€˜,</p>\n<p>ğŸ”·è¶…æ—¶è®¾ç½®s</p>\n<p>&emsp;&emsp;ğŸ”¹ timeout: 1000,</p>\n<p>ğŸ”·è¯·æ±‚å‰çš„æ•°æ®å¤„ç†</p>\n<p>&emsp;&emsp;ğŸ”¹ transformRequest:[function(data){}],</p>\n<p>ğŸ”·è¯·æ±‚åçš„æ•°æ®å¤„ç†</p>\n<p>&emsp;&emsp;ğŸ”¹ transformResponse: [function(data){}],</p>\n<p>ğŸ”·è‡ªå®šä¹‰çš„è¯·æ±‚å¤´</p>\n<p>&emsp;&emsp;ğŸ”¹ headers:{â€˜x-Requested-Withâ€™:â€™XMLHttpRequestâ€™},</p>\n<p>ğŸ”·æŸ¥è¯¢å¯¹è±¡åºåˆ—åŒ–å‡½æ•°</p>\n<p>&emsp;&emsp;ğŸ”¹ paramsSerializer: function(params){ }</p>\n<p>ğŸ”·è·¨åŸŸæ˜¯å¦å¸¦Token</p>\n<p>&emsp;&emsp;ğŸ”¹ withCredentials: false,</p>\n<p>ğŸ”·è‡ªå®šä¹‰è¯·æ±‚å¤„ç†</p>\n<p>&emsp;&emsp;ğŸ”¹ adapter: function(resolve, reject, config){},</p>\n<p>ğŸ”·èº«ä»½éªŒè¯ä¿¡æ¯</p>\n<p>&emsp;&emsp;ğŸ”¹ auth: { uname: â€˜â€™, pwd: â€˜12â€™},</p>\n<p>ğŸ”·å“åº”çš„æ•°æ®æ ¼å¼ json / blob /document /arraybuffer / text / stream</p>\n<p>&emsp;&emsp;ğŸ”¹ responseType: â€˜jsonâ€™,</p>\n<p><br></p>\n<h2 id=\"axios-å®ä¾‹\"><a href=\"#axios-å®ä¾‹\" class=\"headerlink\" title=\"axios å®ä¾‹\"></a>axios å®ä¾‹</h2><p>ğŸ”· ä¸ºä»€ä¹ˆè¦åˆ›å»ºaxiosçš„å®ä¾‹å‘¢?</p>\n<p>&emsp;&emsp;ğŸ”¹ å½“æˆ‘ä»¬ä»axiosæ¨¡å—ä¸­å¯¼å…¥å¯¹è±¡æ—¶, ä½¿ç”¨çš„å®ä¾‹æ˜¯é»˜è®¤çš„å®ä¾‹.</p>\n<p>&emsp;&emsp;ğŸ”¹ å½“ç»™è¯¥å®ä¾‹è®¾ç½®ä¸€äº›é»˜è®¤é…ç½®æ—¶, è¿™äº›é…ç½®å°±è¢«å›ºå®šä¸‹æ¥äº†.</p>\n<p>&emsp;&emsp;ğŸ”¹ ä½†æ˜¯åç»­å¼€å‘ä¸­, æŸäº›é…ç½®å¯èƒ½ä¼šä¸å¤ªä¸€æ ·.</p>\n<p>&emsp;&emsp;ğŸ”¹ æ¯”å¦‚æŸäº›è¯·æ±‚éœ€è¦ä½¿ç”¨ç‰¹å®šçš„<strong>baseURL</strong>æˆ–è€…<strong>timeout</strong>æˆ–è€…<strong>content-Type</strong>ç­‰.</p>\n<p>&emsp;&emsp;ğŸ”¹ è¿™ä¸ªæ—¶å€™, æˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºæ–°çš„å®ä¾‹, å¹¶ä¸”ä¼ å…¥å±äºè¯¥å®ä¾‹çš„é…ç½®ä¿¡æ¯.</p>\n<p>æ‰€ä»¥å½“æˆ‘ä»¬çš„ä¸šåŠ¡æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œè¯·æ±‚æ¥å£æ¯”è¾ƒå¤šï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸Šé¢çš„å…¨å±€é…ç½®å°±ä¸è¡Œäº†ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±è¦ä½¿ç”¨axioså®ä¾‹äº†ã€‚</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807163535.png\" alt=\"\"></p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807163548.png\" alt=\"\"></p>\n<p><br></p>\n<h2 id=\"ç½‘ç»œè¯·æ±‚æ¨¡å—çš„å°è£…\"><a href=\"#ç½‘ç»œè¯·æ±‚æ¨¡å—çš„å°è£…\" class=\"headerlink\" title=\"ç½‘ç»œè¯·æ±‚æ¨¡å—çš„å°è£…\"></a>ç½‘ç»œè¯·æ±‚æ¨¡å—çš„å°è£…</h2><p>æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦axiosè¿›è¡Œå°è£…ï¼Ÿ</p>\n<p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„ axios æœ‰ä¸€å¤©ä¸è¿›è¡Œäº†ç»´æŠ¤ï¼Œæˆ–è€…å‡ºç°é‡å¤§çš„bug ï¼Œæˆ‘ä»¬éœ€è¦æ¢å…¶ä»–çš„ç¬¬ä¸‰æ–¹ç½‘ç»œè¯·æ±‚æ¡†æ¶ã€‚é‚£ä¹ˆæˆ‘ä»¬éœ€è¦åœ¨æ¯ä¸€ä¸ªç»„ä»¶ä¸­éƒ½éœ€è¦ä¿®æ”¹ï¼Œå¾ˆæ˜¯ä¸å¥½ã€‚æ‰€ä»¥æˆ‘ä»¬å¯¹ç½‘ç»œè¯·æ±‚æ¨¡å—è¿›è¡Œå°è£…ï¼Œå³ä½¿æœ‰ä¸€ä¸ªæˆ‘ä»¬éœ€è¦æ”¹æ¢å…¶ä»–çš„ç¬¬ä¸‰æ–¹ç½‘ç»œè¯·æ±‚æ¡†æ¶ï¼Œå°±åªå¯¹æˆ‘ä»¬çš„ç½‘ç»œè¯·æ±‚æ¨¡å—è¿›å»ä¿®æ”¹å³å¯ã€‚</p>\n<p><br></p>\n<p>åˆ›å»ºä¸€ä¸ªnetworkæ–‡ä»¶å¤¹ã€‚è¿™é‡Œé¢æ”¾å¯¹ç½‘ç»œå°è£…ç›¸å…³çš„æ–‡ä»¶ã€‚</p>\n<p>åˆ›å»ºrequest.js</p>\n<p><br></p>\n<p>å°è£…ä¸€ï¼š</p>\n<p>ä½¿ç”¨å›è°ƒå‡½æ•°ã€‚</p>\n<p>request.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">&#x27;axios&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\">config, success, failure</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// 1.åˆ›å»ºå®ä¾‹</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> instance = axios.create(&#123;</span><br><span class=\"line\">      <span class=\"attr\">baseURL</span>: <span class=\"string\">&#x27;http://111.111.111.111:8000&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">timeout</span>: <span class=\"number\">5000</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// 2ã€å‘é€ç½‘ç»œè¯·æ±‚è¯·æ±‚</span></span><br><span class=\"line\">  instance(config)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      success(res)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\"><span class=\"params\">rej</span> =&gt;</span> &#123;</span><br><span class=\"line\">      failure(rej)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä½¿ç”¨æ¨¡å—ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; request &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./newwork/request&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">request(&#123;</span><br><span class=\"line\">  <span class=\"attr\">url</span>: <span class=\"string\">&#x27;home/multidata&#x27;</span></span><br><span class=\"line\">&#125;, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">request(&#123;</span><br><span class=\"line\">  <span class=\"attr\">url</span>: <span class=\"string\">&quot;api/z8/home/data&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">params</span>: &#123; <span class=\"attr\">type</span>: <span class=\"string\">&#x27;pop&#x27;</span>, <span class=\"attr\">page</span>: <span class=\"number\">1</span> &#125;</span><br><span class=\"line\">&#125;, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<p>å°è£…äºŒï¼š</p>\n<p>ä½¿ç”¨å›è°ƒå‡½æ•°ã€‚</p>\n<p>request.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">&#x27;axios&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\">config</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// 1.åˆ›å»ºå®ä¾‹</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> instance = axios.create(&#123;</span><br><span class=\"line\">      <span class=\"attr\">baseURL</span>: <span class=\"string\">&#x27;http://111.111.111.111:8000&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">timeout</span>: <span class=\"number\">5000</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 2ã€å‘é€ç½‘ç»œè¯·æ±‚è¯·æ±‚</span></span><br><span class=\"line\">  instance(config.baseConfig)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      config.success(res)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\"><span class=\"params\">rej</span> =&gt;</span> &#123;</span><br><span class=\"line\">      fonfig.failure(rej)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä½¿ç”¨æ¨¡å—ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">&#x27;axios&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">request(&#123;</span><br><span class=\"line\">  <span class=\"attr\">baseConfig</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">url</span>: <span class=\"string\">&#x27;/home/multidata&#x27;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">success</span>(<span class=\"params\">res</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">failure</span>(<span class=\"params\">rej</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(rej);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<p>å°è£…ä¸‰ï¼š</p>\n<p>ä½¿ç”¨Promiseã€‚</p>\n<p>request.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">&#x27;axios&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\">config</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1.åˆ›å»ºå®ä¾‹</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> instance = axios.create(&#123;</span><br><span class=\"line\">      <span class=\"attr\">baseURL</span>: <span class=\"string\">&#x27;http://111.111.111.111:8000&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">timeout</span>: <span class=\"number\">5000</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 2ã€å‘é€ç½‘ç»œè¯·æ±‚è¯·æ±‚</span></span><br><span class=\"line\">    instance(config)</span><br><span class=\"line\">      .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">        resolve(res)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\"><span class=\"params\">rej</span> =&gt;</span> &#123;</span><br><span class=\"line\">        reject(rej)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä½¿ç”¨æ¨¡å—ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; request &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./newwork/request&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">request(&#123;</span><br><span class=\"line\">  <span class=\"attr\">url</span>: <span class=\"string\">&#x27;home/multidata&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"params\">rej</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(rej);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<p>å°è£…å››ï¼šï¼ˆæœ€ç»ˆæ–¹æ¡ˆï¼‰</p>\n<p>ä½¿ç”¨Promiseã€‚</p>\n<p>request.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">&#x27;axios&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\">config</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 1.åˆ›å»ºå®ä¾‹</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> instance = axios.create(&#123;</span><br><span class=\"line\">      <span class=\"attr\">baseURL</span>: <span class=\"string\">&#x27;http://111.111.111.111:8000&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">timeout</span>: <span class=\"number\">5000</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// 2ã€å‘é€ç½‘ç»œè¯·æ±‚è¯·æ±‚</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// axios å®ä¾‹æœ¬èº«è¿”å›æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> instance(config)</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>ä½¿ç”¨æ¨¡å—ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; request &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./newwork/request&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">request(&#123;</span><br><span class=\"line\">  <span class=\"attr\">url</span>: <span class=\"string\">&#x27;home/multidata&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"params\">rej</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(rej);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<h2 id=\"axios-æ‹¦æˆªå™¨çš„ä½¿ç”¨\"><a href=\"#axios-æ‹¦æˆªå™¨çš„ä½¿ç”¨\" class=\"headerlink\" title=\"axios æ‹¦æˆªå™¨çš„ä½¿ç”¨\"></a>axios æ‹¦æˆªå™¨çš„ä½¿ç”¨</h2><p>axiosæä¾›äº†æ‹¦æˆªå™¨ï¼Œç”¨äºæˆ‘ä»¬åœ¨å‘é€æ¯æ¬¡è¯·æ±‚æˆ–è€…å¾—åˆ°ç›¸åº”åï¼Œè¿›è¡Œå¯¹åº”çš„å¤„ç†ã€‚</p>\n<p><br></p>\n<h3 id=\"axios-è¯·æ±‚æ‹¦æˆªå™¨\"><a href=\"#axios-è¯·æ±‚æ‹¦æˆªå™¨\" class=\"headerlink\" title=\"axios è¯·æ±‚æ‹¦æˆªå™¨\"></a>axios è¯·æ±‚æ‹¦æˆªå™¨</h3><p>ğŸ”· ä¸ºä»€ä¹ˆè¦æ‹¦æˆªè¯·æ±‚å‘ã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹ æˆ‘ä»¬å¯¹è¯·æ±‚çš„configè¿›è¡Œä¸€äº›ä¿®æ”¹ã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹ æ¯”å¦‚configä¸­çš„ä¸€äº›ä¿¡æ¯ä¸ç¬¦åˆæœåŠ¡å™¨çš„è¦æ±‚ã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹ æ¯”å¦‚æ¯æ¬¡å‘é€ç½‘ç»œè¯·æ±‚çš„æ—¶å€™ï¼Œéƒ½å¸Œæœ›åœ¨ç•Œé¢ä¸­æ˜¾ç¤ºä¸€ä¸ªè¯·æ±‚çš„å›¾æ ‡ã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹ æ¯”å¦‚æŸäº›ç½‘ç»œè¯·æ±‚ï¼ˆæ¯”å¦‚ ç™»é™†ï¼ˆæºå¸¦tokenï¼‰ï¼‰ï¼Œå¿…é¡»æºå¸¦ä¸€äº›ç‰¹æ®Šçš„ä¿¡æ¯ã€‚</p>\n<p><code>instance.interceptors.request.use(å‚æ•°ä¸€ï¼Œå‚æ•°äºŒ)</code> ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œæ‹¦æˆªè¯·æ±‚æˆåŠŸå‡½æ•°ï¼Œå’Œæ‹¦æˆªè¯·æ±‚å¤±è´¥å‡½æ•°ã€‚</p>\n<p>æ³¨æ„ï¼šæˆ‘ä»¬æ‹¦æˆªä¹‹åï¼Œå¯¹è¯·æ±‚åšå®Œä¸€ç³»åˆ—ä¿®æ”¹ï¼Œæˆ‘ä»¬è¦è¿”å›è¯·æ±‚ï¼Œä¸ç„¶åé¢æˆ‘ä»¬è¯·æ±‚ä¸åˆ°æ•°æ®ã€‚</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807202022.png\" alt=\"\"></p>\n<p><br></p>\n<p>ğŸ”· è¯·æ±‚æ‹¦æˆªå¯ä»¥åšåˆ°çš„äº‹æƒ…ï¼š</p>\n<p>&emsp;&emsp;ğŸ”¹ è¯·æ±‚æ‹¦æˆªä¸­é”™è¯¯æ‹¦æˆªè¾ƒå°‘ï¼Œé€šå¸¸éƒ½æ˜¯é…ç½®ç›¸å…³çš„æ‹¦æˆªã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹ å¯èƒ½çš„æ‹¦æˆªçš„é”™è¯¯ï¼šæ¯”å¦‚è¯·æ±‚è¶…æ—¶ï¼Œå¯ä»¥å°†é¡µé¢è·³è½¬åˆ°ä¸€ä¸ªé”™è¯¯é¡µé¢ä¸­ã€‚</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807203844.png\" alt=\"\"></p>\n<p><br></p>\n<h3 id=\"axios-å“åº”æ‹¦æˆªå™¨\"><a href=\"#axios-å“åº”æ‹¦æˆªå™¨\" class=\"headerlink\" title=\"axios å“åº”æ‹¦æˆªå™¨\"></a>axios å“åº”æ‹¦æˆªå™¨</h3><p><code>instance.interceptors.response.use()</code> å“åº”æ‹¦æˆªä¹Ÿæ˜¯ä¸¤ä¸ªå‚æ•°ã€‚æ‹¦æˆªå“åº”æˆåŠŸå‡½æ•°ï¼Œå’Œæ‹¦æˆªå“åº”å¤±è´¥å‡½æ•°ã€‚</p>\n<p>åŒæ ·æˆ‘ä»¬æ‹¦æˆªåˆ°å“åº”ä¹‹åï¼Œè¦è¿”å›å“åº”ï¼Œé€šå¸¸è¿”å›<code>return response.data</code> å³å¯ï¼Œå› ä¸ºæˆ‘ä»¬åªè¦æ•°æ®ã€‚</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807203333.png\" alt=\"\"></p>\n<p><br></p>\n<p>ğŸ”· å“åº”æ‹¦æˆªä¸­å®Œæˆçš„äº‹æƒ…ï¼š</p>\n<p>&emsp;&emsp;ğŸ”¹ å“åº”çš„æˆåŠŸæ‹¦æˆªä¸­ï¼Œä¸»è¦æ˜¯å¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤ã€‚</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807204036.png\" alt=\"\"></p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807204024.png\" alt=\"\"></p>\n<p><br></p>\n<p>&emsp;&emsp;ğŸ”¹  å“åº”çš„å¤±è´¥æ‹¦æˆªä¸­ï¼Œå¯ä»¥æ ¹æ®statusåˆ¤æ–­æŠ¥é”™çš„é”™è¯¯ç ï¼Œè·³è½¬åˆ°ä¸åŒçš„é”™è¯¯æç¤ºé¡µé¢ã€‚</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807204128.png\" alt=\"\"></p>\n<p><br><br></p>\n<p>request.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">&#x27;axios&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\">config</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 1.åˆ›å»ºå®ä¾‹</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> instance = axios.create(&#123;</span><br><span class=\"line\">      <span class=\"attr\">baseURL</span>: <span class=\"string\">&#x27;http://11.11.11.11:8000&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">timeout</span>: <span class=\"number\">5000</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// 2.è¯·æ±‚æ‹¦æˆª</span></span><br><span class=\"line\">  instance.interceptors.request.use(<span class=\"function\"><span class=\"params\">config</span> =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> config</span><br><span class=\"line\">  &#125;, <span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> err</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// å“åº”æ‹¦æˆª</span></span><br><span class=\"line\">  instance.interceptors.response.use(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.data</span><br><span class=\"line\">    &#125;, <span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> err</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// 3ã€å‘é€ç½‘ç»œè¯·æ±‚è¯·æ±‚</span></span><br><span class=\"line\">    <span class=\"comment\">// axios å®ä¾‹è¿”å›æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> instance(config)</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<p><br></p>\n<p><br></p>\n","more":"<h2 id=\"ä¸ºä»€ä¹ˆé€‰æ‹©axios\"><a href=\"#ä¸ºä»€ä¹ˆé€‰æ‹©axios\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆé€‰æ‹©axios?\"></a>ä¸ºä»€ä¹ˆé€‰æ‹©axios?</h2><p>ğŸ”· åŠŸèƒ½ç‰¹ç‚¹:</p>\n<p>&emsp;&emsp;ğŸ”¹åœ¨æµè§ˆå™¨ä¸­å‘é€ XMLHttpRequests è¯·æ±‚</p>\n<p>&emsp;&emsp;ğŸ”¹åœ¨ node.js ä¸­å‘é€ httpè¯·æ±‚</p>\n<p>&emsp;&emsp;ğŸ”¹æ”¯æŒ Promise API</p>\n<p>&emsp;&emsp;ğŸ”¹æ‹¦æˆªè¯·æ±‚å’Œå“åº”</p>\n<p>&emsp;&emsp;ğŸ”¹è½¬æ¢è¯·æ±‚å’Œå“åº”æ•°æ®</p>\n<p><br></p>\n<h2 id=\"axios-çš„è¯·æ±‚æ–¹å¼\"><a href=\"#axios-çš„è¯·æ±‚æ–¹å¼\" class=\"headerlink\" title=\"axios çš„è¯·æ±‚æ–¹å¼\"></a>axios çš„è¯·æ±‚æ–¹å¼</h2><p>ğŸ”· æ”¯æŒå¤šç§è¯·æ±‚æ–¹å¼:</p>\n<p>&emsp;&emsp;ğŸ”¹ axios(config)</p>\n<p>&emsp;&emsp;ğŸ”¹ axios.request(config)</p>\n<p>&emsp;&emsp;ğŸ”¹ axios.get(url[, config])</p>\n<p>&emsp;&emsp;ğŸ”¹ axios.delete(url[, config])</p>\n<p>&emsp;&emsp;ğŸ”¹ axios.head(url[, config])</p>\n<p>&emsp;&emsp;ğŸ”¹ axios.post(url[, data[, config]])</p>\n<p>&emsp;&emsp;ğŸ”¹ axios.put(url[, data[, config]])</p>\n<p>&emsp;&emsp;ğŸ”¹ axios.patch(url[, data[, config]])</p>\n<p><br></p>\n<h2 id=\"axios-å‘é€åŸºæœ¬è¯·æ±‚\"><a href=\"#axios-å‘é€åŸºæœ¬è¯·æ±‚\" class=\"headerlink\" title=\"axios å‘é€åŸºæœ¬è¯·æ±‚\"></a>axios å‘é€åŸºæœ¬è¯·æ±‚</h2><p><img src=\"https://qny.aqingya.cn/img/20200807114603.png\" alt=\"\"></p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807115413.png\" alt=\"\"></p>\n<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†axios(config) çš„è¯·æ±‚æ–¹å¼ã€‚</p>\n<p><span style=\"color:red\"><strong>configæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒé»˜è®¤æ˜¯é‡‡ç”¨ GET è¯·æ±‚çš„ï¼Œå½“ç„¶å¦‚æœæƒ³è¦ä½¿ç”¨POSTè¯·æ±‚ï¼Œå¯ä»¥æ·»åŠ  <code>methodï¼šâ€œPOSTâ€</code></strong></span></p>\n<p><span style=\"color:red\"><strong>axios å®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥åœ¨åé¢ä½¿ç”¨then catchç­‰æ–¹æ³•ã€‚</strong></span></p>\n<p><br></p>\n<p>ä½¿ç”¨  axios.get(url[, config]) å‘é€è¯·æ±‚æ¼”ç¤ºã€‚</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807115332.png\" alt=\"\"></p>\n<p><br></p>\n<h2 id=\"å‘é€å¹¶å‘è¯·æ±‚\"><a href=\"#å‘é€å¹¶å‘è¯·æ±‚\" class=\"headerlink\" title=\"å‘é€å¹¶å‘è¯·æ±‚\"></a>å‘é€å¹¶å‘è¯·æ±‚</h2><p>æœ‰æ—¶å€™, æˆ‘ä»¬å¯èƒ½éœ€æ±‚åŒæ—¶å‘é€ä¸¤ä¸ªè¯·æ±‚</p>\n<p>ä½¿ç”¨axios.all, å¯ä»¥æ”¾å…¥å¤šä¸ªè¯·æ±‚çš„æ•°ç»„.</p>\n<p>axios.all([]) è¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½¿ç”¨ axios.spread å¯å°†æ•°ç»„ [res1,res2] å±•å¼€ä¸º res1, res2</p>\n<p><br></p>\n<p>ä½¿ç”¨axios.all()</p>\n<p>ä½¿ç”¨æ ¼å¼ï¼š <code>axios.all([axios(config),axios(config)])</code></p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807134444.png\" alt=\"\"></p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807134521.png\" alt=\"\"></p>\n<p><br></p>\n<p>ä½¿ç”¨ axios.spread å¯å°†æ•°ç»„ [res1,res2] å±•å¼€ä¸º res1, res2 </p>\n<p>ä½¿ç”¨æ ¼å¼ï¼š <code>axios.all([axios(config),axios(config)]).then(axios.spread())</code></p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807134923.png\" alt=\"\"></p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807134943.png\" alt=\"\"></p>\n<p><br></p>\n<h2 id=\"å…¨å±€é…ç½®\"><a href=\"#å…¨å±€é…ç½®\" class=\"headerlink\" title=\"å…¨å±€é…ç½®\"></a><strong>å…¨å±€é…ç½®</strong></h2><p>ğŸ”·åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­, æˆ‘ä»¬çš„BaseURLæ˜¯å›ºå®šçš„</p>\n<p>&emsp;&emsp;ğŸ”¹ äº‹å®ä¸Š, åœ¨å¼€å‘ä¸­å¯èƒ½å¾ˆå¤šå‚æ•°éƒ½æ˜¯å›ºå®šçš„ã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹ è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€äº›æŠ½å–, å°†ä¸€äº›å…¬å…±çš„é…ç½®æŠ½å–å‡ºæ¥ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨axioxçš„å…¨å±€é…ç½®ã€‚</p>\n<p><code>axios.defaults</code></p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807140410.png\" alt=\"\"></p>\n<p><br></p>\n<h2 id=\"å¸¸ç”¨çš„é…ç½®é€‰é¡¹\"><a href=\"#å¸¸ç”¨çš„é…ç½®é€‰é¡¹\" class=\"headerlink\" title=\"å¸¸ç”¨çš„é…ç½®é€‰é¡¹\"></a>å¸¸ç”¨çš„é…ç½®é€‰é¡¹</h2><hr>\n<p>ğŸ”·è¯·æ±‚ç±»å‹</p>\n<p>&emsp;&emsp;ğŸ”¹ method: â€˜getâ€™,</p>\n<p>ğŸ”·URLæŸ¥è¯¢å¯¹è±¡</p>\n<p>&emsp;&emsp;ğŸ”¹ params:{ id: 12 },</p>\n<hr>\n<p>ğŸ”·è¯·æ±‚ç±»å‹</p>\n<p>&emsp;&emsp;ğŸ”¹ method: â€˜postâ€™,</p>\n<p>ğŸ”·request body</p>\n<p>&emsp;&emsp;ğŸ”¹ data: { key: â€˜aaâ€™},          </p>\n<hr>\n<p>æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè¯·æ±‚ç±»å‹çš„getï¼Œåˆ™åé¢æ·»åŠ çš„è¯·æ±‚å‚æ•°åº”è¯¥ä½¿ç”¨çš„æ˜¯  params{ } ã€‚å¦‚æœè¯·æ±‚ç±»å‹çš„postï¼Œåˆ™åé¢æ·»åŠ çš„è¯·æ±‚å‚æ•°åº”è¯¥ä½¿ç”¨çš„æ˜¯  data{ } ã€‚</p>\n<p><br></p>\n<p>ğŸ”·è¯·æ±‚åœ°å€</p>\n<p>&emsp;&emsp;ğŸ”¹ url: â€˜/userâ€™,</p>\n<p>ğŸ”·è¯·æ ¹è·¯å¾„</p>\n<p>&emsp;&emsp;ğŸ”¹ baseURL: â€˜<a href=\"http://www.mt.com/api\">http://www.mt.com/api</a>â€˜,</p>\n<p>ğŸ”·è¶…æ—¶è®¾ç½®s</p>\n<p>&emsp;&emsp;ğŸ”¹ timeout: 1000,</p>\n<p>ğŸ”·è¯·æ±‚å‰çš„æ•°æ®å¤„ç†</p>\n<p>&emsp;&emsp;ğŸ”¹ transformRequest:[function(data){}],</p>\n<p>ğŸ”·è¯·æ±‚åçš„æ•°æ®å¤„ç†</p>\n<p>&emsp;&emsp;ğŸ”¹ transformResponse: [function(data){}],</p>\n<p>ğŸ”·è‡ªå®šä¹‰çš„è¯·æ±‚å¤´</p>\n<p>&emsp;&emsp;ğŸ”¹ headers:{â€˜x-Requested-Withâ€™:â€™XMLHttpRequestâ€™},</p>\n<p>ğŸ”·æŸ¥è¯¢å¯¹è±¡åºåˆ—åŒ–å‡½æ•°</p>\n<p>&emsp;&emsp;ğŸ”¹ paramsSerializer: function(params){ }</p>\n<p>ğŸ”·è·¨åŸŸæ˜¯å¦å¸¦Token</p>\n<p>&emsp;&emsp;ğŸ”¹ withCredentials: false,</p>\n<p>ğŸ”·è‡ªå®šä¹‰è¯·æ±‚å¤„ç†</p>\n<p>&emsp;&emsp;ğŸ”¹ adapter: function(resolve, reject, config){},</p>\n<p>ğŸ”·èº«ä»½éªŒè¯ä¿¡æ¯</p>\n<p>&emsp;&emsp;ğŸ”¹ auth: { uname: â€˜â€™, pwd: â€˜12â€™},</p>\n<p>ğŸ”·å“åº”çš„æ•°æ®æ ¼å¼ json / blob /document /arraybuffer / text / stream</p>\n<p>&emsp;&emsp;ğŸ”¹ responseType: â€˜jsonâ€™,</p>\n<p><br></p>\n<h2 id=\"axios-å®ä¾‹\"><a href=\"#axios-å®ä¾‹\" class=\"headerlink\" title=\"axios å®ä¾‹\"></a>axios å®ä¾‹</h2><p>ğŸ”· ä¸ºä»€ä¹ˆè¦åˆ›å»ºaxiosçš„å®ä¾‹å‘¢?</p>\n<p>&emsp;&emsp;ğŸ”¹ å½“æˆ‘ä»¬ä»axiosæ¨¡å—ä¸­å¯¼å…¥å¯¹è±¡æ—¶, ä½¿ç”¨çš„å®ä¾‹æ˜¯é»˜è®¤çš„å®ä¾‹.</p>\n<p>&emsp;&emsp;ğŸ”¹ å½“ç»™è¯¥å®ä¾‹è®¾ç½®ä¸€äº›é»˜è®¤é…ç½®æ—¶, è¿™äº›é…ç½®å°±è¢«å›ºå®šä¸‹æ¥äº†.</p>\n<p>&emsp;&emsp;ğŸ”¹ ä½†æ˜¯åç»­å¼€å‘ä¸­, æŸäº›é…ç½®å¯èƒ½ä¼šä¸å¤ªä¸€æ ·.</p>\n<p>&emsp;&emsp;ğŸ”¹ æ¯”å¦‚æŸäº›è¯·æ±‚éœ€è¦ä½¿ç”¨ç‰¹å®šçš„<strong>baseURL</strong>æˆ–è€…<strong>timeout</strong>æˆ–è€…<strong>content-Type</strong>ç­‰.</p>\n<p>&emsp;&emsp;ğŸ”¹ è¿™ä¸ªæ—¶å€™, æˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºæ–°çš„å®ä¾‹, å¹¶ä¸”ä¼ å…¥å±äºè¯¥å®ä¾‹çš„é…ç½®ä¿¡æ¯.</p>\n<p>æ‰€ä»¥å½“æˆ‘ä»¬çš„ä¸šåŠ¡æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œè¯·æ±‚æ¥å£æ¯”è¾ƒå¤šï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸Šé¢çš„å…¨å±€é…ç½®å°±ä¸è¡Œäº†ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±è¦ä½¿ç”¨axioså®ä¾‹äº†ã€‚</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807163535.png\" alt=\"\"></p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807163548.png\" alt=\"\"></p>\n<p><br></p>\n<h2 id=\"ç½‘ç»œè¯·æ±‚æ¨¡å—çš„å°è£…\"><a href=\"#ç½‘ç»œè¯·æ±‚æ¨¡å—çš„å°è£…\" class=\"headerlink\" title=\"ç½‘ç»œè¯·æ±‚æ¨¡å—çš„å°è£…\"></a>ç½‘ç»œè¯·æ±‚æ¨¡å—çš„å°è£…</h2><p>æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦axiosè¿›è¡Œå°è£…ï¼Ÿ</p>\n<p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„ axios æœ‰ä¸€å¤©ä¸è¿›è¡Œäº†ç»´æŠ¤ï¼Œæˆ–è€…å‡ºç°é‡å¤§çš„bug ï¼Œæˆ‘ä»¬éœ€è¦æ¢å…¶ä»–çš„ç¬¬ä¸‰æ–¹ç½‘ç»œè¯·æ±‚æ¡†æ¶ã€‚é‚£ä¹ˆæˆ‘ä»¬éœ€è¦åœ¨æ¯ä¸€ä¸ªç»„ä»¶ä¸­éƒ½éœ€è¦ä¿®æ”¹ï¼Œå¾ˆæ˜¯ä¸å¥½ã€‚æ‰€ä»¥æˆ‘ä»¬å¯¹ç½‘ç»œè¯·æ±‚æ¨¡å—è¿›è¡Œå°è£…ï¼Œå³ä½¿æœ‰ä¸€ä¸ªæˆ‘ä»¬éœ€è¦æ”¹æ¢å…¶ä»–çš„ç¬¬ä¸‰æ–¹ç½‘ç»œè¯·æ±‚æ¡†æ¶ï¼Œå°±åªå¯¹æˆ‘ä»¬çš„ç½‘ç»œè¯·æ±‚æ¨¡å—è¿›å»ä¿®æ”¹å³å¯ã€‚</p>\n<p><br></p>\n<p>åˆ›å»ºä¸€ä¸ªnetworkæ–‡ä»¶å¤¹ã€‚è¿™é‡Œé¢æ”¾å¯¹ç½‘ç»œå°è£…ç›¸å…³çš„æ–‡ä»¶ã€‚</p>\n<p>åˆ›å»ºrequest.js</p>\n<p><br></p>\n<p>å°è£…ä¸€ï¼š</p>\n<p>ä½¿ç”¨å›è°ƒå‡½æ•°ã€‚</p>\n<p>request.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">&#x27;axios&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\">config, success, failure</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// 1.åˆ›å»ºå®ä¾‹</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> instance = axios.create(&#123;</span><br><span class=\"line\">      <span class=\"attr\">baseURL</span>: <span class=\"string\">&#x27;http://111.111.111.111:8000&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">timeout</span>: <span class=\"number\">5000</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// 2ã€å‘é€ç½‘ç»œè¯·æ±‚è¯·æ±‚</span></span><br><span class=\"line\">  instance(config)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      success(res)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\"><span class=\"params\">rej</span> =&gt;</span> &#123;</span><br><span class=\"line\">      failure(rej)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä½¿ç”¨æ¨¡å—ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; request &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./newwork/request&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">request(&#123;</span><br><span class=\"line\">  <span class=\"attr\">url</span>: <span class=\"string\">&#x27;home/multidata&#x27;</span></span><br><span class=\"line\">&#125;, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">request(&#123;</span><br><span class=\"line\">  <span class=\"attr\">url</span>: <span class=\"string\">&quot;api/z8/home/data&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">params</span>: &#123; <span class=\"attr\">type</span>: <span class=\"string\">&#x27;pop&#x27;</span>, <span class=\"attr\">page</span>: <span class=\"number\">1</span> &#125;</span><br><span class=\"line\">&#125;, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<p>å°è£…äºŒï¼š</p>\n<p>ä½¿ç”¨å›è°ƒå‡½æ•°ã€‚</p>\n<p>request.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">&#x27;axios&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\">config</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// 1.åˆ›å»ºå®ä¾‹</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> instance = axios.create(&#123;</span><br><span class=\"line\">      <span class=\"attr\">baseURL</span>: <span class=\"string\">&#x27;http://111.111.111.111:8000&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">timeout</span>: <span class=\"number\">5000</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 2ã€å‘é€ç½‘ç»œè¯·æ±‚è¯·æ±‚</span></span><br><span class=\"line\">  instance(config.baseConfig)</span><br><span class=\"line\">    .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      config.success(res)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .catch(<span class=\"function\"><span class=\"params\">rej</span> =&gt;</span> &#123;</span><br><span class=\"line\">      fonfig.failure(rej)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä½¿ç”¨æ¨¡å—ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">&#x27;axios&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">request(&#123;</span><br><span class=\"line\">  <span class=\"attr\">baseConfig</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">url</span>: <span class=\"string\">&#x27;/home/multidata&#x27;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">success</span>(<span class=\"params\">res</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">failure</span>(<span class=\"params\">rej</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(rej);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<p>å°è£…ä¸‰ï¼š</p>\n<p>ä½¿ç”¨Promiseã€‚</p>\n<p>request.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">&#x27;axios&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\">config</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1.åˆ›å»ºå®ä¾‹</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> instance = axios.create(&#123;</span><br><span class=\"line\">      <span class=\"attr\">baseURL</span>: <span class=\"string\">&#x27;http://111.111.111.111:8000&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">timeout</span>: <span class=\"number\">5000</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 2ã€å‘é€ç½‘ç»œè¯·æ±‚è¯·æ±‚</span></span><br><span class=\"line\">    instance(config)</span><br><span class=\"line\">      .then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">        resolve(res)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\"><span class=\"params\">rej</span> =&gt;</span> &#123;</span><br><span class=\"line\">        reject(rej)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä½¿ç”¨æ¨¡å—ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; request &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./newwork/request&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">request(&#123;</span><br><span class=\"line\">  <span class=\"attr\">url</span>: <span class=\"string\">&#x27;home/multidata&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"params\">rej</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(rej);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<p>å°è£…å››ï¼šï¼ˆæœ€ç»ˆæ–¹æ¡ˆï¼‰</p>\n<p>ä½¿ç”¨Promiseã€‚</p>\n<p>request.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">&#x27;axios&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\">config</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 1.åˆ›å»ºå®ä¾‹</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> instance = axios.create(&#123;</span><br><span class=\"line\">      <span class=\"attr\">baseURL</span>: <span class=\"string\">&#x27;http://111.111.111.111:8000&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">timeout</span>: <span class=\"number\">5000</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// 2ã€å‘é€ç½‘ç»œè¯·æ±‚è¯·æ±‚</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// axios å®ä¾‹æœ¬èº«è¿”å›æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> instance(config)</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>ä½¿ç”¨æ¨¡å—ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; request &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./newwork/request&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">request(&#123;</span><br><span class=\"line\">  <span class=\"attr\">url</span>: <span class=\"string\">&#x27;home/multidata&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(res);</span><br><span class=\"line\">&#125;).catch(<span class=\"function\"><span class=\"params\">rej</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(rej);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<h2 id=\"axios-æ‹¦æˆªå™¨çš„ä½¿ç”¨\"><a href=\"#axios-æ‹¦æˆªå™¨çš„ä½¿ç”¨\" class=\"headerlink\" title=\"axios æ‹¦æˆªå™¨çš„ä½¿ç”¨\"></a>axios æ‹¦æˆªå™¨çš„ä½¿ç”¨</h2><p>axiosæä¾›äº†æ‹¦æˆªå™¨ï¼Œç”¨äºæˆ‘ä»¬åœ¨å‘é€æ¯æ¬¡è¯·æ±‚æˆ–è€…å¾—åˆ°ç›¸åº”åï¼Œè¿›è¡Œå¯¹åº”çš„å¤„ç†ã€‚</p>\n<p><br></p>\n<h3 id=\"axios-è¯·æ±‚æ‹¦æˆªå™¨\"><a href=\"#axios-è¯·æ±‚æ‹¦æˆªå™¨\" class=\"headerlink\" title=\"axios è¯·æ±‚æ‹¦æˆªå™¨\"></a>axios è¯·æ±‚æ‹¦æˆªå™¨</h3><p>ğŸ”· ä¸ºä»€ä¹ˆè¦æ‹¦æˆªè¯·æ±‚å‘ã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹ æˆ‘ä»¬å¯¹è¯·æ±‚çš„configè¿›è¡Œä¸€äº›ä¿®æ”¹ã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹ æ¯”å¦‚configä¸­çš„ä¸€äº›ä¿¡æ¯ä¸ç¬¦åˆæœåŠ¡å™¨çš„è¦æ±‚ã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹ æ¯”å¦‚æ¯æ¬¡å‘é€ç½‘ç»œè¯·æ±‚çš„æ—¶å€™ï¼Œéƒ½å¸Œæœ›åœ¨ç•Œé¢ä¸­æ˜¾ç¤ºä¸€ä¸ªè¯·æ±‚çš„å›¾æ ‡ã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹ æ¯”å¦‚æŸäº›ç½‘ç»œè¯·æ±‚ï¼ˆæ¯”å¦‚ ç™»é™†ï¼ˆæºå¸¦tokenï¼‰ï¼‰ï¼Œå¿…é¡»æºå¸¦ä¸€äº›ç‰¹æ®Šçš„ä¿¡æ¯ã€‚</p>\n<p><code>instance.interceptors.request.use(å‚æ•°ä¸€ï¼Œå‚æ•°äºŒ)</code> ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œæ‹¦æˆªè¯·æ±‚æˆåŠŸå‡½æ•°ï¼Œå’Œæ‹¦æˆªè¯·æ±‚å¤±è´¥å‡½æ•°ã€‚</p>\n<p>æ³¨æ„ï¼šæˆ‘ä»¬æ‹¦æˆªä¹‹åï¼Œå¯¹è¯·æ±‚åšå®Œä¸€ç³»åˆ—ä¿®æ”¹ï¼Œæˆ‘ä»¬è¦è¿”å›è¯·æ±‚ï¼Œä¸ç„¶åé¢æˆ‘ä»¬è¯·æ±‚ä¸åˆ°æ•°æ®ã€‚</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807202022.png\" alt=\"\"></p>\n<p><br></p>\n<p>ğŸ”· è¯·æ±‚æ‹¦æˆªå¯ä»¥åšåˆ°çš„äº‹æƒ…ï¼š</p>\n<p>&emsp;&emsp;ğŸ”¹ è¯·æ±‚æ‹¦æˆªä¸­é”™è¯¯æ‹¦æˆªè¾ƒå°‘ï¼Œé€šå¸¸éƒ½æ˜¯é…ç½®ç›¸å…³çš„æ‹¦æˆªã€‚</p>\n<p>&emsp;&emsp;ğŸ”¹ å¯èƒ½çš„æ‹¦æˆªçš„é”™è¯¯ï¼šæ¯”å¦‚è¯·æ±‚è¶…æ—¶ï¼Œå¯ä»¥å°†é¡µé¢è·³è½¬åˆ°ä¸€ä¸ªé”™è¯¯é¡µé¢ä¸­ã€‚</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807203844.png\" alt=\"\"></p>\n<p><br></p>\n<h3 id=\"axios-å“åº”æ‹¦æˆªå™¨\"><a href=\"#axios-å“åº”æ‹¦æˆªå™¨\" class=\"headerlink\" title=\"axios å“åº”æ‹¦æˆªå™¨\"></a>axios å“åº”æ‹¦æˆªå™¨</h3><p><code>instance.interceptors.response.use()</code> å“åº”æ‹¦æˆªä¹Ÿæ˜¯ä¸¤ä¸ªå‚æ•°ã€‚æ‹¦æˆªå“åº”æˆåŠŸå‡½æ•°ï¼Œå’Œæ‹¦æˆªå“åº”å¤±è´¥å‡½æ•°ã€‚</p>\n<p>åŒæ ·æˆ‘ä»¬æ‹¦æˆªåˆ°å“åº”ä¹‹åï¼Œè¦è¿”å›å“åº”ï¼Œé€šå¸¸è¿”å›<code>return response.data</code> å³å¯ï¼Œå› ä¸ºæˆ‘ä»¬åªè¦æ•°æ®ã€‚</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807203333.png\" alt=\"\"></p>\n<p><br></p>\n<p>ğŸ”· å“åº”æ‹¦æˆªä¸­å®Œæˆçš„äº‹æƒ…ï¼š</p>\n<p>&emsp;&emsp;ğŸ”¹ å“åº”çš„æˆåŠŸæ‹¦æˆªä¸­ï¼Œä¸»è¦æ˜¯å¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤ã€‚</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807204036.png\" alt=\"\"></p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807204024.png\" alt=\"\"></p>\n<p><br></p>\n<p>&emsp;&emsp;ğŸ”¹  å“åº”çš„å¤±è´¥æ‹¦æˆªä¸­ï¼Œå¯ä»¥æ ¹æ®statusåˆ¤æ–­æŠ¥é”™çš„é”™è¯¯ç ï¼Œè·³è½¬åˆ°ä¸åŒçš„é”™è¯¯æç¤ºé¡µé¢ã€‚</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200807204128.png\" alt=\"\"></p>\n<p><br><br></p>\n<p>request.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">&#x27;axios&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">request</span>(<span class=\"params\">config</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 1.åˆ›å»ºå®ä¾‹</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> instance = axios.create(&#123;</span><br><span class=\"line\">      <span class=\"attr\">baseURL</span>: <span class=\"string\">&#x27;http://11.11.11.11:8000&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">timeout</span>: <span class=\"number\">5000</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// 2.è¯·æ±‚æ‹¦æˆª</span></span><br><span class=\"line\">  instance.interceptors.request.use(<span class=\"function\"><span class=\"params\">config</span> =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> config</span><br><span class=\"line\">  &#125;, <span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> err</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// å“åº”æ‹¦æˆª</span></span><br><span class=\"line\">  instance.interceptors.response.use(<span class=\"function\"><span class=\"params\">response</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> response.data</span><br><span class=\"line\">    &#125;, <span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> err</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// 3ã€å‘é€ç½‘ç»œè¯·æ±‚è¯·æ±‚</span></span><br><span class=\"line\">    <span class=\"comment\">// axios å®ä¾‹è¿”å›æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> instance(config)</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><br></p>\n<p><br></p>\n<p><br></p>","categories":[{"name":"Vue","path":"api/categories/Vue.json"}],"tags":[{"name":"AJAX","path":"api/tags/AJAX.json"},{"name":"axios","path":"api/tags/axios.json"},{"name":"Vue","path":"api/tags/Vue.json"},{"name":"è¯·æ±‚æ¨¡å—å°è£…","path":"api/tags/è¯·æ±‚æ¨¡å—å°è£….json"},{"name":"æ‹¦æˆªå™¨","path":"api/tags/æ‹¦æˆªå™¨.json"}]}