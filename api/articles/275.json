{"title":"uniapp：通知上一页刷新，有这么几个方式；常用于详情返回列表","slug":"275","date":"2024-08-15T06:59:20.000Z","updated":"2024-08-15T07:15:44.877Z","comments":true,"path":"api/articles/275.json","excerpt":null,"covers":["https://i-blog.csdnimg.cn/blog_migrate/a71611828b5edf071a88cfe98f8983b7.png","https://cdn.toonice.com.cn/202408151506627.png","https://cdn.toonice.com.cn/202408151512847.png","https://cdn.toonice.com.cn/202408151513270.png","https://cdn.toonice.com.cn/202408151514292.png"],"content":"<p>在使用uniapp开发的过程中，我相信，我们都一定遇见过如下的场景：</p>\n<p>进入了一个列表页，列表页进入详情页，在详情页进行了一些操作，比如，删除，修改，编辑，提交，成功之后返回到列表页，那么这个时候，如果我们的列表页不进行数据的刷新，就会给用户一种错觉，我刚才进行操作的那条数据会不会没成功，我们下拉刷新下列表，这个数据就变成最新的了，这个是很常见的一个交互场景，那么如何不让用户进行下拉刷新或者重新进入列表页的操作，我提供几种比较常用的做法！</p>\n<p><strong>onShow：简单粗暴，但是却有缺陷</strong><br>使用onShow可能是最简单的写法 ，我们只需要将请求的方法，放在onShow里面执行即可，onShow是这么的一个生命周期</p>\n<p><img src=\"https://i-blog.csdnimg.cn/blog_migrate/a71611828b5edf071a88cfe98f8983b7.png\" alt=\"img\"></p>\n<p><img src=\"https://cdn.toonice.com.cn/202408151506627.png\"></p>\n<p>用法超级简单，但是却有着比较大的缺陷，例如：我点进了详情，但是我什么都不做，而后返回列表页，这个时候，依然进行了一个getList方法的执行，重新进行了请求，合理吗？很显然不合理！怎么办？</p>\n<p>页面通讯：uni.$emit, uni.$on<br>这个可能是我用的最多的方式，页面简介 | uni-app官网</p>\n<p>用法其实也比较简单，在列表页中的onLoad周期中进行事件的监听，在详情页面中进行emit事件的发射，如下：</p>\n<p>list列表页</p>\n<p><em><strong>需要注意的一点是，需要在页面卸载的周期内，把自定义的事件off掉</strong></em></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">\t<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">\t\t<span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;good&quot;</span> <span class=\"attr\">v-for</span>=<span class=\"string\">&quot;item in 10&quot;</span> <span class=\"attr\">:key</span>=<span class=\"string\">&quot;item&quot;</span> @<span class=\"attr\">click</span>=<span class=\"string\">&quot;nav&quot;</span>&gt;</span>&#123;&#123; item &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">\t<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t<span class=\"function\"><span class=\"title\">onLoad</span>(<span class=\"params\"></span>)</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t<span class=\"built_in\">this</span>.getList();</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\tuni.$on(<span class=\"string\">&#x27;handleSuccess&#x27;</span>, <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;details发出的值===&gt;&#x27;</span>, data);</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t<span class=\"keyword\">if</span> (data) &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t\t<span class=\"built_in\">this</span>.getList();</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t&#125;);</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t&#125;,</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t<span class=\"function\"><span class=\"title\">onUnload</span>(<span class=\"params\"></span>)</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\tuni.$off(<span class=\"string\">&#x27;handleSuccess&#x27;</span>);</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t&#125;,</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t<span class=\"attr\">methods</span>: &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t<span class=\"keyword\">async</span> <span class=\"function\"><span class=\"title\">getList</span>(<span class=\"params\"></span>)</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t<span class=\"comment\">// .....进行一下列表请求吧</span></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t&#125;,</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t<span class=\"function\"><span class=\"title\">nav</span>(<span class=\"params\"></span>)</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\tuni.navigateTo(&#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t\t<span class=\"attr\">url</span>: <span class=\"string\">&#x27;/pages/details/details&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t&#125;);</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">&#125;;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;scss&quot;</span> <span class=\"attr\">scoped</span>&gt;</span><span class=\"css\"></span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\"><span class=\"selector-class\">.good</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\">\t<span class=\"attribute\">height</span>: <span class=\"number\">100</span>rpx;</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\">\t<span class=\"attribute\">background-color</span>: <span class=\"number\">#18b566</span>;</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\">\t<span class=\"attribute\">margin-bottom</span>: <span class=\"number\">30</span>rpx;</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\">&#125;</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<p>details详情页面</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">\t<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">u-button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;primary&quot;</span> @<span class=\"attr\">click</span>=<span class=\"string\">&quot;submit&quot;</span>&gt;</span>提交<span class=\"tag\">&lt;/<span class=\"name\">u-button</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t<span class=\"attr\">methods</span>: &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t<span class=\"function\"><span class=\"title\">submit</span>(<span class=\"params\"></span>)</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\tuni.$emit(<span class=\"string\">&#x27;handleSuccess&#x27;</span>, <span class=\"literal\">true</span>);</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">&#125;;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<p>页面展示：</p>\n<p><img src=\"https://cdn.toonice.com.cn/202408151512847.png\"></p>\n<h4 id=\"uni-navigateTo-：events的使用\"><a href=\"#uni-navigateTo-：events的使用\" class=\"headerlink\" title=\"uni.navigateTo()：events的使用\"></a><strong>uni.navigateTo()：events的使用</strong></h4><p>可能啊，我们大多数都只是使用这个路由api进行页面跳转，向下个页面传递个参数之类的，其实如果认证观看文档，会发现这个路由api有妙用；<a href=\"https://uniapp.dcloud.io/api/router.html#navigateto\">uni.navigateTo(OBJECT) | uni-app官网</a> </p>\n<p><img src=\"https://cdn.toonice.com.cn/202408151513270.png\"></p>\n<p> list：列表页</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">\t<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">\t\t<span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;good&quot;</span> <span class=\"attr\">v-for</span>=<span class=\"string\">&quot;item in 10&quot;</span> <span class=\"attr\">:key</span>=<span class=\"string\">&quot;item&quot;</span> @<span class=\"attr\">click</span>=<span class=\"string\">&quot;nav&quot;</span>&gt;</span>&#123;&#123; item &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">\t<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t<span class=\"function\"><span class=\"title\">onLoad</span>(<span class=\"params\"></span>)</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t<span class=\"built_in\">this</span>.getList();</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t&#125;,</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t<span class=\"attr\">methods</span>: &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t<span class=\"keyword\">async</span> <span class=\"function\"><span class=\"title\">getList</span>(<span class=\"params\"></span>)</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t<span class=\"comment\">// .....进行一下列表请求吧</span></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t&#125;,</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t<span class=\"function\"><span class=\"title\">nav</span>(<span class=\"params\"></span>)</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\tuni.navigateTo(&#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t\t<span class=\"attr\">url</span>: <span class=\"string\">&#x27;/pages/details/details&#x27;</span>,</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t\t<span class=\"attr\">events</span>: &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t\t\t<span class=\"attr\">handleSuccess</span>: <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;details发出的值===&gt;&#x27;</span>, data);</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t\t\t\t<span class=\"keyword\">if</span> (data) <span class=\"built_in\">this</span>.getList();</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t\t\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t&#125;);</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">&#125;;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;scss&quot;</span> <span class=\"attr\">scoped</span>&gt;</span><span class=\"css\"></span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\"><span class=\"selector-class\">.good</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\">\t<span class=\"attribute\">height</span>: <span class=\"number\">100</span>rpx;</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\">\t<span class=\"attribute\">background-color</span>: <span class=\"number\">#18b566</span>;</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\">\t<span class=\"attribute\">margin-bottom</span>: <span class=\"number\">30</span>rpx;</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\">&#125;</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<p>details:详情页</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">\t<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">u-button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;primary&quot;</span> @<span class=\"attr\">click</span>=<span class=\"string\">&quot;submit&quot;</span>&gt;</span>提交<span class=\"tag\">&lt;/<span class=\"name\">u-button</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t<span class=\"attr\">methods</span>: &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t<span class=\"function\"><span class=\"title\">submit</span>(<span class=\"params\"></span>)</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t<span class=\"keyword\">const</span> eventChannel = <span class=\"built_in\">this</span>.getOpenerEventChannel();</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t<span class=\"built_in\">console</span>.log(eventChannel);</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\teventChannel.emit(<span class=\"string\">&#x27;handleSuccess&#x27;</span>, <span class=\"literal\">true</span>);</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">&#125;;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<p> 通过打印details中的eventChannel发现它长这个样子</p>\n<p><img src=\"https://cdn.toonice.com.cn/202408151514292.png\"></p>\n<p>如此使用便可！</p>\n<p>题外话：我们还可以传递给下个页面更多的参数</p>\n<p>列表页在success函数中发出了一个事件sendForm</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">uni.navigateTo(&#123;</span><br><span class=\"line\">\t<span class=\"attr\">url</span>: <span class=\"string\">&#x27;/pages/details/details&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">events</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">handleSuccess</span>: <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t   <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;details发出的值===&gt;&#x27;</span>, data);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (data) <span class=\"built_in\">this</span>.getList();</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t<span class=\"attr\">success</span>: <span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tres.eventChannel.emit(<span class=\"string\">&#x27;sendForm&#x27;</span>, &#123; <span class=\"attr\">data</span>: <span class=\"string\">&#x27;111222&#x27;</span> &#125;);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>详情页，拿到这个sendForm事件传递出的数据</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"title\">onLoad</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> eventChannel = <span class=\"built_in\">this</span>.getOpenerEventChannel();</span><br><span class=\"line\">\teventChannel.on(<span class=\"string\">&#x27;sendForm&#x27;</span>, <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">\t&#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<p>如此，基本上就是如何使上一页刷新的几个方法，赶紧选一种用吧！</p>\n","more":"<p>在使用uniapp开发的过程中，我相信，我们都一定遇见过如下的场景：</p>\n<p>进入了一个列表页，列表页进入详情页，在详情页进行了一些操作，比如，删除，修改，编辑，提交，成功之后返回到列表页，那么这个时候，如果我们的列表页不进行数据的刷新，就会给用户一种错觉，我刚才进行操作的那条数据会不会没成功，我们下拉刷新下列表，这个数据就变成最新的了，这个是很常见的一个交互场景，那么如何不让用户进行下拉刷新或者重新进入列表页的操作，我提供几种比较常用的做法！</p>\n<p><strong>onShow：简单粗暴，但是却有缺陷</strong><br>使用onShow可能是最简单的写法 ，我们只需要将请求的方法，放在onShow里面执行即可，onShow是这么的一个生命周期</p>\n<p><img src=\"https://i-blog.csdnimg.cn/blog_migrate/a71611828b5edf071a88cfe98f8983b7.png\" alt=\"img\"></p>\n<p><img src=\"https://cdn.toonice.com.cn/202408151506627.png\"></p>\n<p>用法超级简单，但是却有着比较大的缺陷，例如：我点进了详情，但是我什么都不做，而后返回列表页，这个时候，依然进行了一个getList方法的执行，重新进行了请求，合理吗？很显然不合理！怎么办？</p>\n<p>页面通讯：uni.$emit, uni.$on<br>这个可能是我用的最多的方式，页面简介 | uni-app官网</p>\n<p>用法其实也比较简单，在列表页中的onLoad周期中进行事件的监听，在详情页面中进行emit事件的发射，如下：</p>\n<p>list列表页</p>\n<p><em><strong>需要注意的一点是，需要在页面卸载的周期内，把自定义的事件off掉</strong></em></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">\t<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">\t\t<span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;good&quot;</span> <span class=\"attr\">v-for</span>=<span class=\"string\">&quot;item in 10&quot;</span> <span class=\"attr\">:key</span>=<span class=\"string\">&quot;item&quot;</span> @<span class=\"attr\">click</span>=<span class=\"string\">&quot;nav&quot;</span>&gt;</span>&#123;&#123; item &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">\t<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t<span class=\"function\"><span class=\"title\">onLoad</span>(<span class=\"params\"></span>)</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t<span class=\"built_in\">this</span>.getList();</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\tuni.$on(<span class=\"string\">&#x27;handleSuccess&#x27;</span>, <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;details发出的值===&gt;&#x27;</span>, data);</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t<span class=\"keyword\">if</span> (data) &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t\t<span class=\"built_in\">this</span>.getList();</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t&#125;);</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t&#125;,</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t<span class=\"function\"><span class=\"title\">onUnload</span>(<span class=\"params\"></span>)</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\tuni.$off(<span class=\"string\">&#x27;handleSuccess&#x27;</span>);</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t&#125;,</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t<span class=\"attr\">methods</span>: &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t<span class=\"keyword\">async</span> <span class=\"function\"><span class=\"title\">getList</span>(<span class=\"params\"></span>)</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t<span class=\"comment\">// .....进行一下列表请求吧</span></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t&#125;,</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t<span class=\"function\"><span class=\"title\">nav</span>(<span class=\"params\"></span>)</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\tuni.navigateTo(&#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t\t<span class=\"attr\">url</span>: <span class=\"string\">&#x27;/pages/details/details&#x27;</span></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t&#125;);</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">&#125;;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;scss&quot;</span> <span class=\"attr\">scoped</span>&gt;</span><span class=\"css\"></span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\"><span class=\"selector-class\">.good</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\">\t<span class=\"attribute\">height</span>: <span class=\"number\">100</span>rpx;</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\">\t<span class=\"attribute\">background-color</span>: <span class=\"number\">#18b566</span>;</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\">\t<span class=\"attribute\">margin-bottom</span>: <span class=\"number\">30</span>rpx;</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\">&#125;</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<p>details详情页面</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">\t<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">u-button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;primary&quot;</span> @<span class=\"attr\">click</span>=<span class=\"string\">&quot;submit&quot;</span>&gt;</span>提交<span class=\"tag\">&lt;/<span class=\"name\">u-button</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t<span class=\"attr\">methods</span>: &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t<span class=\"function\"><span class=\"title\">submit</span>(<span class=\"params\"></span>)</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\tuni.$emit(<span class=\"string\">&#x27;handleSuccess&#x27;</span>, <span class=\"literal\">true</span>);</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">&#125;;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<p>页面展示：</p>\n<p><img src=\"https://cdn.toonice.com.cn/202408151512847.png\"></p>\n<h4 id=\"uni-navigateTo-：events的使用\"><a href=\"#uni-navigateTo-：events的使用\" class=\"headerlink\" title=\"uni.navigateTo()：events的使用\"></a><strong>uni.navigateTo()：events的使用</strong></h4><p>可能啊，我们大多数都只是使用这个路由api进行页面跳转，向下个页面传递个参数之类的，其实如果认证观看文档，会发现这个路由api有妙用；<a href=\"https://uniapp.dcloud.io/api/router.html#navigateto\">uni.navigateTo(OBJECT) | uni-app官网</a> </p>\n<p><img src=\"https://cdn.toonice.com.cn/202408151513270.png\"></p>\n<p> list：列表页</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">\t<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">\t\t<span class=\"tag\">&lt;<span class=\"name\">view</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;good&quot;</span> <span class=\"attr\">v-for</span>=<span class=\"string\">&quot;item in 10&quot;</span> <span class=\"attr\">:key</span>=<span class=\"string\">&quot;item&quot;</span> @<span class=\"attr\">click</span>=<span class=\"string\">&quot;nav&quot;</span>&gt;</span>&#123;&#123; item &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">\t<span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t<span class=\"function\"><span class=\"title\">onLoad</span>(<span class=\"params\"></span>)</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t<span class=\"built_in\">this</span>.getList();</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t&#125;,</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t<span class=\"attr\">methods</span>: &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t<span class=\"keyword\">async</span> <span class=\"function\"><span class=\"title\">getList</span>(<span class=\"params\"></span>)</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t<span class=\"comment\">// .....进行一下列表请求吧</span></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t&#125;,</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t<span class=\"function\"><span class=\"title\">nav</span>(<span class=\"params\"></span>)</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\tuni.navigateTo(&#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t\t<span class=\"attr\">url</span>: <span class=\"string\">&#x27;/pages/details/details&#x27;</span>,</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t\t<span class=\"attr\">events</span>: &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t\t\t<span class=\"attr\">handleSuccess</span>: <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t\t\t\t<span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;details发出的值===&gt;&#x27;</span>, data);</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t\t\t\t<span class=\"keyword\">if</span> (data) <span class=\"built_in\">this</span>.getList();</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t\t\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t&#125;);</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">&#125;;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;scss&quot;</span> <span class=\"attr\">scoped</span>&gt;</span><span class=\"css\"></span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\"><span class=\"selector-class\">.good</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\">\t<span class=\"attribute\">height</span>: <span class=\"number\">100</span>rpx;</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\">\t<span class=\"attribute\">background-color</span>: <span class=\"number\">#18b566</span>;</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\">\t<span class=\"attribute\">margin-bottom</span>: <span class=\"number\">30</span>rpx;</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\">&#125;</span></span></span><br><span class=\"line\"><span class=\"css\"><span class=\"xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<p>details:详情页</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">\t<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">view</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">u-button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;primary&quot;</span> @<span class=\"attr\">click</span>=<span class=\"string\">&quot;submit&quot;</span>&gt;</span>提交<span class=\"tag\">&lt;/<span class=\"name\">u-button</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">view</span>&gt;</span></span></span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"javascript\"></span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t<span class=\"attr\">methods</span>: &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t<span class=\"function\"><span class=\"title\">submit</span>(<span class=\"params\"></span>)</span> &#123;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t<span class=\"keyword\">const</span> eventChannel = <span class=\"built_in\">this</span>.getOpenerEventChannel();</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\t<span class=\"built_in\">console</span>.log(eventChannel);</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t\teventChannel.emit(<span class=\"string\">&#x27;handleSuccess&#x27;</span>, <span class=\"literal\">true</span>);</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">\t&#125;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\">&#125;;</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"xml\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n\n<p> 通过打印details中的eventChannel发现它长这个样子</p>\n<p><img src=\"https://cdn.toonice.com.cn/202408151514292.png\"></p>\n<p>如此使用便可！</p>\n<p>题外话：我们还可以传递给下个页面更多的参数</p>\n<p>列表页在success函数中发出了一个事件sendForm</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">uni.navigateTo(&#123;</span><br><span class=\"line\">\t<span class=\"attr\">url</span>: <span class=\"string\">&#x27;/pages/details/details&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">events</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">handleSuccess</span>: <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\t   <span class=\"built_in\">console</span>.log(<span class=\"string\">&#x27;details发出的值===&gt;&#x27;</span>, data);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (data) <span class=\"built_in\">this</span>.getList();</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t<span class=\"attr\">success</span>: <span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\tres.eventChannel.emit(<span class=\"string\">&#x27;sendForm&#x27;</span>, &#123; <span class=\"attr\">data</span>: <span class=\"string\">&#x27;111222&#x27;</span> &#125;);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>详情页，拿到这个sendForm事件传递出的数据</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"title\">onLoad</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> eventChannel = <span class=\"built_in\">this</span>.getOpenerEventChannel();</span><br><span class=\"line\">\teventChannel.on(<span class=\"string\">&#x27;sendForm&#x27;</span>, <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">\t\t<span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">\t&#125;);</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<p>如此，基本上就是如何使上一页刷新的几个方法，赶紧选一种用吧！</p>\n","categories":[{"name":"uniapp","path":"api/categories/uniapp.json"}],"tags":[{"name":"uniapp","path":"api/tags/uniapp.json"}]}