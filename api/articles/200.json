{"title":"uniapp开发，APP打包Android平台签名证书(.keystore)","slug":"200","date":"2022-03-06T09:01:36.000Z","updated":"2022-07-29T04:22:04.783Z","comments":true,"path":"api/articles/200.json","excerpt":null,"covers":["https://qny.aqingya.cn/img/20220306170427.png","https://qny.aqingya.cn/img/20220306170548.png","https://qny.aqingya.cn/img/20220306170756.png","https://qny.aqingya.cn/img/20220306170903.png"],"content":"<p>刚开始我更加官方的步骤生成证书，但是报错： 证书不是有效的keystore文件，经排查。</p>\n<p>是jdk的问题，最终使用这个jdk生成了合格的证书</p>\n<p>百度网盘地址： </p>\n<p>链接：<code>https://pan.baidu.com/s/1GWjaRJW0At70D87VxPYUBg</code><br>提取码：qido</p>\n<p>1、安装完成后打开目录</p>\n<p><img src=\"https://qny.aqingya.cn/img/20220306170427.png\" alt=\"\"></p>\n<p>2、添加环境变量：</p>\n<p><img src=\"https://qny.aqingya.cn/img/20220306170548.png\" alt=\"\"></p>\n<p>3、生成签名证书<br>使用keytool -genkey命令生成证书：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keytool -genkey -alias ceshi -keyalg RSA -keysize 2048 -validity 36500 -keystore ceshi.keystore</span><br></pre></td></tr></table></figure>\n<p>或者：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keytool -importkeystore -srckeystore wuzhiguaang.keystore -destkeystore wuzhiguaang.keystore -deststoretype pkcs12</span><br></pre></td></tr></table></figure>\n<ul>\n<li>ceshi是证书别名，可修改为自己想设置的字符，建议使用英文字母和数字</li>\n<li>ceshi.keystore是证书文件名称，可修改为自己想设置的文件名称，也可以指定完整文件路径</li>\n<li>36500是证书的有效期，表示100年有效期，单位天，建议时间设置长一点，避免证书过期</li>\n</ul>\n<p>回车后会提示：</p>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  Enter keystore password:  //输入证书文件密码，输入完成回车  </span><br><span class=\"line\">Re-enter new password:   //再次输入证书文件密码，输入完成回车  </span><br><span class=\"line\">What is your first and last name?  </span><br><span class=\"line\"></span><br><span class=\"line\">[Unknown]:  //输入名字和姓氏，输入完成回车</span><br><span class=\"line\"></span><br><span class=\"line\">What is the name of your organizational unit?  </span><br><span class=\"line\"></span><br><span class=\"line\">[Unknown]:  //输入组织单位名称，输入完成回车</span><br><span class=\"line\"></span><br><span class=\"line\">What is the name of your organization?  </span><br><span class=\"line\"></span><br><span class=\"line\">[Unknown]:  //输入组织名称，输入完成回车</span><br><span class=\"line\"></span><br><span class=\"line\">What is the name of your City or Locality?  </span><br><span class=\"line\"></span><br><span class=\"line\">[Unknown]:  //输入城市或区域名称，输入完成回车</span><br><span class=\"line\"></span><br><span class=\"line\">What is the name of your State or Province?  </span><br><span class=\"line\"></span><br><span class=\"line\">[Unknown]:  //输入省/市/自治区名称，输入完成回车</span><br><span class=\"line\"></span><br><span class=\"line\">What is the two-letter country code for this unit?  </span><br><span class=\"line\"></span><br><span class=\"line\">[Unknown]:  //输入国家/地区代号（两个字母），中国为CN，输入完成回车</span><br><span class=\"line\"></span><br><span class=\"line\">Is CN=XX, OU=XX, O=XX, L=XX, ST=XX, C=XX correct?  </span><br><span class=\"line\"></span><br><span class=\"line\">[no]:  //确认上面输入的内容是否正确，输入y，回车</span><br><span class=\"line\"></span><br><span class=\"line\">Enter key password for &lt;testalias&gt;  </span><br><span class=\"line\">        (RETURN if same as keystore password):  </span><br><span class=\"line\">        //确认证书密码与证书文件密码一样（HBuilder|HBuilderX要求这两个密码一致），直接回车就可以</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://qny.aqingya.cn/img/20220306170756.png\" alt=\"\"></p>\n<p>完成！！！</p>\n<blockquote>\n<p>查看证书信息</p>\n</blockquote>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keytool -list -v -keystore ceshi.keystore  // 回车后 输入第一步设置的证书文件密码，输入完成回车 </span><br></pre></td></tr></table></figure>\n<p><img src=\"https://qny.aqingya.cn/img/20220306170903.png\" alt=\"\"></p>\n<p>参考：<code>https://blog.csdn.net/qq_40745143/article/details/122336736</code></p>\n","more":"<p>刚开始我更加官方的步骤生成证书，但是报错： 证书不是有效的keystore文件，经排查。</p>\n<p>是jdk的问题，最终使用这个jdk生成了合格的证书</p>\n<p>百度网盘地址： </p>\n<p>链接：<code>https://pan.baidu.com/s/1GWjaRJW0At70D87VxPYUBg</code><br>提取码：qido</p>\n<p>1、安装完成后打开目录</p>\n<p><img src=\"https://qny.aqingya.cn/img/20220306170427.png\" alt=\"\"></p>\n<p>2、添加环境变量：</p>\n<p><img src=\"https://qny.aqingya.cn/img/20220306170548.png\" alt=\"\"></p>\n<p>3、生成签名证书<br>使用keytool -genkey命令生成证书：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keytool -genkey -alias ceshi -keyalg RSA -keysize 2048 -validity 36500 -keystore ceshi.keystore</span><br></pre></td></tr></table></figure>\n<p>或者：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keytool -importkeystore -srckeystore wuzhiguaang.keystore -destkeystore wuzhiguaang.keystore -deststoretype pkcs12</span><br></pre></td></tr></table></figure>\n<ul>\n<li>ceshi是证书别名，可修改为自己想设置的字符，建议使用英文字母和数字</li>\n<li>ceshi.keystore是证书文件名称，可修改为自己想设置的文件名称，也可以指定完整文件路径</li>\n<li>36500是证书的有效期，表示100年有效期，单位天，建议时间设置长一点，避免证书过期</li>\n</ul>\n<p>回车后会提示：</p>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  Enter keystore password:  //输入证书文件密码，输入完成回车  </span><br><span class=\"line\">Re-enter new password:   //再次输入证书文件密码，输入完成回车  </span><br><span class=\"line\">What is your first and last name?  </span><br><span class=\"line\"></span><br><span class=\"line\">[Unknown]:  //输入名字和姓氏，输入完成回车</span><br><span class=\"line\"></span><br><span class=\"line\">What is the name of your organizational unit?  </span><br><span class=\"line\"></span><br><span class=\"line\">[Unknown]:  //输入组织单位名称，输入完成回车</span><br><span class=\"line\"></span><br><span class=\"line\">What is the name of your organization?  </span><br><span class=\"line\"></span><br><span class=\"line\">[Unknown]:  //输入组织名称，输入完成回车</span><br><span class=\"line\"></span><br><span class=\"line\">What is the name of your City or Locality?  </span><br><span class=\"line\"></span><br><span class=\"line\">[Unknown]:  //输入城市或区域名称，输入完成回车</span><br><span class=\"line\"></span><br><span class=\"line\">What is the name of your State or Province?  </span><br><span class=\"line\"></span><br><span class=\"line\">[Unknown]:  //输入省/市/自治区名称，输入完成回车</span><br><span class=\"line\"></span><br><span class=\"line\">What is the two-letter country code for this unit?  </span><br><span class=\"line\"></span><br><span class=\"line\">[Unknown]:  //输入国家/地区代号（两个字母），中国为CN，输入完成回车</span><br><span class=\"line\"></span><br><span class=\"line\">Is CN=XX, OU=XX, O=XX, L=XX, ST=XX, C=XX correct?  </span><br><span class=\"line\"></span><br><span class=\"line\">[no]:  //确认上面输入的内容是否正确，输入y，回车</span><br><span class=\"line\"></span><br><span class=\"line\">Enter key password for &lt;testalias&gt;  </span><br><span class=\"line\">        (RETURN if same as keystore password):  </span><br><span class=\"line\">        //确认证书密码与证书文件密码一样（HBuilder|HBuilderX要求这两个密码一致），直接回车就可以</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://qny.aqingya.cn/img/20220306170756.png\" alt=\"\"></p>\n<p>完成！！！</p>\n<blockquote>\n<p>查看证书信息</p>\n</blockquote>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keytool -list -v -keystore ceshi.keystore  // 回车后 输入第一步设置的证书文件密码，输入完成回车 </span><br></pre></td></tr></table></figure>\n<p><img src=\"https://qny.aqingya.cn/img/20220306170903.png\" alt=\"\"></p>\n<p>参考：<code>https://blog.csdn.net/qq_40745143/article/details/122336736</code></p>\n","categories":[{"name":"uni-app开发","path":"api/categories/uni-app开发.json"}],"tags":[{"name":"微信小程序","path":"api/tags/微信小程序.json"},{"name":"uni-app开发","path":"api/tags/uni-app开发.json"}]}