{"title":"解决AJAX在ie中的缓存问题","slug":"111","date":"2020-09-03T15:01:38.000Z","updated":"2020-09-03T15:15:12.000Z","comments":true,"path":"api/articles/111.json","excerpt":" [Figure] ","covers":["https://cdn.jsdelivr.net/gh/wuzhiguang1/bolgfile@1.8/photo/1jozrw.jpg"],"content":"<p><img src=\"https://cdn.jsdelivr.net/gh/wuzhiguang1/bolgfile@1.8/photo/1jozrw.jpg\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"问题：\"><a href=\"#问题：\" class=\"headerlink\" title=\"问题：\"></a>问题：</h2><p>在一些浏览器中(IE),由于缓存机制的存在，ajax 只会发送的第一次请求，剩余多次请求不会在发送给浏览器而是直接加载缓存中的数据。</p>\n<br>\n\n\n\n<h2 id=\"解决方式：\"><a href=\"#解决方式：\" class=\"headerlink\" title=\"解决方式：\"></a>解决方式：</h2><p>浏览器的缓存是根据 url 地址来记录的，所以我们只需要修改 url 地址，在地址的后面添加一个时间戳，即可避免缓存问题。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">xhr.open(<span class=\"string\">&quot;GET&quot;</span>,<span class=\"string\">&#x27;http://127.0.0.1:8000/ie?t=&#x27;</span>+<span class=\"built_in\">Date</span>.now());</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\"><span class=\"comment\">//-----------------------------------------------------------------------------------</span></span><br><span class=\"line\">            xhr.open(<span class=\"string\">&quot;GET&quot;</span>,<span class=\"string\">&#x27;http://127.0.0.1:8000/ie?t=&#x27;</span>+<span class=\"built_in\">Date</span>.now());</span><br><span class=\"line\"><span class=\"comment\">//-----------------------------------------------------------------------------------</span></span><br><span class=\"line\">            xhr.send();</span><br><span class=\"line\">            xhr.onreadystatechange = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(xhr.readyState === <span class=\"number\">4</span>)&#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(xhr.status &gt;= <span class=\"number\">200</span> &amp;&amp; xhr.status&lt; <span class=\"number\">300</span>)&#123;</span><br><span class=\"line\">                        result.innerHTML = xhr.response;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>对它们的封装: <a href=\"https://aqingya.cn/articl/d3ff9b87.html\">—–传送门—–</a></p>\n<p><br><br><br></p>\n","more":"<h2 id=\"问题：\"><a href=\"#问题：\" class=\"headerlink\" title=\"问题：\"></a>问题：</h2><p>在一些浏览器中(IE),由于缓存机制的存在，ajax 只会发送的第一次请求，剩余多次请求不会在发送给浏览器而是直接加载缓存中的数据。</p>\n<br>\n\n\n\n<h2 id=\"解决方式：\"><a href=\"#解决方式：\" class=\"headerlink\" title=\"解决方式：\"></a>解决方式：</h2><p>浏览器的缓存是根据 url 地址来记录的，所以我们只需要修改 url 地址，在地址的后面添加一个时间戳，即可避免缓存问题。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">xhr.open(<span class=\"string\">&quot;GET&quot;</span>,<span class=\"string\">&#x27;http://127.0.0.1:8000/ie?t=&#x27;</span>+<span class=\"built_in\">Date</span>.now());</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\"><span class=\"comment\">//-----------------------------------------------------------------------------------</span></span><br><span class=\"line\">            xhr.open(<span class=\"string\">&quot;GET&quot;</span>,<span class=\"string\">&#x27;http://127.0.0.1:8000/ie?t=&#x27;</span>+<span class=\"built_in\">Date</span>.now());</span><br><span class=\"line\"><span class=\"comment\">//-----------------------------------------------------------------------------------</span></span><br><span class=\"line\">            xhr.send();</span><br><span class=\"line\">            xhr.onreadystatechange = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(xhr.readyState === <span class=\"number\">4</span>)&#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(xhr.status &gt;= <span class=\"number\">200</span> &amp;&amp; xhr.status&lt; <span class=\"number\">300</span>)&#123;</span><br><span class=\"line\">                        result.innerHTML = xhr.response;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>对它们的封装: <a href=\"https://aqingya.cn/articl/d3ff9b87.html\">—–传送门—–</a></p>\n<p><br><br><br></p>","categories":[{"name":"AJAX","path":"api/categories/AJAX.json"}],"tags":[{"name":"AJAX","path":"api/tags/AJAX.json"}]}