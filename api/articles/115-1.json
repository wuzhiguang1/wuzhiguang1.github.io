{"title":"AJAX之跨域问题","slug":"115-1","date":"2020-09-04T02:45:16.000Z","updated":"2020-09-04T03:45:40.000Z","comments":true,"path":"api/articles/115-1.json","excerpt":" [Figure] ","covers":["https://cdn.jsdelivr.net/gh/wuzhiguang1/bolgfile@1.8/photo/IMG_0107.JPG"],"content":"<p><img src=\"https://cdn.jsdelivr.net/gh/wuzhiguang1/bolgfile@1.8/photo/IMG_0107.JPG\" alt=\"img\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"同源策略\"><a href=\"#同源策略\" class=\"headerlink\" title=\"同源策略\"></a>同源策略</h2><p>同源策略(Same-OriginPolicy)最早由 Netscape 公司提出，是浏览器的一种安全策略。</p>\n<p>同源： 协议、域名、端口号 必须完全相同。</p>\n<p>违背同源策略就是跨域。</p>\n<br>\n\n<h2 id=\"如何解决跨域\"><a href=\"#如何解决跨域\" class=\"headerlink\" title=\"如何解决跨域\"></a>如何解决跨域</h2><p>CORS</p>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS\">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS</a></p>\n<br>\n\n<p>(1) CORS 是什么？ CORS（Cross-OriginResourceSharing），跨域资源共享。CORS 是官方的跨域解决方案，它的特点是不需要在客户端做任何特殊的操作，完全在服务器中进行处理，支持get 和 post 请求。跨域资源共享标准新增了一组HTTP 首部字段，允许服务器声明哪些源站通过浏览器有权限访问哪些资源</p>\n<p>(2) CORS 怎么工作的？ CORS 是通过设置一个响应头来告诉浏览器，该请求允许跨域，浏览器收到该响应<br>以后就会对响应放行。</p>\n<p>(3) CORS 的使用</p>\n<p>主要是服务器端的设置：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">router.get(<span class=\"string\">&quot;/testAJAX&quot;</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req,res</span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//通过 res 来设置响应头，来允许跨域请求 </span></span><br><span class=\"line\">\t<span class=\"comment\">//res.set(&quot;Access-Control-Allow-Origin&quot;,&quot;http://127.0.0.1:3000&quot;); </span></span><br><span class=\"line\">\tres.set(<span class=\"string\">&quot;Access-Control-Allow-Origin&quot;</span>,<span class=\"string\">&quot;*&quot;</span>); </span><br><span class=\"line\">\tres.send(<span class=\"string\">&quot;testAJAX 返回的响应&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><br><br><br></p>\n","more":"<h2 id=\"同源策略\"><a href=\"#同源策略\" class=\"headerlink\" title=\"同源策略\"></a>同源策略</h2><p>同源策略(Same-OriginPolicy)最早由 Netscape 公司提出，是浏览器的一种安全策略。</p>\n<p>同源： 协议、域名、端口号 必须完全相同。</p>\n<p>违背同源策略就是跨域。</p>\n<br>\n\n<h2 id=\"如何解决跨域\"><a href=\"#如何解决跨域\" class=\"headerlink\" title=\"如何解决跨域\"></a>如何解决跨域</h2><p>CORS</p>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS\">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS</a></p>\n<br>\n\n<p>(1) CORS 是什么？ CORS（Cross-OriginResourceSharing），跨域资源共享。CORS 是官方的跨域解决方案，它的特点是不需要在客户端做任何特殊的操作，完全在服务器中进行处理，支持get 和 post 请求。跨域资源共享标准新增了一组HTTP 首部字段，允许服务器声明哪些源站通过浏览器有权限访问哪些资源</p>\n<p>(2) CORS 怎么工作的？ CORS 是通过设置一个响应头来告诉浏览器，该请求允许跨域，浏览器收到该响应<br>以后就会对响应放行。</p>\n<p>(3) CORS 的使用</p>\n<p>主要是服务器端的设置：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">router.get(<span class=\"string\">&quot;/testAJAX&quot;</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req,res</span>)</span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//通过 res 来设置响应头，来允许跨域请求 </span></span><br><span class=\"line\">\t<span class=\"comment\">//res.set(&quot;Access-Control-Allow-Origin&quot;,&quot;http://127.0.0.1:3000&quot;); </span></span><br><span class=\"line\">\tres.set(<span class=\"string\">&quot;Access-Control-Allow-Origin&quot;</span>,<span class=\"string\">&quot;*&quot;</span>); </span><br><span class=\"line\">\tres.send(<span class=\"string\">&quot;testAJAX 返回的响应&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><br><br><br></p>","categories":[{"name":"AJAX","path":"api/categories/AJAX.json"}],"tags":[{"name":"AJAX","path":"api/tags/AJAX.json"}]}