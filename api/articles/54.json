{"title":"webpack生产环境的基本配置","slug":"54","date":"2020-07-15T08:37:37.000Z","updated":"2022-07-29T04:22:04.776Z","comments":true,"path":"api/articles/54.json","excerpt":"webpack生产环境的基本配置:grinning: [Figure] ","covers":["https://qny.aqingya.cn/img/1734dd9495a21b83.jpg","https://qny.aqingya.cn/img/20200715105608.png","https://qny.aqingya.cn/img/20200715110210.png","https://qny.aqingya.cn/img/20200715111036.png","https://qny.aqingya.cn/img/20200715111655.png","https://qny.aqingya.cn/img/20200715113508.png","https://qny.aqingya.cn/img/20200715145630.png"],"content":"<h1 id=\"webpack生产环境的基本配置-grinning\"><a href=\"#webpack生产环境的基本配置-grinning\" class=\"headerlink\" title=\"webpack生产环境的基本配置:grinning:\"></a>webpack生产环境的基本配置:grinning:</h1><p><img src=\"https://qny.aqingya.cn/img/1734dd9495a21b83.jpg\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"1-1-提取-css-成单独文件\"><a href=\"#1-1-提取-css-成单独文件\" class=\"headerlink\" title=\"1.1 提取 css  成单独文件\"></a>1.1 提取 css  成单独文件</h2><p>1、下载安装包</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200715105608.png\"></p>\n<p>2、下载插件 并且引入</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cnpm install mini-css-extract-plugin -D</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p>3、 修改配置文件 <span style=\"background-color:yellow\"> <strong>我们仍然需要注意路径。</strong></span></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">//引入mini-css-extract-plugin</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> MiniCssExtractPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;mini-css-extract-plugin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;js/built.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          <span class=\"comment\">// 创建style标签，将样式放入</span></span><br><span class=\"line\">          <span class=\"comment\">// &#x27;style-loader&#x27;, </span></span><br><span class=\"line\">          <span class=\"comment\">// 这个loader取代style-loader。作用：提取js中的css成单独文件</span></span><br><span class=\"line\">          MiniCssExtractPlugin.loader,</span><br><span class=\"line\">          <span class=\"comment\">// 将css文件整合到js文件中</span></span><br><span class=\"line\">          <span class=\"string\">&#x27;css-loader&#x27;</span></span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">template</span>: <span class=\"string\">&#x27;./src/index.html&#x27;</span></span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> MiniCssExtractPlugin(&#123;</span><br><span class=\"line\">      <span class=\"comment\">// 对输出的css文件进行重命名</span></span><br><span class=\"line\">      <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;css/built.css&#x27;</span>   <span class=\"comment\">//注意路径</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;development&#x27;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>4、运行指令: <code>webpack</code></p>\n<h2 id=\"1-2-css-兼容性处理\"><a href=\"#1-2-css-兼容性处理\" class=\"headerlink\" title=\"1.2 css 兼容性处理\"></a>1.2 css 兼容性处理</h2><blockquote>\n<p>css兼容性处理：postcss –&gt; postcss-loader postcss-preset-env</p>\n<p>帮postcss找到package.json中browserslist里面的配置，通过配置加载指定的css兼容性样式</p>\n</blockquote>\n<p>1、创建文件</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200715110210.png\"></p>\n<p>2、下载 loader </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cnpm install  postcss-loader postcss-preset-env -D</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p>3、修改配置文件  <span style=\"background-color:yellow\"> <strong>我们仍然需要注意路径。</strong></span></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> MiniCssExtractPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;mini-css-extract-plugin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 设置nodejs环境变量</span></span><br><span class=\"line\"><span class=\"comment\">// process.env.NODE_ENV = &#x27;development&#x27;;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">    <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;js/built.js&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">rules</span>: [&#123;</span><br><span class=\"line\">            <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">            use: [</span><br><span class=\"line\">                MiniCssExtractPlugin.loader,</span><br><span class=\"line\">                <span class=\"string\">&#x27;css-loader&#x27;</span>,</span><br><span class=\"line\">                <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">                  css兼容性处理：postcss --&gt; postcss-loader postcss-preset-env</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">                  帮postcss找到package.json中browserslist里面的配置，通过配置加载指定的css兼容性样式</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">                  &quot;browserslist&quot;: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">                    // 开发环境 --&gt; 设置node环境变量：process.env.NODE_ENV = development</span></span><br><span class=\"line\"><span class=\"comment\">                    &quot;development&quot;: [</span></span><br><span class=\"line\"><span class=\"comment\">                      &quot;last 1 chrome version&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">                      &quot;last 1 firefox version&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">                      &quot;last 1 safari version&quot;</span></span><br><span class=\"line\"><span class=\"comment\">                    ],</span></span><br><span class=\"line\"><span class=\"comment\">                    // 生产环境：默认是看生产环境</span></span><br><span class=\"line\"><span class=\"comment\">                    &quot;production&quot;: [</span></span><br><span class=\"line\"><span class=\"comment\">                      &quot;&gt;0.2%&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">                      &quot;not dead&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">                      &quot;not op_mini all&quot;</span></span><br><span class=\"line\"><span class=\"comment\">                    ]</span></span><br><span class=\"line\"><span class=\"comment\">                  &#125;</span></span><br><span class=\"line\"><span class=\"comment\">                */</span></span><br><span class=\"line\">                <span class=\"comment\">// 使用loader的默认配置</span></span><br><span class=\"line\">                <span class=\"comment\">// &#x27;postcss-loader&#x27;,</span></span><br><span class=\"line\">                <span class=\"comment\">// 修改loader的配置</span></span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    <span class=\"attr\">loader</span>: <span class=\"string\">&#x27;postcss-loader&#x27;</span>,</span><br><span class=\"line\">                    <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">ident</span>: <span class=\"string\">&#x27;postcss&#x27;</span>,</span><br><span class=\"line\">                        <span class=\"attr\">plugins</span>: <span class=\"function\">() =&gt;</span> [</span><br><span class=\"line\">                            <span class=\"comment\">// postcss的插件</span></span><br><span class=\"line\">                            <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;postcss-preset-env&#x27;</span>)()</span><br><span class=\"line\">                        ]</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">        <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">            <span class=\"attr\">template</span>: <span class=\"string\">&#x27;./src/index.html&#x27;</span></span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">        <span class=\"keyword\">new</span> MiniCssExtractPlugin(&#123;</span><br><span class=\"line\">            <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;css/built.css&#x27;</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;development&#x27;</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>4、修改 package.json &emsp;&emsp;&emsp; 更多关于browserslist的规则介绍：<a href=\"https://github.com/browserslist/browserslist#shareable-configs\">https://github.com/browserslist/browserslist#shareable-configs</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;browserslist&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;development&quot;</span>: [</span><br><span class=\"line\">      <span class=\"string\">&quot;last 1 chrome version&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;last 1 firefox version&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;last 1 safari version&quot;</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">&quot;production&quot;</span>: [</span><br><span class=\"line\">      <span class=\"string\">&quot;&gt;0.1%&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;not dead&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;not op_mini all&quot;</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>5、 运行指令: <code>webpack</code></p>\n<h2 id=\"1-3-压缩-css\"><a href=\"#1-3-压缩-css\" class=\"headerlink\" title=\"1.3 压缩 css\"></a>1.3 压缩 css</h2><p>1、创建文件</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200715111036.png\"></p>\n<p>2、下载安装包 并且引入</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cnpm install  optimize-css-assets-webpack-plugin -D</span><br></pre></td></tr></table></figure>\n\n\n\n<p>3、修改配置文件  <span style=\"background-color:yellow\"> <strong>我们仍然需要注意路径。</strong></span></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> MiniCssExtractPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;mini-css-extract-plugin&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">//引入optimize-css-assets-webpack-plugin</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> OptimizeCssAssetsWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;optimize-css-assets-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 设置nodejs环境变量</span></span><br><span class=\"line\"><span class=\"comment\">// process.env.NODE_ENV = &#x27;development&#x27;;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">    <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;js/built.js&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">rules</span>: [&#123;</span><br><span class=\"line\">            <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">            use: [</span><br><span class=\"line\">                MiniCssExtractPlugin.loader,</span><br><span class=\"line\">                <span class=\"string\">&#x27;css-loader&#x27;</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    <span class=\"attr\">loader</span>: <span class=\"string\">&#x27;postcss-loader&#x27;</span>,</span><br><span class=\"line\">                    <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">ident</span>: <span class=\"string\">&#x27;postcss&#x27;</span>,</span><br><span class=\"line\">                        <span class=\"attr\">plugins</span>: <span class=\"function\">() =&gt;</span> [</span><br><span class=\"line\">                            <span class=\"comment\">// postcss的插件</span></span><br><span class=\"line\">                            <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;postcss-preset-env&#x27;</span>)()</span><br><span class=\"line\">                        ]</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">        <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">            <span class=\"attr\">template</span>: <span class=\"string\">&#x27;./src/index.html&#x27;</span></span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">        <span class=\"keyword\">new</span> MiniCssExtractPlugin(&#123;</span><br><span class=\"line\">            <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;css/built.css&#x27;</span></span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">        <span class=\"comment\">// 压缩css</span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> OptimizeCssAssetsWebpackPlugin()   <span class=\"comment\">// 压缩css</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;development&#x27;</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>4、运行 <code>webpack</code></p>\n<h2 id=\"1-4-js-语法检查\"><a href=\"#1-4-js-语法检查\" class=\"headerlink\" title=\"1.4 js 语法检查\"></a>1.4 js 语法检查</h2><blockquote>\n<p>语法检查： eslint-loader  eslint<br>   <span style=\"background-color:yellow\"> <strong>注意：只检查自己写的源代码，第三方的库是不用检查的</strong></span><br>  设置检查规则：<br>    package.json中eslintConfig中设置~<br>      “eslintConfig”: {<br>        “extends”: “airbnb-base”<br>      }<br>    airbnb –&gt; eslint-config-airbnb-base  eslint-plugin-import  eslint</p>\n</blockquote>\n<p>1、创建文件</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200715111655.png\"></p>\n<p>2、下载安装包</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cnpm i eslint-loader eslint eslint-config-airbnb-base eslint-plugin-import -D</span><br></pre></td></tr></table></figure>\n\n\n\n<p>3、修改配置文件  <span style=\"background-color:yellow\"> <strong>我们仍然需要注意路径。</strong></span></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;js/built.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">      <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">        语法检查： eslint-loader  eslint</span></span><br><span class=\"line\"><span class=\"comment\">          注意：只检查自己写的源代码，第三方的库是不用检查的</span></span><br><span class=\"line\"><span class=\"comment\">          设置检查规则：</span></span><br><span class=\"line\"><span class=\"comment\">            package.json中eslintConfig中设置~</span></span><br><span class=\"line\"><span class=\"comment\">              &quot;eslintConfig&quot;: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">                &quot;extends&quot;: &quot;airbnb-base&quot;</span></span><br><span class=\"line\"><span class=\"comment\">              &#125;</span></span><br><span class=\"line\"><span class=\"comment\">            airbnb --&gt; eslint-config-airbnb-base  eslint-plugin-import eslint</span></span><br><span class=\"line\"><span class=\"comment\">      */</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span>,  <span class=\"comment\">//这个要排除node_modules，不然错误很多</span></span><br><span class=\"line\">        loader: <span class=\"string\">&#x27;eslint-loader&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">          <span class=\"comment\">// 自动修复eslint的错误</span></span><br><span class=\"line\">          <span class=\"attr\">fix</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">template</span>: <span class=\"string\">&#x27;./src/index.html&#x27;</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;development&#x27;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>4、配置 package.json</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;eslintConfig&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;extends&quot;</span>: <span class=\"string\">&quot;airbnb-base&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;env&quot;</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">&quot;browser&quot;</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>5、运行指令: <code>webpack</code></p>\n<p>注意：</p>\n<p>下一行eslint所有规则都失效（下一行不进行eslint检查）</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//eslint-disable-next-line</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img src=\"https://qny.aqingya.cn/img/20200715113508.png\"></p>\n<h2 id=\"1-5-js-兼容性处理\"><a href=\"#1-5-js-兼容性处理\" class=\"headerlink\" title=\"1.5 js 兼容性处理\"></a>1.5 js 兼容性处理</h2><blockquote>\n<p> js兼容性处理：babel-loader @babel/core </p>\n<p>1、基本js兼容性处理 –&gt; @babel/preset-env<br>换基本语法，如promise高级语法不能转换</p>\n<p>2、全部js兼容性处理 –&gt; @babel/polyfill<br>解决部分兼容性问题，但是将所有兼容性代码全部引入，体积太大了~</p>\n<p><strong>使用时就是在 <span style=\"background-color:yellow\">需要做兼容性处理的js文件中 </span>引入即可</strong><code>import &#39;@babel/polyfill&#39;;</code></p>\n<p>3、需要做兼容性处理的就做：按需加载  –&gt; core-js</p>\n</blockquote>\n<p>1、创建文件</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200715145630.png\"></p>\n<p>2、下载安装包</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cnpm install  babel-loader @babel/core @babel/preset-env @babel/polyfill core-js -D</span><br></pre></td></tr></table></figure>\n\n\n\n<p>3、修改配置文件 <span style=\"background-color:yellow\"> <strong>我们仍然需要注意路径。</strong></span></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;js/built.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">      <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">        js兼容性处理：babel-loader @babel/core </span></span><br><span class=\"line\"><span class=\"comment\">          1. 基本js兼容性处理 --&gt; @babel/preset-env</span></span><br><span class=\"line\"><span class=\"comment\">            问题：只能转换基本语法，如promise高级语法不能转换</span></span><br><span class=\"line\"><span class=\"comment\">          2. 全部js兼容性处理 --&gt; @babel/polyfill  </span></span><br><span class=\"line\"><span class=\"comment\">            问题：我只要解决部分兼容性问题，但是将所有兼容性代码全部引入，体积太大了~</span></span><br><span class=\"line\"><span class=\"comment\">          3. 需要做兼容性处理的就做：按需加载  --&gt; core-js</span></span><br><span class=\"line\"><span class=\"comment\">      */</span>  </span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">&#x27;babel-loader&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">          <span class=\"comment\">// 预设：指示babel做怎么样的兼容性处理</span></span><br><span class=\"line\">          <span class=\"attr\">presets</span>: [</span><br><span class=\"line\">            [</span><br><span class=\"line\">              <span class=\"string\">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 按需加载</span></span><br><span class=\"line\">                <span class=\"attr\">useBuiltIns</span>: <span class=\"string\">&#x27;usage&#x27;</span>,</span><br><span class=\"line\">                <span class=\"comment\">// 指定core-js版本</span></span><br><span class=\"line\">                <span class=\"attr\">corejs</span>: &#123;</span><br><span class=\"line\">                  <span class=\"attr\">version</span>: <span class=\"number\">3</span></span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                <span class=\"comment\">// 指定兼容性做到哪个版本浏览器</span></span><br><span class=\"line\">                <span class=\"attr\">targets</span>: &#123;</span><br><span class=\"line\">                  <span class=\"attr\">chrome</span>: <span class=\"string\">&#x27;60&#x27;</span>,</span><br><span class=\"line\">                  <span class=\"attr\">firefox</span>: <span class=\"string\">&#x27;60&#x27;</span>,</span><br><span class=\"line\">                  <span class=\"attr\">ie</span>: <span class=\"string\">&#x27;9&#x27;</span>,</span><br><span class=\"line\">                  <span class=\"attr\">safari</span>: <span class=\"string\">&#x27;10&#x27;</span>,</span><br><span class=\"line\">                  <span class=\"attr\">edge</span>: <span class=\"string\">&#x27;17&#x27;</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          ]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">template</span>: <span class=\"string\">&#x27;./src/index.html&#x27;</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;development&#x27;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>4、运行指令: <code>webpack</code></p>\n<h2 id=\"1-6-js-压缩\"><a href=\"#1-6-js-压缩\" class=\"headerlink\" title=\"1.6  js 压缩\"></a>1.6  js 压缩</h2><p> 1、修改配置文件</p>\n<p><span style=\"background-color:yellow\"> <strong>我们只需将mode模式改为生产环境下，它会自动压缩js代码</strong></span></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;js/built.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">template</span>: <span class=\"string\">&#x27;./src/index.html&#x27;</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"comment\">// 生产环境下会自动压缩js代码</span></span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;production&#x27;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"1-7-HTML-压缩\"><a href=\"#1-7-HTML-压缩\" class=\"headerlink\" title=\"1.7  HTML 压缩\"></a>1.7  HTML 压缩</h2><p> 1、修改配置文件</p>\n<p><span style=\"background-color:yellow\"> <strong>我们只需在new HtmlWebpackPlugin 下添加<code>minify</code>代码</strong></span></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;js/built.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">template</span>: <span class=\"string\">&#x27;./src/index.html&#x27;</span>,</span><br><span class=\"line\">      <span class=\"comment\">// 压缩html代码</span></span><br><span class=\"line\">      <span class=\"attr\">minify</span>: &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 移除空格</span></span><br><span class=\"line\">        <span class=\"attr\">collapseWhitespace</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"comment\">// 移除注释</span></span><br><span class=\"line\">        <span class=\"attr\">removeComments</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;production&#x27;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"webpack生产环境的基本配置总结\"><a href=\"#webpack生产环境的基本配置总结\" class=\"headerlink\" title=\"webpack生产环境的基本配置总结\"></a>webpack生产环境的基本配置总结</h1><p>修改配置文件</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> MiniCssExtractPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;mini-css-extract-plugin&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> OptimizeCssAssetsWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;optimize-css-assets-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 定义nodejs环境变量：决定使用browserslist的哪个环境</span></span><br><span class=\"line\">process.env.NODE_ENV = <span class=\"string\">&#x27;production&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 复用loader</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> commonCssLoader = [</span><br><span class=\"line\">  MiniCssExtractPlugin.loader,</span><br><span class=\"line\">  <span class=\"string\">&#x27;css-loader&#x27;</span>,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 还需要在package.json中定义browserslist</span></span><br><span class=\"line\">    <span class=\"attr\">loader</span>: <span class=\"string\">&#x27;postcss-loader&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">ident</span>: <span class=\"string\">&#x27;postcss&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">plugins</span>: <span class=\"function\">() =&gt;</span> [<span class=\"built_in\">require</span>(<span class=\"string\">&#x27;postcss-preset-env&#x27;</span>)()]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;js/built.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        use: [...commonCssLoader]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.less$/</span>,</span><br><span class=\"line\">        use: [...commonCssLoader, <span class=\"string\">&#x27;less-loader&#x27;</span>]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">        正常来讲，一个文件只能被一个loader处理。</span></span><br><span class=\"line\"><span class=\"comment\">        当一个文件要被多个loader处理，那么一定要指定loader执行的先后顺序：</span></span><br><span class=\"line\"><span class=\"comment\">          先执行eslint 在执行babel</span></span><br><span class=\"line\"><span class=\"comment\">      */</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 在package.json中eslintConfig --&gt; airbnb</span></span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">        <span class=\"comment\">// 优先执行</span></span><br><span class=\"line\">        enforce: <span class=\"string\">&#x27;pre&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">loader</span>: <span class=\"string\">&#x27;eslint-loader&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">fix</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">&#x27;babel-loader&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">presets</span>: [</span><br><span class=\"line\">            [</span><br><span class=\"line\">              <span class=\"string\">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                <span class=\"attr\">useBuiltIns</span>: <span class=\"string\">&#x27;usage&#x27;</span>,</span><br><span class=\"line\">                <span class=\"attr\">corejs</span>: &#123;<span class=\"attr\">version</span>: <span class=\"number\">3</span>&#125;,</span><br><span class=\"line\">                <span class=\"attr\">targets</span>: &#123;</span><br><span class=\"line\">                  <span class=\"attr\">chrome</span>: <span class=\"string\">&#x27;60&#x27;</span>,</span><br><span class=\"line\">                  <span class=\"attr\">firefox</span>: <span class=\"string\">&#x27;50&#x27;</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          ]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.(jpg|png|gif)/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">&#x27;url-loader&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">limit</span>: <span class=\"number\">8</span> * <span class=\"number\">1024</span>,</span><br><span class=\"line\">          <span class=\"attr\">name</span>: <span class=\"string\">&#x27;[hash:10].[ext]&#x27;</span>,</span><br><span class=\"line\">          <span class=\"attr\">outputPath</span>: <span class=\"string\">&#x27;imgs&#x27;</span>,</span><br><span class=\"line\">          <span class=\"attr\">esModule</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.html$/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">&#x27;html-loader&#x27;</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">exclude</span>: <span class=\"regexp\">/\\.(js|css|less|html|jpg|png|gif)/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">&#x27;file-loader&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">outputPath</span>: <span class=\"string\">&#x27;media&#x27;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> MiniCssExtractPlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;css/built.css&#x27;</span></span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> OptimizeCssAssetsWebpackPlugin(),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">template</span>: <span class=\"string\">&#x27;./src/index.html&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">minify</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">collapseWhitespace</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"attr\">removeComments</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;production&#x27;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<br>\n\n<br>\n\n<p>愿你的坚持终有收获</p>\n<br>\n\n\n\n<br>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","more":"<h2 id=\"1-1-提取-css-成单独文件\"><a href=\"#1-1-提取-css-成单独文件\" class=\"headerlink\" title=\"1.1 提取 css  成单独文件\"></a>1.1 提取 css  成单独文件</h2><p>1、下载安装包</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200715105608.png\"></p>\n<p>2、下载插件 并且引入</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cnpm install mini-css-extract-plugin -D</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p>3、 修改配置文件 <span style=\"background-color:yellow\"> <strong>我们仍然需要注意路径。</strong></span></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">//引入mini-css-extract-plugin</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> MiniCssExtractPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;mini-css-extract-plugin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;js/built.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          <span class=\"comment\">// 创建style标签，将样式放入</span></span><br><span class=\"line\">          <span class=\"comment\">// &#x27;style-loader&#x27;, </span></span><br><span class=\"line\">          <span class=\"comment\">// 这个loader取代style-loader。作用：提取js中的css成单独文件</span></span><br><span class=\"line\">          MiniCssExtractPlugin.loader,</span><br><span class=\"line\">          <span class=\"comment\">// 将css文件整合到js文件中</span></span><br><span class=\"line\">          <span class=\"string\">&#x27;css-loader&#x27;</span></span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">template</span>: <span class=\"string\">&#x27;./src/index.html&#x27;</span></span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> MiniCssExtractPlugin(&#123;</span><br><span class=\"line\">      <span class=\"comment\">// 对输出的css文件进行重命名</span></span><br><span class=\"line\">      <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;css/built.css&#x27;</span>   <span class=\"comment\">//注意路径</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;development&#x27;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>4、运行指令: <code>webpack</code></p>\n<h2 id=\"1-2-css-兼容性处理\"><a href=\"#1-2-css-兼容性处理\" class=\"headerlink\" title=\"1.2 css 兼容性处理\"></a>1.2 css 兼容性处理</h2><blockquote>\n<p>css兼容性处理：postcss –&gt; postcss-loader postcss-preset-env</p>\n<p>帮postcss找到package.json中browserslist里面的配置，通过配置加载指定的css兼容性样式</p>\n</blockquote>\n<p>1、创建文件</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200715110210.png\"></p>\n<p>2、下载 loader </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cnpm install  postcss-loader postcss-preset-env -D</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p>3、修改配置文件  <span style=\"background-color:yellow\"> <strong>我们仍然需要注意路径。</strong></span></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> MiniCssExtractPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;mini-css-extract-plugin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 设置nodejs环境变量</span></span><br><span class=\"line\"><span class=\"comment\">// process.env.NODE_ENV = &#x27;development&#x27;;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">    <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;js/built.js&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">rules</span>: [&#123;</span><br><span class=\"line\">            <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">            use: [</span><br><span class=\"line\">                MiniCssExtractPlugin.loader,</span><br><span class=\"line\">                <span class=\"string\">&#x27;css-loader&#x27;</span>,</span><br><span class=\"line\">                <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">                  css兼容性处理：postcss --&gt; postcss-loader postcss-preset-env</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">                  帮postcss找到package.json中browserslist里面的配置，通过配置加载指定的css兼容性样式</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">                  &quot;browserslist&quot;: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">                    // 开发环境 --&gt; 设置node环境变量：process.env.NODE_ENV = development</span></span><br><span class=\"line\"><span class=\"comment\">                    &quot;development&quot;: [</span></span><br><span class=\"line\"><span class=\"comment\">                      &quot;last 1 chrome version&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">                      &quot;last 1 firefox version&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">                      &quot;last 1 safari version&quot;</span></span><br><span class=\"line\"><span class=\"comment\">                    ],</span></span><br><span class=\"line\"><span class=\"comment\">                    // 生产环境：默认是看生产环境</span></span><br><span class=\"line\"><span class=\"comment\">                    &quot;production&quot;: [</span></span><br><span class=\"line\"><span class=\"comment\">                      &quot;&gt;0.2%&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">                      &quot;not dead&quot;,</span></span><br><span class=\"line\"><span class=\"comment\">                      &quot;not op_mini all&quot;</span></span><br><span class=\"line\"><span class=\"comment\">                    ]</span></span><br><span class=\"line\"><span class=\"comment\">                  &#125;</span></span><br><span class=\"line\"><span class=\"comment\">                */</span></span><br><span class=\"line\">                <span class=\"comment\">// 使用loader的默认配置</span></span><br><span class=\"line\">                <span class=\"comment\">// &#x27;postcss-loader&#x27;,</span></span><br><span class=\"line\">                <span class=\"comment\">// 修改loader的配置</span></span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    <span class=\"attr\">loader</span>: <span class=\"string\">&#x27;postcss-loader&#x27;</span>,</span><br><span class=\"line\">                    <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">ident</span>: <span class=\"string\">&#x27;postcss&#x27;</span>,</span><br><span class=\"line\">                        <span class=\"attr\">plugins</span>: <span class=\"function\">() =&gt;</span> [</span><br><span class=\"line\">                            <span class=\"comment\">// postcss的插件</span></span><br><span class=\"line\">                            <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;postcss-preset-env&#x27;</span>)()</span><br><span class=\"line\">                        ]</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">        <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">            <span class=\"attr\">template</span>: <span class=\"string\">&#x27;./src/index.html&#x27;</span></span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">        <span class=\"keyword\">new</span> MiniCssExtractPlugin(&#123;</span><br><span class=\"line\">            <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;css/built.css&#x27;</span></span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;development&#x27;</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>4、修改 package.json &emsp;&emsp;&emsp; 更多关于browserslist的规则介绍：<a href=\"https://github.com/browserslist/browserslist#shareable-configs\">https://github.com/browserslist/browserslist#shareable-configs</a></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;browserslist&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;development&quot;</span>: [</span><br><span class=\"line\">      <span class=\"string\">&quot;last 1 chrome version&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;last 1 firefox version&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;last 1 safari version&quot;</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">&quot;production&quot;</span>: [</span><br><span class=\"line\">      <span class=\"string\">&quot;&gt;0.1%&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;not dead&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;not op_mini all&quot;</span></span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>5、 运行指令: <code>webpack</code></p>\n<h2 id=\"1-3-压缩-css\"><a href=\"#1-3-压缩-css\" class=\"headerlink\" title=\"1.3 压缩 css\"></a>1.3 压缩 css</h2><p>1、创建文件</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200715111036.png\"></p>\n<p>2、下载安装包 并且引入</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cnpm install  optimize-css-assets-webpack-plugin -D</span><br></pre></td></tr></table></figure>\n\n\n\n<p>3、修改配置文件  <span style=\"background-color:yellow\"> <strong>我们仍然需要注意路径。</strong></span></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> MiniCssExtractPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;mini-css-extract-plugin&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">//引入optimize-css-assets-webpack-plugin</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> OptimizeCssAssetsWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;optimize-css-assets-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 设置nodejs环境变量</span></span><br><span class=\"line\"><span class=\"comment\">// process.env.NODE_ENV = &#x27;development&#x27;;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">    <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;js/built.js&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">rules</span>: [&#123;</span><br><span class=\"line\">            <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">            use: [</span><br><span class=\"line\">                MiniCssExtractPlugin.loader,</span><br><span class=\"line\">                <span class=\"string\">&#x27;css-loader&#x27;</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">                &#123;</span><br><span class=\"line\">                    <span class=\"attr\">loader</span>: <span class=\"string\">&#x27;postcss-loader&#x27;</span>,</span><br><span class=\"line\">                    <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">                        <span class=\"attr\">ident</span>: <span class=\"string\">&#x27;postcss&#x27;</span>,</span><br><span class=\"line\">                        <span class=\"attr\">plugins</span>: <span class=\"function\">() =&gt;</span> [</span><br><span class=\"line\">                            <span class=\"comment\">// postcss的插件</span></span><br><span class=\"line\">                            <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;postcss-preset-env&#x27;</span>)()</span><br><span class=\"line\">                        ]</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">        &#125;]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">        <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">            <span class=\"attr\">template</span>: <span class=\"string\">&#x27;./src/index.html&#x27;</span></span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">        <span class=\"keyword\">new</span> MiniCssExtractPlugin(&#123;</span><br><span class=\"line\">            <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;css/built.css&#x27;</span></span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">        <span class=\"comment\">// 压缩css</span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> OptimizeCssAssetsWebpackPlugin()   <span class=\"comment\">// 压缩css</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;development&#x27;</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>4、运行 <code>webpack</code></p>\n<h2 id=\"1-4-js-语法检查\"><a href=\"#1-4-js-语法检查\" class=\"headerlink\" title=\"1.4 js 语法检查\"></a>1.4 js 语法检查</h2><blockquote>\n<p>语法检查： eslint-loader  eslint<br>   <span style=\"background-color:yellow\"> <strong>注意：只检查自己写的源代码，第三方的库是不用检查的</strong></span><br>  设置检查规则：<br>    package.json中eslintConfig中设置~<br>      “eslintConfig”: {<br>        “extends”: “airbnb-base”<br>      }<br>    airbnb –&gt; eslint-config-airbnb-base  eslint-plugin-import  eslint</p>\n</blockquote>\n<p>1、创建文件</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200715111655.png\"></p>\n<p>2、下载安装包</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cnpm i eslint-loader eslint eslint-config-airbnb-base eslint-plugin-import -D</span><br></pre></td></tr></table></figure>\n\n\n\n<p>3、修改配置文件  <span style=\"background-color:yellow\"> <strong>我们仍然需要注意路径。</strong></span></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;js/built.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">      <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">        语法检查： eslint-loader  eslint</span></span><br><span class=\"line\"><span class=\"comment\">          注意：只检查自己写的源代码，第三方的库是不用检查的</span></span><br><span class=\"line\"><span class=\"comment\">          设置检查规则：</span></span><br><span class=\"line\"><span class=\"comment\">            package.json中eslintConfig中设置~</span></span><br><span class=\"line\"><span class=\"comment\">              &quot;eslintConfig&quot;: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">                &quot;extends&quot;: &quot;airbnb-base&quot;</span></span><br><span class=\"line\"><span class=\"comment\">              &#125;</span></span><br><span class=\"line\"><span class=\"comment\">            airbnb --&gt; eslint-config-airbnb-base  eslint-plugin-import eslint</span></span><br><span class=\"line\"><span class=\"comment\">      */</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span>,  <span class=\"comment\">//这个要排除node_modules，不然错误很多</span></span><br><span class=\"line\">        loader: <span class=\"string\">&#x27;eslint-loader&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">          <span class=\"comment\">// 自动修复eslint的错误</span></span><br><span class=\"line\">          <span class=\"attr\">fix</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">template</span>: <span class=\"string\">&#x27;./src/index.html&#x27;</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;development&#x27;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>4、配置 package.json</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;eslintConfig&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;extends&quot;</span>: <span class=\"string\">&quot;airbnb-base&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;env&quot;</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">&quot;browser&quot;</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>5、运行指令: <code>webpack</code></p>\n<p>注意：</p>\n<p>下一行eslint所有规则都失效（下一行不进行eslint检查）</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//eslint-disable-next-line</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img src=\"https://qny.aqingya.cn/img/20200715113508.png\"></p>\n<h2 id=\"1-5-js-兼容性处理\"><a href=\"#1-5-js-兼容性处理\" class=\"headerlink\" title=\"1.5 js 兼容性处理\"></a>1.5 js 兼容性处理</h2><blockquote>\n<p> js兼容性处理：babel-loader @babel/core </p>\n<p>1、基本js兼容性处理 –&gt; @babel/preset-env<br>换基本语法，如promise高级语法不能转换</p>\n<p>2、全部js兼容性处理 –&gt; @babel/polyfill<br>解决部分兼容性问题，但是将所有兼容性代码全部引入，体积太大了~</p>\n<p><strong>使用时就是在 <span style=\"background-color:yellow\">需要做兼容性处理的js文件中 </span>引入即可</strong><code>import &#39;@babel/polyfill&#39;;</code></p>\n<p>3、需要做兼容性处理的就做：按需加载  –&gt; core-js</p>\n</blockquote>\n<p>1、创建文件</p>\n<p><img src=\"https://qny.aqingya.cn/img/20200715145630.png\"></p>\n<p>2、下载安装包</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cnpm install  babel-loader @babel/core @babel/preset-env @babel/polyfill core-js -D</span><br></pre></td></tr></table></figure>\n\n\n\n<p>3、修改配置文件 <span style=\"background-color:yellow\"> <strong>我们仍然需要注意路径。</strong></span></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;js/built.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">      <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">        js兼容性处理：babel-loader @babel/core </span></span><br><span class=\"line\"><span class=\"comment\">          1. 基本js兼容性处理 --&gt; @babel/preset-env</span></span><br><span class=\"line\"><span class=\"comment\">            问题：只能转换基本语法，如promise高级语法不能转换</span></span><br><span class=\"line\"><span class=\"comment\">          2. 全部js兼容性处理 --&gt; @babel/polyfill  </span></span><br><span class=\"line\"><span class=\"comment\">            问题：我只要解决部分兼容性问题，但是将所有兼容性代码全部引入，体积太大了~</span></span><br><span class=\"line\"><span class=\"comment\">          3. 需要做兼容性处理的就做：按需加载  --&gt; core-js</span></span><br><span class=\"line\"><span class=\"comment\">      */</span>  </span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">&#x27;babel-loader&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">          <span class=\"comment\">// 预设：指示babel做怎么样的兼容性处理</span></span><br><span class=\"line\">          <span class=\"attr\">presets</span>: [</span><br><span class=\"line\">            [</span><br><span class=\"line\">              <span class=\"string\">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 按需加载</span></span><br><span class=\"line\">                <span class=\"attr\">useBuiltIns</span>: <span class=\"string\">&#x27;usage&#x27;</span>,</span><br><span class=\"line\">                <span class=\"comment\">// 指定core-js版本</span></span><br><span class=\"line\">                <span class=\"attr\">corejs</span>: &#123;</span><br><span class=\"line\">                  <span class=\"attr\">version</span>: <span class=\"number\">3</span></span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                <span class=\"comment\">// 指定兼容性做到哪个版本浏览器</span></span><br><span class=\"line\">                <span class=\"attr\">targets</span>: &#123;</span><br><span class=\"line\">                  <span class=\"attr\">chrome</span>: <span class=\"string\">&#x27;60&#x27;</span>,</span><br><span class=\"line\">                  <span class=\"attr\">firefox</span>: <span class=\"string\">&#x27;60&#x27;</span>,</span><br><span class=\"line\">                  <span class=\"attr\">ie</span>: <span class=\"string\">&#x27;9&#x27;</span>,</span><br><span class=\"line\">                  <span class=\"attr\">safari</span>: <span class=\"string\">&#x27;10&#x27;</span>,</span><br><span class=\"line\">                  <span class=\"attr\">edge</span>: <span class=\"string\">&#x27;17&#x27;</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          ]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">template</span>: <span class=\"string\">&#x27;./src/index.html&#x27;</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;development&#x27;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>4、运行指令: <code>webpack</code></p>\n<h2 id=\"1-6-js-压缩\"><a href=\"#1-6-js-压缩\" class=\"headerlink\" title=\"1.6  js 压缩\"></a>1.6  js 压缩</h2><p> 1、修改配置文件</p>\n<p><span style=\"background-color:yellow\"> <strong>我们只需将mode模式改为生产环境下，它会自动压缩js代码</strong></span></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;js/built.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">template</span>: <span class=\"string\">&#x27;./src/index.html&#x27;</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"comment\">// 生产环境下会自动压缩js代码</span></span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;production&#x27;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"1-7-HTML-压缩\"><a href=\"#1-7-HTML-压缩\" class=\"headerlink\" title=\"1.7  HTML 压缩\"></a>1.7  HTML 压缩</h2><p> 1、修改配置文件</p>\n<p><span style=\"background-color:yellow\"> <strong>我们只需在new HtmlWebpackPlugin 下添加<code>minify</code>代码</strong></span></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;js/built.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">template</span>: <span class=\"string\">&#x27;./src/index.html&#x27;</span>,</span><br><span class=\"line\">      <span class=\"comment\">// 压缩html代码</span></span><br><span class=\"line\">      <span class=\"attr\">minify</span>: &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 移除空格</span></span><br><span class=\"line\">        <span class=\"attr\">collapseWhitespace</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"comment\">// 移除注释</span></span><br><span class=\"line\">        <span class=\"attr\">removeComments</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;production&#x27;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"webpack生产环境的基本配置总结\"><a href=\"#webpack生产环境的基本配置总结\" class=\"headerlink\" title=\"webpack生产环境的基本配置总结\"></a>webpack生产环境的基本配置总结</h1><p>修改配置文件</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; resolve &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;path&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> MiniCssExtractPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;mini-css-extract-plugin&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> OptimizeCssAssetsWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;optimize-css-assets-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 定义nodejs环境变量：决定使用browserslist的哪个环境</span></span><br><span class=\"line\">process.env.NODE_ENV = <span class=\"string\">&#x27;production&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 复用loader</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> commonCssLoader = [</span><br><span class=\"line\">  MiniCssExtractPlugin.loader,</span><br><span class=\"line\">  <span class=\"string\">&#x27;css-loader&#x27;</span>,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 还需要在package.json中定义browserslist</span></span><br><span class=\"line\">    <span class=\"attr\">loader</span>: <span class=\"string\">&#x27;postcss-loader&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">ident</span>: <span class=\"string\">&#x27;postcss&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">plugins</span>: <span class=\"function\">() =&gt;</span> [<span class=\"built_in\">require</span>(<span class=\"string\">&#x27;postcss-preset-env&#x27;</span>)()]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"attr\">entry</span>: <span class=\"string\">&#x27;./src/js/index.js&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;js/built.js&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">path</span>: resolve(__dirname, <span class=\"string\">&#x27;build&#x27;</span>)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        use: [...commonCssLoader]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.less$/</span>,</span><br><span class=\"line\">        use: [...commonCssLoader, <span class=\"string\">&#x27;less-loader&#x27;</span>]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">        正常来讲，一个文件只能被一个loader处理。</span></span><br><span class=\"line\"><span class=\"comment\">        当一个文件要被多个loader处理，那么一定要指定loader执行的先后顺序：</span></span><br><span class=\"line\"><span class=\"comment\">          先执行eslint 在执行babel</span></span><br><span class=\"line\"><span class=\"comment\">      */</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 在package.json中eslintConfig --&gt; airbnb</span></span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">        <span class=\"comment\">// 优先执行</span></span><br><span class=\"line\">        enforce: <span class=\"string\">&#x27;pre&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">loader</span>: <span class=\"string\">&#x27;eslint-loader&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">fix</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">&#x27;babel-loader&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">presets</span>: [</span><br><span class=\"line\">            [</span><br><span class=\"line\">              <span class=\"string\">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                <span class=\"attr\">useBuiltIns</span>: <span class=\"string\">&#x27;usage&#x27;</span>,</span><br><span class=\"line\">                <span class=\"attr\">corejs</span>: &#123;<span class=\"attr\">version</span>: <span class=\"number\">3</span>&#125;,</span><br><span class=\"line\">                <span class=\"attr\">targets</span>: &#123;</span><br><span class=\"line\">                  <span class=\"attr\">chrome</span>: <span class=\"string\">&#x27;60&#x27;</span>,</span><br><span class=\"line\">                  <span class=\"attr\">firefox</span>: <span class=\"string\">&#x27;50&#x27;</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          ]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.(jpg|png|gif)/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">&#x27;url-loader&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">limit</span>: <span class=\"number\">8</span> * <span class=\"number\">1024</span>,</span><br><span class=\"line\">          <span class=\"attr\">name</span>: <span class=\"string\">&#x27;[hash:10].[ext]&#x27;</span>,</span><br><span class=\"line\">          <span class=\"attr\">outputPath</span>: <span class=\"string\">&#x27;imgs&#x27;</span>,</span><br><span class=\"line\">          <span class=\"attr\">esModule</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.html$/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">&#x27;html-loader&#x27;</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">exclude</span>: <span class=\"regexp\">/\\.(js|css|less|html|jpg|png|gif)/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">&#x27;file-loader&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">outputPath</span>: <span class=\"string\">&#x27;media&#x27;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> MiniCssExtractPlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;css/built.css&#x27;</span></span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> OptimizeCssAssetsWebpackPlugin(),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      <span class=\"attr\">template</span>: <span class=\"string\">&#x27;./src/index.html&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">minify</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">collapseWhitespace</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"attr\">removeComments</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&#x27;production&#x27;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<br>\n\n<br>\n\n<p>愿你的坚持终有收获</p>\n<br>\n\n\n\n<br>","categories":[{"name":"WebPack","path":"api/categories/WebPack.json"}],"tags":[{"name":"WebPack","path":"api/tags/WebPack.json"}]}