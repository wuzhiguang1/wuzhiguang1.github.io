{"title":"在Vue中使用图片懒加载","slug":"97","date":"2020-08-21T06:27:52.000Z","updated":"2020-08-21T06:31:14.000Z","comments":true,"path":"api/articles/97.json","excerpt":" [Figure] ","covers":["https://cdn.jsdelivr.net/gh/wuzhiguang1/bolgfile@1.2/photo/IMG_0042.JPG"],"content":"<p><img src=\"https://cdn.jsdelivr.net/gh/wuzhiguang1/bolgfile@1.2/photo/IMG_0042.JPG\"></p>\n<span id=\"more\"></span>\n\n\n\n <br>\n\n<p> vue v-lazy官方API：<a href=\"https://github.com/hilongjw/vue-lazyload\">https://github.com/hilongjw/vue-lazyload</a></p>\n<br>\n\n<p>1.安装插件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install vue-lazyload --save</span><br></pre></td></tr></table></figure>\n\n<p>2.在入口文件main.js中引入并使用</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> VueLazyload <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue-lazyload&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">Vue.use(VueLazyload, &#123;</span><br><span class=\"line\">   <span class=\"attr\">loading</span>: <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;img/loading.png&#x27;</span>),<span class=\"comment\">//加载中图片，一定要有，不然会一直重复加载占位图</span></span><br><span class=\"line\">   <span class=\"attr\">error</span>: <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;img/error.png&#x27;</span>) <span class=\"comment\">//加载失败图片</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>3.修改图片显示方式为懒加载</p>\n<p>vue文件中将需要懒加载的图片绑定 v-bind:src 修改为 v-lazy </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item-pic&quot;</span> <span class=\"attr\">v-lazy</span>=<span class=\"string\">&quot;newItem.picUrl&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>img:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">v-lazy</span>=<span class=\"string\">&quot;&#x27;/static/img/&#x27; + item.productImage&quot;</span> <span class=\"attr\">:key</span>=<span class=\"string\">&quot;&#x27;/static/img/&#x27; +item.productImage&quot;</span>&gt;</span> //将 :src 属性直接改为v-lazy, :key是为了防止刷新页面或图片更改时图片不更新</span><br></pre></td></tr></table></figure>\n\n<p>背景图:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width:100px;height:100px;&quot;</span> <span class=\"attr\">v-lazy:background-image</span>=<span class=\"string\">&quot;&#123;src: item.imgpath&#125;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p> v-html，如从后台获取的富文本字符串中图片:（用replace将src替换为data-src）</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-lazy-container</span>=<span class=\"string\">&quot;&#123; selector: &#x27;img&#x27;, error: &#x27;xxx.jpg&#x27;, loading: &#x27;xxx.jpg&#x27; &#125;&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">data-src</span>=<span class=\"string\">&quot;//domain.com/img1.jpg&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">data-src</span>=<span class=\"string\">&quot;//domain.com/img2.jpg&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">data-src</span>=<span class=\"string\">&quot;//domain.com/img3.jpg&quot;</span>&gt;</span>  </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<br>\n\n<br>","more":"<br>\n\n<p> vue v-lazy官方API：<a href=\"https://github.com/hilongjw/vue-lazyload\">https://github.com/hilongjw/vue-lazyload</a></p>\n<br>\n\n<p>1.安装插件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install vue-lazyload --save</span><br></pre></td></tr></table></figure>\n\n<p>2.在入口文件main.js中引入并使用</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> VueLazyload <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue-lazyload&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\">Vue.use(VueLazyload, &#123;</span><br><span class=\"line\">   <span class=\"attr\">loading</span>: <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;img/loading.png&#x27;</span>),<span class=\"comment\">//加载中图片，一定要有，不然会一直重复加载占位图</span></span><br><span class=\"line\">   <span class=\"attr\">error</span>: <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;img/error.png&#x27;</span>) <span class=\"comment\">//加载失败图片</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>3.修改图片显示方式为懒加载</p>\n<p>vue文件中将需要懒加载的图片绑定 v-bind:src 修改为 v-lazy </p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;item-pic&quot;</span> <span class=\"attr\">v-lazy</span>=<span class=\"string\">&quot;newItem.picUrl&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>img:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">v-lazy</span>=<span class=\"string\">&quot;&#x27;/static/img/&#x27; + item.productImage&quot;</span> <span class=\"attr\">:key</span>=<span class=\"string\">&quot;&#x27;/static/img/&#x27; +item.productImage&quot;</span>&gt;</span> //将 :src 属性直接改为v-lazy, :key是为了防止刷新页面或图片更改时图片不更新</span><br></pre></td></tr></table></figure>\n\n<p>背景图:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;width:100px;height:100px;&quot;</span> <span class=\"attr\">v-lazy:background-image</span>=<span class=\"string\">&quot;&#123;src: item.imgpath&#125;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p> v-html，如从后台获取的富文本字符串中图片:（用replace将src替换为data-src）</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-lazy-container</span>=<span class=\"string\">&quot;&#123; selector: &#x27;img&#x27;, error: &#x27;xxx.jpg&#x27;, loading: &#x27;xxx.jpg&#x27; &#125;&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">data-src</span>=<span class=\"string\">&quot;//domain.com/img1.jpg&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">data-src</span>=<span class=\"string\">&quot;//domain.com/img2.jpg&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">data-src</span>=<span class=\"string\">&quot;//domain.com/img3.jpg&quot;</span>&gt;</span>  </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<br>\n\n<br>","categories":[{"name":"Vue","path":"api/categories/Vue.json"}],"tags":[{"name":"Vue","path":"api/tags/Vue.json"},{"name":"前端知识","path":"api/tags/前端知识.json"},{"name":"Vue插件","path":"api/tags/Vue插件.json"}]}